<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2022-2023/Durand-Jean-Baptiste/mon/temps-2.2/"><meta name="description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta property="og:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="twitter:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="author" content="Jean-Baptiste Durand"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, MON, Firewall, R√©seau, Packet Tracer"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="Firewall"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Durand-Jean-Baptiste/mon/temps-2.2/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="Firewall"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Durand-Jean-Baptiste/mon/temps-2.2/"><title>Firewall</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">Firewall</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tags :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">MON</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">Firewall</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">R√©seau</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">Packet Tracer</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">MON</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Jean-Baptiste Durand</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2022-2023</span></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2022-2023/Durand-Jean-Baptiste/">Jean-Baptiste Durand</a><span class="px-1">/</span><a href="/promos/2022-2023/Durand-Jean-Baptiste/mon/">MON Jean-Baptiste</a><span class="px-1">/</span><a href="/promos/2022-2023/Durand-Jean-Baptiste/mon/temps-2.2/">Firewall</a></div></div><p>√Ä quoi servent les pare-feu ? Et comment les mettre en place sur un serveur ?</p><h2 id="toc">Table des mati√®res</h2><ul><li><a href="#toc">Table des mati√®res</a></li><li><a href="#h1">√Ä quoi servent les pare-feu ?</a></li><li><a href="#h2">Prot√©ger ma box</a></li><li><a href="#h3">Prot√©ger mon ordinateur</a><ul><li><a href="#h3-1">Avant de commencer</a></li><li><a href="#h3-2">Mise en place du pare-feu</a></li><li><a href="#h3-3">Utiliser cette configuration</a></li></ul></li><li><a href="#h4">Packet Tracer</a></li><li><a href="#liens">Liens Utiles</a></li></ul><h2 id="h1">√Ä quoi servent les pare-feu ?</h2><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Durand-Jean-Baptiste/mon/temps-2.2/firewallCartoon.jpg" alt="Cartoon to present firewall" style="height:400px;margin:0 auto;border:0"><p>Un <strong>Firewall</strong> (pare-feu) est un logiciel qui <strong>contr√¥le l'ensemble des flux</strong> entrant et sortant de l'appareil sur lequel il est connect√©.</p><p>Aujourd‚Äôhui, la majorit√© des flux qui transitent sont des flux internet.</p><p>On peut donc r√©sumer le firewall comme un logiciel qui va contr√¥ler les connexions √† Internet.</p><p><strong>Pourquoi vouloir contr√¥ler les flux internet ?</strong></p><p>Prenons par exemple un contexte d'une entreprise, qui a des serveurs - un public et un priv√© - et un r√©seau local.</p><ul><li>Toute personne ext√©rieure √† l'entreprise, doit pouvoir avoir acc√®s au serveur public (pour avoir acc√®s √† la page internet par exemple). Mais il ne faudrait pas qu'ils acc√®dent au serveur priv√© (un serveur qui peut contenir des informations confidentielles). Donc un pare-feu permettrait de v√©rifier que seule les personnes autoris√©es peuvent avoir certains acc√®s privil√©gi√©s.</li><li>Toute personne interne √† l'entreprise peut - √† priori - acc√©der √† n'importe site web, en particulier les malveillants. Ce qui peut mener ces utilisateurs √† t√©l√©charger des malware et ainsi se faire hacker. Une entreprise pourrait contr√¥ler les requ√™tes sortantes pour v√©rifier qu'elles acc√®dent seulement aux sites autoris√©s.</li></ul><p>Remarque, si les employ√©s de l'entreprise utilisent un VPN, il ne sera pas possible pour l'entreprise de filtrer les flux sortants, car le VPN agit comme un tunnel.</p><p><strong>O√π appliquer des firewall ?</strong></p><ul><li>Dans le contexte de l'entreprise, le pare-feu pourrait se placer sur la box de l'entreprise, sur l'interface externe (interface qui relie la box au reste du monde).</li><li>Dans un contexte d'un a√©roport o√π il y a un r√©seau public, et un r√©seau priv√© - pour permettre au clients d'acc√©der √† internet et aux employ√©s de communiquer avec les avions. Le r√©seau sera compos√© de <strong>VLAN</strong> (<em>Virtual Local Area Network</em>) pour √©viter d'avoir les clients sur le m√™me r√©seau que les employ√©s. Les pare-feu peuvent se placer sur les diff√©rentes interfaces des VLAN du switch.</li></ul><p>Dans un monde o√π tout est s√©curis√©, chaque appareil devrait avoir son propre pare-feu, sur chacune de ses interfaces. Car si un utilisateur malveillant a r√©ussi √† contourner le pare-feu principal, tout ce qui est derri√®re peut-√™tre vuln√©rable aux attaques.</p><p>Il faut toujours se demander √† qui est ce que je peux faire confiance ? Aux personnes sur mon box ? Tout internet ? √Ä priori, il faudrait faire confiance √† personne - √† part √† soit m√™me.</p><h2 id="h2">Prot√©ger ma box</h2><div class="quote relative drop-shadow py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100 dark:border-amber-800 dark:bg-amber-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-amber-800 dark:stroke-amber-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Note</b></p></div><div class="pl-8 mr-8"><p>Pour prot√©ger sa box, il faut d'abord que vous ayez un <strong>acc√®s administrateur</strong> √† votre box. Si personne n'a jamais √©t√© administrateur, il suffit souvent seulement de trouver le code d'acc√®s sous la box.</p></div></div><p>Il faut se connecter sur la GUI de la box : (en √©tant connect√© sur le r√©seau)</p><ul><li><a href="http://192.168.1.254">Bbox</a></li><li><a href="http://mafreebox.freebox.fr">FreeBox</a></li><li><a href="http://192.168.1.1">Sfr</a></li><li><a href="http://192.168.1.1">Orange</a></li></ul><p>Si votre box est un mod√®le diff√©rent, il n'est pas compliqu√© de trouver l'adresse sur internet.</p><p>Pour ma part, j'ai une BBox, donc les exemples viendront de l√†.</p><p>Une fois arriv√© sur la page d'administration, on trouve o√π est ce qu'on peut g√©rer les param√®tres avanc√©s de la box.</p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Durand-Jean-Baptiste/mon/temps-2.2/firewallBoxHome.png" alt="Box Administration Page" style="height:400px;margin:0 auto;border:0"><p>Puis en acc√©dant aux pare-feu, on peut voir quels sont les filtres mis en place sur la box.</p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Durand-Jean-Baptiste/mon/temps-2.2/fireWallonBox.png" alt="Box page Firewall" style="height:300px;margin:0 auto;border:0"><p>Ici, le pare-feu bloque toutes les connexions - UDP et TCP - sur les ports 25 et 445 de la box.</p><h2 id="h3">Prot√©ger mon ordinateur</h2><p><strong>Dans quelle condition est-il int√©ressant de prot√©ger son ordinateur ?</strong></p><p>Si par exemple, vous √™tes en train de travailler sur la prochaine release de votre serveur web. Vous faites tourner en local le serveur, pour faire vos test. Malheureusement, vous √™tes actuellement dans un a√©roport, en attendant votre avion vers Centrale Casablanca, et n'avez acc√®s qu'√† un r√©seau public o√π peuvent √™tre connect√©s des personnes malveillantes. En faisant tourner votre serveur sur votre ordinateur, vous l'exposez √† des potentiels tentatives d'intrusions.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p>Ayant un Ubuntu, je me suis concentr√© sur les technologies disponible pour mon OS.</p></div><div class="pl-8 mr-8"><p>Une solution a √©t√© d√©velopp√©e sp√©cialement pour les appareils Ubuntu : <a href="https://en.wikipedia.org/wiki/Uncomplicated_Firewall">UFW</a> <em>Uncomplicated FireWall</em>, elle est maintenant disponible pour une majorit√© des distributions Debian.</p><p>Voici des liens pour :</p><ul><li><a href="https://support.microsoft.com/en-us/windows/turn-microsoft-defender-firewall-on-or-off-ec0844f7-aebd-0583-67fe-601ecf5d774f#ID0EFD=Windows_11">Windows</a></li><li><a href="https://support.apple.com/guide/mac-help/block-connections-to-your-mac-with-a-firewall-mh34041/mac">MacOS</a></li></ul><p>N'ayant pas ces OS, je laisse la d√©couverte de ces technologies au lecteur.</p></div></div><h3 id="h3-1">Avant de commencer</h3><p><strong>Installation</strong></p><p>Cet application est install√©e par d√©faut sur tous les appareils Ubuntu.</p><p>Elle peut sinon √™tre install√©e par :</p><pre class="language-bash line-numbers"><code>

sudo apt-get install ufw


</code></pre><p><strong>Utilisation</strong></p><div class="quote relative drop-shadow py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100 dark:border-amber-800 dark:bg-amber-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-amber-800 dark:stroke-amber-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Note</b></p></div><div class="pl-8 mr-8"><p>Il faut avoir les droits root pour pouvoir acc√©der √† cet application. J'ai utilis√© une machine virtuelle Ubuntu, sur laquelle j'ai mis un pare-feu, et j'ai utilis√© mon ordinateur pour tester la protection.</p><p>J'ai mis en place 2 applications sur 2 ports :</p><ul><li>Une <strong>application OpenSSH</strong>, pour pouvoir me connecter √† distance √† ma machine, sur le <strong>port 22</strong></li><li>Un <strong>serveur web Express</strong> sur le <strong>port 8080</strong>, un serveur qu'on veut rendre inaccessible de l'ext√©rieur.</li></ul></div></div><p>Pour voir si mes services fonctionnent, et sont accessibles de l'ext√©rieur, j'ai utilis√© <em>nmap</em> (cf <a href="https://do-it.aioli.ec-m.fr/mon/TA/pentest">explication de Thibault dessus</a>) un outil de scan de port.</p><pre class="language-bash line-numbers"><code>

sudo nmap -A -T4 -p- 192.168.56.101


</code></pre><p>-A permet d'avoir une d√©tection de l'OS, des versions des logiciels, et le chemin qu'a pris les paquets</p><p>-T&lt;0-5&gt; permet de d√©finir le timing de ping de la cible 5 est tr√®s rapide/0 est tr√®s lent</p><p>-p permet de choisir les ports cibl√©s, ex: -p22 / -p1-65535 / -p U:53,111,137,T:21-25,80,139,8080 / -p- permet de scanner tous les ports.</p><p>Ensuite l'adresse IP de la cible (il faut pr√©ciser -6 si c'est une IPv6), ou le nom de domaine.</p><p><strong>Voici ce que j'ai obtenu apr√®s le scan</strong></p><pre class="line-numbers"><code>

PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0)
8080/tcp open  http    Node.js Express framework


</code></pre><p>De plus, il est possible d'acc√©der au site web h√©berg√© : <a href="http://192.168.56.101:8080">http://192.168.56.101:8080</a></p><p>Donc par d√©faut, la machine virtuelle n'a pas prot√©g√© la connexion au site web.</p><h3 id="h3-2">Mise en place du pare-feu</h3><div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none dark:border-indigo-800 dark:bg-indigo-950"><details class="group"><summary class="list-none py-0.5"><svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg> <svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg><div class="pl-8 font-bold inline-block group-open:select-text"><p>Petit conseil</p></div><svg class="group-open:hidden inline-block pl-3 w-10 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg></summary><div class="mx-8 pb-2 cursor-auto select-text"><p>Toutes les commandes n√©cessitent des droits <em>root</em>, pour √©viter d'avoir √† recopier <em>sudo</em> pour chacune des commandes, il est possible de se mettre en utilisateur <em>root</em> avec la commande :</p><pre class="language-bash line-numbers"><code>

sudo su root


</code></pre><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p>Il ne faut pas faire de chose qu'on ne ma√Ætrise pas en √©tant <em>root</em></p></div><div class="pl-8 mr-8"></div></div><p>Pour sortir de <em>root</em>, on peut ex√©cuter la commande</p><pre class="language-bash line-numbers"><code>

exit


</code></pre></div></details></div><p><strong>R√®gles par d√©faut</strong></p><p>Tout d'abord, on va mettre en place des r√®gles par d√©faut, pour les flux entrant et sortant :</p><pre class="language-bash line-numbers"><code>

sudo ufw default allow outgoing
sudo ufw default deny incoming


</code></pre><p>On autorise tous les flux sortant, et on interdit les flux entrant.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p>Attention</p></div><div class="pl-8 mr-8"><p>si vous pouvez seulement vous connecter via une connexion <em>SSH</em> au serveur, il ne faut surtout pas se d√©connecter maintenant, car vous ne pourriez plus avoir acc√®s √† votre serveur.</p></div></div><p><strong>Autoriser les connexions SSH</strong></p><pre class="language-bash line-numbers"><code>

sudo ufw allow ssh


</code></pre><p>le port ssh √©tant par d√©faut le 22, cette commande autorise les connxions au port 22, si le port est diff√©rent (par exemple le 2222), il faut executer :</p><pre class="language-bash line-numbers"><code>

sudo ufw allow 2222/tcp


</code></pre><p>On peut aussi autoriser seulement les connexions ssh provenant d'une adresse IP - celle du sysadmin - pour plus de s√©curit√©.</p><pre class="language-bash line-numbers"><code>

sudo ufw allow proto tcp from 202.54.2.5 to 172.24.13.45 port 22


</code></pre><p>avec <em>202.54.2.5</em> l'IP du sysadmin et <em>172.24.13.45</em> l'IP du serveur.</p><p><strong>Activer le pare-feu</strong></p><p>Il faut executer la commande :</p><pre class="language-bash line-numbers"><code>

sudo ufw enable


</code></pre><p>pour le d√©sactiver, il faut ex√©cuter :</p><pre class="language-bash line-numbers"><code>

sudo ufw disable


</code></pre><h3 id="h3-3">Utiliser cette configuration</h3><p><strong>Maintenant qu'on a mis en place le pare-feu, qu'est ce qu'on acc√©der depuis l'ext√©rieur ?</strong></p><p>Refaisons un scan des ports du serveur (avec <em>nmap</em>) :</p><pre class="language-bash line-numbers"><code>

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0)


</code></pre><p>Heureusement, on a encore acc√®s √† SSH, et √† priori, on n'a plus acc√®s au site internet.</p><p>On peut v√©rifier en essayant : <a href="http://192.168.56.101:8080">http://192.168.56.101:8080</a></p><p>-&gt; on obtient une erreur, donc tout est bon, bravo, notre site n'est plus accessible depuis l'ext√©rieur</p><p><strong>Comment faire en sorte de quand m√™me se connecter √† distance au serveur, si on a des droits d'acc√®s (pour se connecter en SSH)</strong></p><p>Dans un contexte d'entreprise, on veut pas que notre serveur ne soit pas accessible par tous le monde, mais on aimerait que nos employ√©s puissent y avoir acc√®s √† distance.</p><p>Il n'est pas possible d'acc√©der directement √† la page web, car le port est ferm√©. Donc la seule option pour y acc√©der c'est une connexion SSH. √áa tombe bien, SSH c'est une technologie s√©curis√©, qui n√©cessite une authentification. On peut donner l'acc√®s que √† certains personnes, notamment les employ√©s.</p><p>On va cr√©er un tunnel SSH entre le serveur distant et la machine de l'employ√©, et on va demander de rediriger le port de la machine distante sur la machine locale :</p><pre class="language-bash line-numbers"><code>

ssh -L 8080:localhost:8080 username@server


</code></pre><p>Le param√®tre -L permet la redirection de ports.</p><p>Maintenant, il est possible d'acc√©der √† la page web, non pas avec : <a href="http://192.168.56.101:8080">http://192.168.56.101:8080</a> mais avec <a href="http://localhost:8080">http://localhost:8080</a></p><h2 id="h4">Packet Tracer</h2><p>Pour ceux qui ont suivit le cours de R√©seau, au temps 2, vous pouvez aussi essayer les pare-feu gr√¢ce √† Packet Tracer.</p><p>Il est seulement possible de mettre en place un pare-feu pour les appareils d'extr√©mit√© de r√©seau, comme les ordinateurs et serveurs, mais il n'est pas possible de le faire pour une box.</p><p>Dans la partie <em>Desktop</em> de l'appareil, il y a une application, pour ajouter des r√®gles de pare-feu pour les IPv4 et IPv6</p><div style="display:flex;align-items:center"><div style="width:50%;display:flex;flex-direction:column;align-items:center"><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Durand-Jean-Baptiste/mon/temps-2.2/PacketTracerDesktop.png" style="border:0"></div><div style="width:50%;display:flex;flex-direction:column;align-items:center"><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Durand-Jean-Baptiste/mon/temps-2.2/PacketTracerFireWall.png" style="border:0"></div></div><p>Attention, dans la configuration du pare-feu, est demand√© le <a href="https://en.wikipedia.org/wiki/Wildcard_mask">Wildcard mask</a>, qui est diff√©rent du subnet mask. L'id√©e du masque est la m√™me mais, on a la relation : <strong>Subnet Mask = <em>NOT</em> Wildcard Mask</strong> :</p><p>par exemple,</p><p><em>subnet mask/27 = 255.255.255.224 = 11111111.11111111.11111111.11100000 = NOT 00000000.00000000.00000000.00011111 = NOT 0.0.0.31 = NOT Wildcard Mask</em></p><h2 id="liens">Liens Utiles</h2><p><a href="https://us.123rf.com/450wm/zdeneksasek/zdeneksasek1803/zdeneksasek180300074/96723555-cartoon-stick-man-dessin-illustration-conceptuelle-d-homme-d-affaires-travaillant-en-toute-s%C3%A9curit%C3%A9-.jpg?ver=6">Image</a></p><p>Documentation sur les pare-feu sur les diff√©rents OS:</p><ul><li><a href="https://support.microsoft.com/en-us/windows/turn-microsoft-defender-firewall-on-or-off-ec0844f7-aebd-0583-67fe-601ecf5d774f#ID0EFD=Windows_11">Windows</a></li><li><a href="https://support.apple.com/guide/mac-help/block-connections-to-your-mac-with-a-firewall-mh34041/mac">MacOS</a></li><li><a href="https://www.cyberciti.biz/faq/how-to-configure-firewall-with-ufw-on-ubuntu-20-04-lts/">Ubuntu - UFW</a></li></ul><p><a href="https://www.geeksforgeeks.org/basic-firewall-configuration-in-cisco-packet-tracer/">Packet Tracer Firewall</a></p><p><a href="https://en.wikipedia.org/wiki/Wildcard_mask">Wildcard mask</a></p></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>