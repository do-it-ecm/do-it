<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bilgi-Tuncay/pok/temps-2/"><meta name="description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta property="og:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="twitter:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="author" content="Tuncay Bilgi"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, POK, Linux, ssh, deploy, bash"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="Artblog D√©ploiement"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bilgi-Tuncay/pok/temps-2/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="Artblog D√©ploiement"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bilgi-Tuncay/pok/temps-2/"><title>Artblog D√©ploiement</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">Artblog D√©ploiement</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tags :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">POK</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">Linux</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">ssh</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">deploy</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">bash</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">POK</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Tuncay Bilgi</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2022-2023</span></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2022-2023/Bilgi-Tuncay/">Tuncay Bilgi</a><span class="px-1">/</span><a href="/promos/2022-2023/Bilgi-Tuncay/pok/">POK de Tuncay</a><span class="px-1">/</span><a href="/promos/2022-2023/Bilgi-Tuncay/pok/temps-2/">Artblog D√©ploiement</a></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Pr√©requis</b></p></div><div class="pl-8 mr-8"><ul><li>Connaissance de commandes UNIX : ssh,scp,ls,cat,touch etc...</li><li>Acc√®s ssh au serveur ovh1</li><li>Avoir un projet √† d√©ployer</li></ul><p>Dans le second sprint, on utilise des scripts bash qui n√©cessite une compr√©hension du shell assez compl√®te.</p></div></div><h1 id="d%C3%A9ploiement-sur-un-site-distant." tabindex="-1"><a class="header-anchor" href="#d%C3%A9ploiement-sur-un-site-distant."></a> D√©ploiement sur un site distant.</h1><p>Le but du POK est d'appr√©hender le d√©ploiement de projets sur un serveur. Ici, je vais sp√©cifiquement d√©ployer le site d√©velopp√© pendant le POK1 : Artblog, qui est un blog en Javascript, plus pr√©cis√©ment, il utilise Next.js et la base de donn√©es est h√©berg√©e par un service cloud.</p><h3 id="remarque-%3A" tabindex="-1"><a class="header-anchor" href="#remarque-%3A"></a> Remarque :</h3><p>Mon back √©tant h√©berg√© sur un HeadlessCMS il n'y a pas besoin de d√©ployer la BDD, je vais donc potentiellement cr√©er un mini projet qui contient une BDD classique juste pour me frotter au d√©ploiement complet d'une application.</p><h2 id="objectifs-finaux-%3A" tabindex="-1"><a class="header-anchor" href="#objectifs-finaux-%3A"></a> Objectifs finaux :</h2><ul><li>Pouvoir acceder √† mon site sur ovh1.</li><li>Faire en sorte que le contenu se mette √† jour sans n√©cessiter de red√©ploiement.</li></ul><h1 id="gestion-de-projet-%3A" tabindex="-1"><a class="header-anchor" href="#gestion-de-projet-%3A"></a> Gestion de Projet :</h1><p>Organisation en deux sprints s√©par√©s par le point POK.</p><h2 id="taches-premier-sprint-%3A" tabindex="-1"><a class="header-anchor" href="#taches-premier-sprint-%3A"></a> Taches Premier sprint :</h2><ul><li>Explorer le serveur ovh1 pour voir comment marche le d√©ploiement</li><li>Corriger les bugs majeurs du Artblog</li><li>Build une version du Artblog</li><li>Deployer Artblog sur ovh1</li></ul><h2 id="backlog-%3A" tabindex="-1"><a class="header-anchor" href="#backlog-%3A"></a> Backlog :</h2><ul><li>Mettre en place une fen√™tre permanente.</li><li>Bonus : Mettre en place une base de donn√©es</li><li>Bonus : mettre en place une automatisation avec Jenkins.</li></ul><h1 id="premier-sprint%3A" tabindex="-1"><a class="header-anchor" href="#premier-sprint%3A"></a> Premier sprint:</h1><h2 id="premiers-pas" tabindex="-1"><a class="header-anchor" href="#premiers-pas"></a> Premiers pas</h2><p>Le serveur est organis√©e de la m√™me mani√®re pour chaque compte. Mon compte est curcuma donc je prend cela pour exemple et je me concentre sur la partie node puisque le projet que je veut mettre en place est bas√© sur node.js :</p><p>_ Home |_Curcuma |_Django |_Flask |_java |_node |<em>example.js |</em> readme.txt</p><p>Le <strong>readme</strong> contient les addresses √† questionner selon le port que l'on veut atteindre. Dans notre cas, on vois dans le fichier <code>example.js</code> que l'on utilise le port 10438 et que pour communiquer √† travers ce port, on doit envoyer nos requ√™tes √† <code>node.curcuma.ovh1.ec-m.fr</code>.</p><p>Avec la commande <code>node example.js</code> on lance le programme et on met donc en place notre serveur. Sur un navigateur, <a href="http://node.curcuma.ovh1.ec-m.fr">node.curcuma.ovh1.ec-m.fr</a> nous renvoie <code>Hello World</code>.</p><h2 id="mise-en-production-du-artblog-%3A" tabindex="-1"><a class="header-anchor" href="#mise-en-production-du-artblog-%3A"></a> Mise en production du Artblog :</h2><h3 id="mise-en-place-du-projet-sur-ovh1-%3A" tabindex="-1"><a class="header-anchor" href="#mise-en-place-du-projet-sur-ovh1-%3A"></a> Mise en place du projet sur ovh1 :</h3><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Attention</b></p></div><div class="pl-8 mr-8"><p>Ce n'est pas une mani√®re propre de faire sur un serveur de production car on copie tous le repo dans le serveur alors qu'il n'a besoin que de la branche main. Dans un chapitre suivant on recommence plus proprement.</p></div></div><p>Gr√¢ce √† github, on va cloner le projet dans le dossier node.</p><p>Sur ovh1,on v√©rifie qu'il y a git :</p><p>git --version</p><p>On clone ensuite notre projet dans le dossier node. Puisque le projet est publique, il n'y a rien de sp√©ciale √† faire, sous les conseils de Joe, on utilise directement le lien https. Puisque l'on √† jamais utilis√© git avec des commande et que nous somme par cons√©quent un peu nul, on lis la documentation avec <code>git --help</code> et on trouve ce qui nous int√©resse <code>git clone</code> et <code>git help clone</code> pour toujours plus de documentation.</p><p>On clone :</p><p>git clone <a href="https://github.com/TuncayBilgi/artblog.git">https://github.com/TuncayBilgi/artblog.git</a></p><p>Cela cr√©er un dossier Artblog avec tous les fichiers n√©cessaires dedans, sauf certains que je n'ai pas mis dans le git comme mes fichiers d'environnement qui poss√®dent les cl√©s d'API.</p><p>Ensuite, on ex√©cute les commandes n√©cessaires √† installer le reste des fichiers :</p><p>npm install</p><p>Je copie-colle mon fichier d'environment :</p><p>scp ./.env <a href="mailto:curcuma@ovh1.ec-m.fr">curcuma@ovh1.ec-m.fr</a>/node</p><h3 id="test-de-la-mise-en-production-sur-mon-ordinateur-%3A" tabindex="-1"><a class="header-anchor" href="#test-de-la-mise-en-production-sur-mon-ordinateur-%3A"></a> Test de la mise en production sur mon ordinateur :</h3><p>Avec Next.js, certaines commandes servent √† la mise en production :</p><p>npm run dev // Lance le projet en mode d√©veloppement en local npm run build // build le projet npm run start -p PORT //lance le serveur de production sur le port indiqu√©</p><p>On lance le build, apr√®s un certain temps il semble que tout marche, on peut alors essayer de lancer l'application sur un port diff√©rent que le port par d√©faut (3000) car on aura besoin de le faire sur ovh1.</p><h3 id="changement-de-port-%3A" tabindex="-1"><a class="header-anchor" href="#changement-de-port-%3A"></a> Changement de port :</h3><p>Le serveur ovh1 nous octroie un port bien pr√©cis pour y mettre notre application. On ne peut donc pas lancer le programme sur n'importe quel port et s√ªrement pas le port par d√©faut. Pour le changer, cela d√©pend de la technologie utilis√©e. Avec un serveur node tout simple, il suffit de modifier le port dans le fichier js qui lance le processus. Pour nous, d'apr√®s la documentation, nous devon modifier la commande <code>npm run start</code>. Cela ce fait dans le fichier package.json o√π l'on rentre :</p><p>&quot;start&quot;: &quot;next start -p 8080&quot;</p><p>Ce qui devrait lancer l'application sur le port 8080.</p><p>Pour lancer sur un autre port, on va d'abord v√©rifier qu'il est libre. Par exemple, on active le port 3000 avec <code>npm run start</code> et en lan√ßant cette commande dans le Powershell : <code>Get-NetTCPConnection | where Localport -eq 3000 | select Localport,OwningProcess</code>, on voit qu'un processus √©coute le port 3000. Si le port n'est pas √©cout√©, rien ne s'affiche.</p><p>On v√©rifie que le port 8080 est libre puis on lance l'application sur ce port.</p><p>npm run start Get-NetTCPConnection | where Localport -eq 8080 | select Localport,OwningProcess</p><p>La derni√®re commande renvoie :</p><p>Localport OwningProcess</p><hr><p>8080 17516</p><p>C'est prometteur. On passe sur le port 10438 qui sera utilis√© sur ovh1.</p><h3 id="faire-du-git-proprement%3A" tabindex="-1"><a class="header-anchor" href="#faire-du-git-proprement%3A"></a> Faire du git proprement:</h3><p>Comme pr√©cis√© pr√©c√©demment, on a copi√© l‚Äôenti√®ret√© du repo dans le serveur de production. On oublie et on refait. On commence par supprimer l'ancien dossier. Je ne sais pas si il y a une bonne mani√®re de le faire et je n'ai pas regard√©. Ici, je supprime le dossier et tout ce qu'il y avait dedans, ce qui peut √™tre dangereux.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Attention</b></p></div><div class="pl-8 mr-8"><p>Si vous aviez des fichiers importants, tout va sauter, v√©rifiez 2 fois avant de lancer des commandes qui commencent par rm -r</p></div></div><p>// Dans ovh1 [...]/node rm -r artblog/</p><p>Ensuite, on pull proprement le projet :</p><p>git init git remote add origin <a href="https://github.com/TuncayBilgi/artblog.git">https://github.com/TuncayBilgi/artblog.git</a> git pull origin main</p><p>Ici, seul la branche main est clon√©e sur le serveur. Il suffit de replacer le fichier .env et on peut potentiellement tester le site. Pou mettre le repo √† jour sur le serveur il suffit de :</p><p>git fetch origin main git reset --hard origin/main git clean -fdx // attention cela surprime tous les fichiers non pr√©sent dans la branche, notamment le fichier .env si il existe, cette commande est optionnelle</p><p>Ou plus simplement :</p><p>git pull origin master</p><h3 id="letsgo-on-test-enfin-%3A" tabindex="-1"><a class="header-anchor" href="#letsgo-on-test-enfin-%3A"></a> Letsgo on test enfin :</h3><p>Tous les pr√©paratifs sont faits, il ne reste qu'√† build l'application sur le serveur, puis la lancer :</p><p>npm run build npm run start</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Attention</b></p></div><div class="pl-8 mr-8"><p>Ne lancez pas d'applications en mode dev sur le serveur de production, et de mani√®re g√©n√©rale, faites attention aux ports que vous allez utiliser.</p></div></div><p>L'application est disponible sur internet √† l'adresse <code>node.curcuma.ovh1.ec-m.fr</code> et tout marche correctement.</p><p>Probl√®me, quand on ferme le terminale, l'application s'arr√™te.</p><h3 id="lancer-l'application-de-fa%C3%A7on-permanente-%3A" tabindex="-1"><a class="header-anchor" href="#lancer-l'application-de-fa%C3%A7on-permanente-%3A"></a> Lancer l'application de fa√ßon permanente :</h3><p>En effet, exit le terminal tue tous les processus sur ovh1 qui ont √©t√© lanc√©s depuis notre propre terminale. Ce n'est pas ce qu'on veut car √ßa signifie qu'on ne peut pas √©teindre notre ordinateur sans que √ßa coupe l'application.</p><p>Il faut donc cr√©er un terminale sur le serveur ovh1 qui ne s'√©teigne pas quand on √©teint celui de notre ordinateur. Sous les conseils de M.Brucker, on utilise simplement la commande screen qui permet de lancer des terminaux et des processus en t√¢che de fond.</p><p>screen -S artblog // Nous emm√®ne dans un nouveau terminale. npm run start // on tape Ctrl-A + D pour quitter le terminale</p><p>Et voila l'application tourne de fa√ßon permanente sur ovh1.</p><h2 id="bilan-premier-sprint-%3A" tabindex="-1"><a class="header-anchor" href="#bilan-premier-sprint-%3A"></a> Bilan premier sprint :</h2><p>J'ai r√©alis√© le travail que j'avais pr√©vu de faire car j'ai eu la chance de ne rencontrer aucun probl√®me. J'ai cependant √©t√© un peu l√©ger sur la correction de bugs du site mais √ßa n'√©tait pas la priorit√© et j'ai amplement le temps durant le second sprint.</p><h3 id="pour-le-second-sprint-%3A" tabindex="-1"><a class="header-anchor" href="#pour-le-second-sprint-%3A"></a> Pour le second sprint :</h3><p>Je compte mettre de vrais articles sur le artblog pour que le site soit int√©ressant √† visiter. De plus, je vais tenter de mettre en place une automatisation CI/CD qui permet de pull la derni√®re version stable sur ovh1 puis de build automatiquement.</p><h1 id="second-sprint-%3A" tabindex="-1"><a class="header-anchor" href="#second-sprint-%3A"></a> Second Sprint :</h1><p>On va se faciliter la vie en √©crivant un script qui va mettre √† jour, sur ovh1, le site, en allant chercher la derni√®re version de artblog et en l'activant, ensuite on pourra lancer ce script depuis un pc distant via ssh. Dans cette partie, on utilise git en ligne de commande.</p><h2 id="git-cli-%3A" tabindex="-1"><a class="header-anchor" href="#git-cli-%3A"></a> Git CLI :</h2><p>On commence par mettre √† jour notre projet :</p><p>git add . // on ajoute les changements au commit git commit // on commit les changements git push // on les envoies √† l'origine git checkout main // on va sur la branche main git merge dev // on y fusionne la banche dev</p><h2 id="cr%C3%A9ation-du-script-%3A" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-du-script-%3A"></a> Cr√©ation du script :</h2><p>La premi√®re version sera toute basique, on y inclut ces quelques commandes pour tester :</p><p>#!/bin/sh</p><p>cd /home/curcuma/node/artblog</p><p>git pull origin main npm install npm run build npm run start</p><p>echo &quot;Prod successfully started&quot;</p><p>A ce stade, le script va chercher la derni√®re version du artblog sur github, installe les d√©pendances du projet, le build et lance le serveur sur mon port.</p><p>Ce script a de nombreux probl√®mes :</p><ul><li>Il echo &quot;Prod etc..&quot; peu importe de l'√©tat d‚Äôex√©cution.</li><li>Il ne sauvegarde pas les erreurs.</li><li>Il n'y a aucun test d'effectu√©.</li><li>Il lance le serveur de prod dans un terminal local, on va le d√©tacher avec screen (puis tmux).</li><li>On ne peut que lancer tout le script d'un coup, le script n'est pas optimal si il faut juste red√©marrer le serveur.</li><li>Il n'est pas possible de voir simplement comment ce que fait le script.</li></ul><h2 id="envoie-du-script-%3A" tabindex="-1"><a class="header-anchor" href="#envoie-du-script-%3A"></a> Envoie du script :</h2><p>On copy ce script sur le serveur avec scp :</p><p>scp /chemin/local/publish.sh utilisteur@serveur:/chemin/distant</p><p>Cette commande doit √™tre lanc√©e √† chaque modifications.</p><h2 id="on-essaie-maintenant-d'executer-le-script-via-ssh-%3A" tabindex="-1"><a class="header-anchor" href="#on-essaie-maintenant-d'executer-le-script-via-ssh-%3A"></a> On essaie maintenant d'executer le script via ssh :</h2><p>ssh nom_d_utilisateur@nom_du_serveur &quot;bash /chemin/distant/publish.sh&quot;</p><p>On a un echo : prod succelfully started, √ßa s'annonce bien. Quelques erreurs de script plus tard, j'ai une version qui fait ce que je demande. On essaie maintenant d'am√©liorer le syst√®me point par point.</p><h2 id="creation-d'un-script-pour-lancer-le-script-%3A" tabindex="-1"><a class="header-anchor" href="#creation-d'un-script-pour-lancer-le-script-%3A"></a> Creation d'un script pour lancer le script :</h2><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Information</b></p></div><div class="pl-8 mr-8"><p>A ce stade, je ne pense pas que √ßa soit une bonne id√©e d'essayer de tout lancer sans voir ce qu'il se passe</p></div></div><p>Pas forc√©ment utile mais un tout petit script permettrais de mettre √† jour le script serveur puis de le lancer dans la foul√©e. Je ne le fais pas car je pr√©f√®re voir si il y a des erreurs, mais il ressemblerait tout simplement √† cela :</p><p>Prepare_prod :</p><p>scp <a href="http://publish.sh">publish.sh</a> [...] ssh [...] /publish.sh</p><h2 id="d%C3%A9tachement-du-server-dans-un-terminal-en-daemon-%3A" tabindex="-1"><a class="header-anchor" href="#d%C3%A9tachement-du-server-dans-un-terminal-en-daemon-%3A"></a> D√©tachement du server dans un terminal en daemon :</h2><p>on modifie le script :</p><p>screen -S artblog -dmS npm run start</p><p>Cette commande devrait lancer le serveur dans un processus deamon nomm√© artblog, qui sera toujours en route quand je rompt la liaison ssh.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Attention</b></p></div><div class="pl-8 mr-8"><p>Probl√®me : la commande screen -list ne r√©f√©rence pas le processus, je ne peux plus arr√™ter mon serveur. C'est emb√™tant car impossible de lancer une nouvelle version du serveur si le port est d√©j√† utilis√©.</p></div></div><h3 id="debug-mode-%3A" tabindex="-1"><a class="header-anchor" href="#debug-mode-%3A"></a> Debug mode :</h3><p>On essaie de trouver le probl√®me, pour commencer, le serveur est bien disponible sur node.curcuma.ovh1, ce qui veut dire que le screen √† bien fonctionn√©.</p><p>On trouve le processus qui √©coute sur mon port 10438 avec :</p><p>ps -ef | grep artblog | awk '{print $2}' // cette commande liste les processus, ne garde que ceux qui s‚Äôappellent artblog et print l'id du process. on re√ßoit 304108</p><p>On kill le processus:</p><p>kill 34108</p><p>Cela √† march√©.</p><p>On l'inclut dans le script : d'abord on kill l'ancien process, ensuite on pourra en recr√©er un :</p><p>ps -ef | grep artblog |head -n -1 | awk '{print $2}' | xargs kill -15</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Information</b></p></div><div class="pl-8 mr-8"><p>La commande se complique :</p><ul><li>ps -ef : d'abord je r√©cup√®re les processus</li><li>grep artblog : je prend ceux qui contiennent le mot artblog</li><li>head -n -1 | : je garde tous sauf la derni√®re ligne, en effet la derni√®re ligne est la commande grep elle m√™me et renvoie une erreur par la suite</li><li>awk : je ne print que la deuxi√®me colonne qui correspond au PID</li><li>kill : je kill tous les process list√©s par le print awk.</li></ul></div></div><h3 id="retour-au-script-%3A" tabindex="-1"><a class="header-anchor" href="#retour-au-script-%3A"></a> Retour au script :</h3><p>Le script devient :</p><pre class="language-bash line-numbers"><code>

#!/bin/sh

    cd /home/curcuma/node/artblog

    git pull origin main
    npm install
    npm run build

    ps -ef | grep artblog | awk '{print $2}' | xargs kill -15
    screen -S artblog -dmS npm run start

    echo "Script ended"


</code></pre><p>On l‚Äôenvoie et on test.</p><h2 id="s%C3%A9parer-le-build-du-projet-du-lancement-du-serveur-%3A" tabindex="-1"><a class="header-anchor" href="#s%C3%A9parer-le-build-du-projet-du-lancement-du-serveur-%3A"></a> S√©parer le build du projet du lancement du serveur :</h2><p>On cr√©e des options qui permettent ou non de build le serveur.</p><p>On cr√©e l'option -h qui affiche de l'aide et -b qui lance le build. Par d√©faut, on lance un screen.</p><pre class="language-bash line-numbers"><code>


#!/bin/sh

function Build() {
  echo "Pulling from origin..."
  git pull origin main
  echo "Installing dependancies..."
  npm install
  echo "Building ..."
  npm run build
  
}


while getopts ":hb" opt; do
  case $opt in
    h)
      echo "This is the help section of the script test.sh"
      echo "Available options are:"
      echo "-h : display this help section"
      echo "-b : run the Build function"
      exit 0
      ;;
    b)
      Build
      exit 0
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
  esac
done

cd /home/curcuma/node/artblog

ps -ef | grep artblog | head -n -1 | awk '{print $2}' | xargs kill -15
screen -S artblog -dmS npm run start

echo "Script ended"



</code></pre><p>Mais √† cause de je ne sais quoi le screen ne marche pas a travers ssh. On essaie la m√™me chose en utilisant tmux au lieu de screen.</p><p>On remplace les lignes li√©es a screen part</p><pre class="language-bash line-numbers"><code>

tmux kill-session -t artblogDeamon
tmux new-session -d -s artblogDeamon "npm run start"



</code></pre><p>Et cela fonctionne !</p><p>On peut maintenant lancer <a href="http://publish.sh">publish.sh</a> en ssh pour</p><ul><li>afficher l'aide gr√¢ce √† -h</li><li>pull la version la plus r√©cente sur git et build le projet gr√¢ce √† -b</li><li>et publier le serveur.</li></ul><p>Tout cela avec par exemple <code>ssh curcuma@ovh1.ec-m.fr &quot;bash ./node/artblog/publish.sh -h&quot;</code></p><h2 id="r%C3%A9cup%C3%A9rtions-des-erreurs-%3A" tabindex="-1"><a class="header-anchor" href="#r%C3%A9cup%C3%A9rtions-des-erreurs-%3A"></a> R√©cup√©rtions des erreurs :</h2><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Pr√©requis</b></p></div><div class="pl-8 mr-8"><p>On part sur du Bash un peu plus pouss√© que juste des echo et des commandes git.</p></div></div><p>Pour √™tre un peu s√©rieux, on ajoute au script une fonction qui r√©cup√®re les erreurs √† chaque commande lanc√©e. Ces erreurs seront cas√©es dans un fichier de log. On formate les erreurs pour qu'elles affichent la date, la commande lanc√©e avec ses options, et ensuite on print l'erreur.</p><p>Pour cela, on utilise des sp√©cificit√©s bien pratique de bash comme les stderr, le pipe, les $?, les variables d‚Äôenvironnements etc...</p><pre class="language-bash line-numbers"><code>

Error_Handler() {
   command=$1   # 1)
   log_file=$PWD/error.log # 2)
   stderr=$($command 2>&1 >/dev/null) # 3)
   if [ $? -ne 0 ]; then # 4)
       echo "Error: $(date +%F_%R) $command " >> $log_file
       echo "      $stderr" >> $log_file
       echo "$stderr" # 5)
   fi
 }


</code></pre><p>La fonction est compliqu√©e et on y arrive apr√®s plusieurs it√©rations.</p><p>Explication d√©taill√©e :</p><ul><li><ol><li>On prend une commande en param√®tre</li></ol></li><li><ol start="2"><li>on choisi le fichier error.log dans lequel on va placer nos log d'erreurs</li></ol></li><li><ol start="3"><li>on cr√©er une variable stderr qui contient l'erreur standard de la commande. Pour cela, on lance la commande et on redirige l'erreur dans le stdout et on envoi ce stdout dans /dev/null pour qu'il ne soit pas affich√© dans le terminal</li></ol></li><li><ol start="4"><li>Si la commande √† termin√© avec un exit code != 0, on sait qu'il y a une erreur, on va donc former un message d'erreur √† mettre dans le fichier log</li></ol></li><li><ol start="5"><li>Ce message d'erreur contient 2 lignes, une avec la date format√©e et la commande, l'autre avec la stderr r√©cup√©r√©e plut√¥t. Enfin, on echo dans le terminal utilis√© la stderr pour avoir l'erreur sans aller fouill√© le fichier de logs</li></ol></li></ul><p>On peut maintenant 'wrapper' toutes nos fonctions avec cette Error_Handler pour que toutes les commandes me donnent des logs en cas d'erreur.</p><h3 id="probl%C3%A8me-de-wrap-%3A" tabindex="-1"><a class="header-anchor" href="#probl%C3%A8me-de-wrap-%3A"></a> Probl√®me de wrap :</h3><p>La commande du tmux agit mal quand elle est plac√©e dans Error_Handler. Je suspecte que √ßa √† un lien avec le fait qu'il y ait 3 fonctions imbriqu√©s. Je recopie juste la fonction Error_handler directement autour du tmux. Cela √† l'avantage de marcher, mais l'inconv√©nient de baisser la qualit√©e de mon code. En effet il y a de la recopie et si je veux modifier le nom du fichier de logs par exemple, je dois le faire 2 fois maintenant.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100 dark:border-red-800 dark:bg-red-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-red-500 dark:stroke-red-800 stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Attention</b></p></div><div class="pl-8 mr-8"><p>Avec ce genre de fonction, et surtout en bash, il faut faire attention. $command d√©signe la variable alors que $($command) l‚Äôex√©cute. La syntax est crucial, surtout dans ce genre de script ou il est crucial de ne lancer la commande qu'une fois, et non pas plusieurs. Ici, le script lance la commande une unique fois, c'est ce qu'on veut.</p></div></div><p>De plus, on conditionne le tmux-kill pour qu'il ne se lance que si il n'y a pas de session artblog d√©j√† pr√©sente. Cela permet de ne lancer la commande que si n√©cessaire puis √ßa permet d'√©viter d'ajouter des logs inutiles dans error.log √† chaque fois que la fonction est ex√©cut√©e.</p><p>le script devient :</p><pre class="language-bash line-numbers"><code>

#!/bin/sh

function Error_Handler() {
   command=$1
   log_file=$PWD/error.log
   stderr=$($command 2>&1 >/dev/null)
   if [ $? -ne 0 ]; then
       echo "Error: $(date +%F_%R) $command" >> $log_file
       echo "    $stderr" >> $log_file
       echo "$stderr"
   fi
}


function Build() {
 echo "Pulling from origin..."
 Error_Handler "git pull origin main"
 echo "Installing dependancies..."
 Error_Handler "npm install"
 echo "Building ..."
 Error_Handler "npm run build"
 
}


while getopts ":hb" opt; do
 case $opt in
   h)
     echo "This is the help section of the script test.sh"
     echo "Available options are:"
     echo "-h : display this help section"
     echo "-b : pull the main branch of the project, build the project and publish it on internet"
     echo "no options will only publish the project"
     exit 0
     ;;
   b)
     Build
     ;;
   \?)
     echo "Invalid option: -$OPTARG" >&2
     exit 1
     ;;
 esac
done

cd /home/curcuma/node/artblog


session_status=$(tmux list-sessions | grep artblogDeamon)
if [[ $session_status =~ "artblogDeamon" ]]; then
 Error_Handler "tmux kill-session -t artblogDeamon"
fi

stderrTmux=$(tmux new-session -d -s artblogDeamon "npm run start" 2>&1 >/dev/null)
if [ $? -ne 0 ]; then
       echo "Error: $(date +%F_%R) tmux new-session -d -s artblogDeamon \"npm run start\" " >> $PWD/error.log
       echo "    $stderrTmux" >> $PWD/error.log
       echo "$stderrTmux"
   fi



echo "Script succesfuly ended"
exit 0



</code></pre><p>Le script fonctionne come voulue, voici un exemple de logs que l'on r√©cup√®re si il y a des erreurs :</p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bilgi-Tuncay/pok/temps-2/error1.png" alt="error log" style="height:200px;margin:0 auto;border:0"><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Information</b></p></div><div class="pl-8 mr-8"><p>Pour aller plus loin, on peut automatiser le lancement de se script, suivant certaines conditions, avec Jenkins par exemple, comme dans <a href="../../../../mon/TBi/MON/Jenkins">ce MON</a></p></div></div><h2 id="bilan-second-sprint-%3A" tabindex="-1"><a class="header-anchor" href="#bilan-second-sprint-%3A"></a> Bilan second sprint :</h2><p>Je suis partie dans une direction diff√©rente que pr√©vu. Dans une d√©marche DevOps, la mise en production est un 'non √©v√©nement', c'est √† dire qu'il doit se faire facilement, rapidement, et aussi souvent que n√©cessaire. Gr√¢ce √† ce petit script, on se rapproche de cette d√©marche. Je n'ai cependant pas eu le temps de remplir mon site de vrai articles.</p></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>