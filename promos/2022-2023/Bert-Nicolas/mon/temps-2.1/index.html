<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bert-Nicolas/mon/temps-2.1/"><meta name="description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta property="og:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="twitter:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="author" content="Nicolas BERT"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, MON"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="Les architectures microservices"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bert-Nicolas/mon/temps-2.1/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="Les architectures microservices"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Bert-Nicolas/mon/temps-2.1/"><title>Les architectures microservices</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">Les architectures microservices</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tag :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">MON</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">MON</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Nicolas BERT</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2022-2023</span></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2022-2023/Bert-Nicolas/">Nicolas BERT</a><span class="px-1">/</span><a href="/promos/2022-2023/Bert-Nicolas/mon/">MONs</a><span class="px-1">/</span><a href="/promos/2022-2023/Bert-Nicolas/mon/temps-2.1/">Les architectures microservices</a></div></div><p>Introduction au concept de microservices en informatique</p><p>Dans ce MON, nous allons discuter du principe de microservices et plus particuli√®rement de son utilisation en informatique.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p><strong>Pr√©requis :</strong></p></div><div class="pl-8 mr-8"><ul><li>Conna√Ætre le contexte de d√©veloppement full-stack (frontend, backend, API ...)</li><li>Niveau interm√©diaire</li></ul></div></div><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"></a> Introduction</h2><p>Quand on pense aux microservices, on pense premi√®rement √† plein de petites structures bien organis√©es qui sont chacune responsable d'une fonctionnalit√© et destin√©e √† fonctionner ensemble.</p><p>Cette organisation de &quot;d√©l√©gation&quot; et de &quot;r√©partition&quot; du travail n'est clairement pas anodine. On retrouve cette m√©thode de d√©coupage √† de nombreux niveaux. Par exemple, le gouvernement fran√ßais est d√©coup√© en minist√®re et chaque minist√®re va s'occuper d'un domaine particulier (sant√©, justice, √©ducation, travail, int√©rieur ...) tout en fonctionnant les uns avec les autres. De m√™me, lorsque l'on travail en √©quipe projet √† Centrale chacun se r√©partit le travail et s'occupe d'une partie du projet tout en restant avertit du travail des autres. L'id√©e de cette r√©partition des t√¢ches est de gagner en efficacit√©, clart√©, organisation et performance. Ce concept se d√©mocratise beaucoup et est devenu tr√®s populaire dans les projets IT.</p><h2 id="qu'est-ce-qu'une-architecture-microservices-%3F" tabindex="-1"><a class="header-anchor" href="#qu'est-ce-qu'une-architecture-microservices-%3F"></a> Qu'est-ce qu'une architecture microservices ?</h2><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Information</b></p></div><div class="pl-8 mr-8"><p>Le terme <strong>microservices</strong> est apparu en 2011 au cours d'ateliers d'architecture, bien qu'il r√©utilise un grand nombre de principes largement employ√©s par les syst√®mes d'information des grandes entreprises, notamment les concepts de l'architecture orient√©e service (SOA). Le sujet est r√©ellement √©voqu√© √† partir de 2014 selon Google Trends. Parmi les pionniers, on compte <strong>Netflix</strong> qui a oeuvr√© pour populariser ces architectures.</p></div></div><p>La philosophie de l'architecture en microservices s'inspire en grande partie de la <strong>philosophie UNIX</strong> qui pr√¥ne <strong>&quot;ne faire qu'une seule chose, et la faire bien&quot;</strong>. Il s'agit d'une m√©thode de d√©veloppement logiciel qui a pour but de <strong>d√©composer une application en fonctionnalit√©s cl√©s</strong>, chacune de ces fonctions est appel√©e &quot;<strong>service</strong>&quot;. Chaque service est cr√©√© pour r√©pondre √† un <strong>besoin m√©tier unique et pr√©cis</strong>. On peut citer par exemple : la gestion des utilisateurs, interface de paiement, envois de mails, s√©curit√©, recherche, envois de notifications ... Par ailleurs, chaque service est <strong>ind√©pendant</strong> et <strong>modulable</strong>, chacun peut fonctionner (ou dysfonctionner) sans affecter les autres. Les microservices ind√©pendants communiquent les uns avec les autres en utilisant des API (REST la plupart du temps) ind√©pendantes du langages de programmation. Cette cat√©gorie d'architecture s'oppose aux architectures monolithiques qui sont construites comment une seule entit√© qui s'occupe de tout.</p><div class="quote relative drop-shadow py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100 dark:border-amber-800 dark:bg-amber-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-amber-800 dark:stroke-amber-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Note</b></p></div><div class="pl-8 mr-8"><p>L'architecture en microservices permet aussi de restructurer les √©quipes de d√©veloppement et la communication entre les services pour mieux se pr√©parer aux in√©vitables pannes, mais aussi aux √©volutions futures et √† l'int√©gration de nouvelles fonctions.</p></div></div><p>Cette d√©finition et ce d√©coupage en service peut nous rappeler un type d'architecture assez similaire, <strong>l'architecture orient√©e services (SOA)</strong> qui est d√©j√† bien √©tablie.</p><h2 id="quelle-est-la-diff%C3%A9rence-entre-une-architecture-soa-et-une-architecture-microservices-%3F" tabindex="-1"><a class="header-anchor" href="#quelle-est-la-diff%C3%A9rence-entre-une-architecture-soa-et-une-architecture-microservices-%3F"></a> Quelle est la diff√©rence entre une architecture SOA et une architecture microservices ?</h2><p>Premi√®rement, les pr√©curseurs des microservices identifient l'architecture en microservices comme une extension du concept de SOA, la plupart des principes de conception des microservices √©taient d√©j√† disponibles dans le monde de la SOA. Certains disent que &quot;<em>l'architecture microservices est une SOA bien con√ßue</em>&quot;. Cependant, il y a tout de m√™me des diff√©rences entre ces deux types d'architectures :</p><ul><li><strong>La taille</strong> : En microservices, comme le nom le laisse penser, <strong>la taille des services est beaucoup plus faible</strong> que celle des services en SOA. Chaque service a une seule responsabilit√©, alors qu'avec la SOA, les services peuvent englober plusieurs fonctions m√©tiers.</li><li><strong>La r√©utilisation</strong> : La SOA pr√¥ne la r√©utilisation des composants sans se soucier du couplage et des interactions. En revanche en microservices, on essaie de minimiser la r√©utilisation du code puisque cela cr√©e des d√©pendances. On privil√©gie donc un <strong>couplage faible</strong> quitte √† dupliquer son code.</li><li><strong>La communication</strong> : En SOA, la communication se fait √† travers un &quot;entreprise service bus&quot; (ESB) de mani√®re synchrone et cela introduit un point de d√©faillance critique qui est aussi une source de latence. En comparaison, dans une architecture microservices, chaque service est ind√©pendant et par cons√©quent plus tol√©rant aux pannes. Cela peut √™tre mis en place par exemple en faisant en sorte que chaque service soit √† l'√©coute des modifications des autres services.</li><li><strong>La duplication des donn√©es</strong> : Un des objectifs de la SOA est de permettre √† l'application d'avoir acc√®s √† toutes les donn√©es de mani√®re synchrone et direct. En microservices, dans l'id√©al, chaque service a acc√®s seulement √† toutes les donn√©es dont il a besoin m√™me si cela implique de dupliquer les donn√©es et donc rajoute de la complexit√©.</li></ul><p>On peut sch√©matiser les diff√©rentes architectures de la mani√®re suivante :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bert-Nicolas/mon/temps-2.1/schema_comp_archi.png" alt="Architecture composition"></p><h2 id="quels-sont-les-avantages-et-inconv%C3%A9nients-d'une-architecture-en-microservices-%3F" tabindex="-1"><a class="header-anchor" href="#quels-sont-les-avantages-et-inconv%C3%A9nients-d'une-architecture-en-microservices-%3F"></a> Quels sont les avantages et inconv√©nients d'une architecture en microservices ?</h2><ul><li>‚úÖ <strong>D√©veloppement ind√©pendant</strong> : Le d√©coupage en service permet √† chaque √©quipe d'utiliser les technologies qu'ils pr√©f√®rent et qui conviennent √† la fonctionnalit√© g√©r√©e par le service et ne sont donc pas limit√©s aux technologies impos√©s en d√©but de projet.</li><li>‚úÖ <strong>D√©ploiement ind√©pendant</strong> : Chaque microservice est d√©ploy√© de mani√®re ind√©pendante. Un service peut-√™tre mis-√†-jour sans a voir √† red√©ployer l'application dans son enti√®ret√©, ce qui facilite donc la gestion des bugs et l'impl√©mentation de nouvelles fonctionnalit√©s. En opposition, dans une architecture monolithique, un bug peut mettre en p√©ril l'application enti√®re.</li><li>‚úÖ <strong>Scaling ind√©pendant</strong> : Chaque service √©tant ind√©pendant, il peut grandir et √©voluer de mani√®re ind√©pendante pour s'adapter aux besoin sans d√©pendre des autres. On optimise alors les co√ªts et le temps puisqu'il n'est pas n√©cessaire de faire √©voluer l'application enti√®re comme ce serait le cas avec une application monolithique.</li><li>‚úÖ <strong>√âquipes cibl√©es</strong> : Cette organisation permet de r√©partir les √©quipes par service et facilite donc beaucoup de choses. L'arriv√©e de nouveaux membres est facilit√©e et la phase de compr√©hension du projet est plus courte puisqu'il n'ya que le service √† comprendre.</li><li>‚úÖ <strong>Moins de code</strong> : Une application monolithique partage beaucoup de d√©pendances et l'ajout de fonctionnalit√©s n'est pas ais√©. En revanche, une architecture en microservices va s√©parer le code et minimiser les d√©pendances et ainsi faciliter le scaling.</li><li>‚úÖ <strong>Isolation des donn√©es</strong> : Dans une architecture microservices, chaque service a acc√®s de mani√®re priv√©e uniquement aux donn√©es dont il a besoin. Il est alors possible de mettre √† jour le sch√©ma de base de donn√©es sans impacter toutes l'application.</li><li>‚úÖ <strong>R√©silience</strong> : Avec une architecture microservices, on diminue grandement le nombre de d√©faillances critiques possibles. Lorsqu'un service tombe en panne, l'application enti√®re ne cesse pas de fonctionner comme c'est le cas avec le mod√®le monolithique, le risque est donc diminu√© et c'est √©galement vrai lors de l'ajout de nouvelles fonctionnalit√©s. Les erreurs sont isol√©es et par cons√©quent plus simple a corriger.</li><li>‚úÖ <strong>Avanc√©es technologiques</strong> : Le d√©coupage en service permet √† chaque service de suivre ind√©pendamment des autres les avanc√©es technologiques et de les appliquer sans affecter l'application dans son enti√®ret√©. Les architectures Cloud et la conteneurisation avec Docker notamment rendent la mise en place d'une architecture microservices beaucoup plus simple.</li></ul><hr><ul><li>‚ùå <strong>Complexit√©</strong> : M√™me si chaque service en lui-m√™me est assez simple, l'ensemble constitue un syst√®me distribu√© complexe.</li><li>‚ùå <strong>Tests</strong> : L'existence de nombreux services peut rendre plus difficile l'√©criture de tests s'il y a des d√©pendances entre les services.</li><li>‚ùå <strong>Int√©grit√© des donn√©es</strong> : Les microservices utilisent une architecture de base de donn√©es qui est distribu√©e (cloud) et l'int√©grit√© des donn√©es n'est pas forc√©ment assur√©e. Certaines fonctionnalit√©s vont par exemple avoir besoin de mettre √† jour plusieurs bases de donn√©es de plusieurs services, le tout doit √™tre coh√©rent et fonctionnel.</li><li>‚ùå <strong>Latence du r√©seau</strong> : Le fait d'avoir de nombreux services va se traduire par une importante communication entre les services. Une latence du r√©seau va ralentir les communications et ce ph√©nom√®ne est accentu√© par les possibles cha√Ænes de d√©pendances entre les services.</li></ul><h2 id="l'orchestration-et-la-chor%C3%A9graphie" tabindex="-1"><a class="header-anchor" href="#l'orchestration-et-la-chor%C3%A9graphie"></a> L'orchestration et la chor√©graphie</h2><p>Dans une architecture microservices, de nombreux services peuvent √™tre pr√©sents et certains ont besoin de communiquer entre eux pour s'√©changer des informations. Cette communication doit √™tre encadr√©e et elle peut se faire de deux fa√ßons : l'orchestration et la chor√©graphie.</p><h3 id="l'orchestration-%F0%9F%8E%BC" tabindex="-1"><a class="header-anchor" href="#l'orchestration-%F0%9F%8E%BC"></a> L'orchestration üéº</h3><p>La premi√®re id√©e qui nous vient pour faire communiquer des services entre eux est d'utiliser des API REST.</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bert-Nicolas/mon/temps-2.1/orch-1.png" alt="Orchestration 1"></p><p>Cette fa√ßon de faire est assez simple √† mettre en place mais le syst√®me devient rapidement complexe et fastidieux et maintenir puisque l'on cr√©e des d√©pendances entre les services. Pour √©viter cela, une meilleure fa√ßon est d'introduire une couche suppl√©mentaire avec un nouveau service que l'on appelle l'<strong>orchestrateur</strong> :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bert-Nicolas/mon/temps-2.1/images/orch-2.png" alt="Orchestration 2"></p><p>L'orchestrateur est le seul service qui a connaissance de tous les autres. Ainsi si un service est mis √† jour, la seul d√©pendance √† mettre √† jour √©galement est l'orchestrateur, on r√©duit grandement le niveau de d√©pendances. Cependant, en introduisant un orchestrateur, on va indirectement introduire de la latence et une mauvaise tol√©rance aux pannes.</p><h3 id="la-chor%C3%A9graphie-%F0%9F%95%BA%F0%9F%8F%BB" tabindex="-1"><a class="header-anchor" href="#la-chor%C3%A9graphie-%F0%9F%95%BA%F0%9F%8F%BB"></a> La chor√©graphie üï∫üèª</h3><p>La chor√©graphie est une approche diff√©rente qui permet de pallier certains inconv√©nients de l'orchestration : la d√©pendance et la latence. Cette approche consiste √† utiliser des √©v√©nements avec un mod√®le <em>publish-subscribe</em> :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bert-Nicolas/mon/temps-2.1/chore-1.png" alt="Choregraphie"></p><p>Ici, lorsqu'une action est effectu√©e, le service en question va publier un √©v√©nement indiquant qu'il a effectu√© cette action. Les autres services quant √† eux peuvent souscrire √† cet √©v√©nement de mani√®re asynchrone pour effectuer les modifications n√©cessaires de l'√©v√©nement. Les services n'ont pas connaissances des autres, le syst√®me est donc performant reste simple √† maintenir √† plus grande √©chelle. Si un service tombe en panne, le syst√®me continue de fonctionner mais l'on peut cependant perdre la coh√©rence des donn√©es.</p><h2 id="conseils-et-bonnes-pratiques" tabindex="-1"><a class="header-anchor" href="#conseils-et-bonnes-pratiques"></a> Conseils et bonnes pratiques</h2><ul><li><strong>Langage des microservices</strong> : on a vu que chaque microservices peut √™tre d√©velopp√© avec le langage souhait√©. Dans la r√©alit√© il est recommand√© de minimiser ce nombre de langages afin de faciliter le changement d'√©quipes des d√©veloppeurs et de pouvoir travailler sur n'importe quel service et ainsi gagner en productivit√©.</li><li><strong>D√©finition des API</strong> : Il est important d'avoir une coh√©rence globale dans la d√©finition des API. Pour cela un projet √† part est cr√©√© afin d'expliciter ces d√©finitions/sp√©cifications.</li><li><strong>Base de donn√©es</strong> : chaque service dispose de sa propre base de donn√©es qui ne doit √™tre accessible que par lui. Si ce n'est pas le cas, les mises √† jour de base de donn√©es sont complexes et risqu√©es. Si un service souhaite modifier la base de donn√©es d'un autre service il doit passer par une API ou un √©v√©nement.</li><li><strong>D√©ploiement continu</strong> : Le d√©ploiement continu est in√©vitable en microservices, en effet, d√©ployer chaque service √† la main un par un serait tr√®s fastidieux.</li><li><strong>Maintenance des d√©pendances</strong> : Les d√©pendances de chaque service doivent √™tre mises √† jour r√©guli√®rement, et cela peut √™tre fait de mani√®re p√©riodique tout en ayant une s√©rie de tests afin de s'assurer que le service et le syst√®me continue de fonctionner apr√®s la mise √† jour.</li></ul><h2 id="exemple-de-microservices" tabindex="-1"><a class="header-anchor" href="#exemple-de-microservices"></a> Exemple de microservices</h2><p>Il existe de nombreuses fa√ßons de d√©couper un projet en microservices. Pour l'exemple uniquement, voici comment Amazon pourrait organiser une partie de son application en microservice. <em>(Amazon fonctionne tr√®s probablement en microservices, mais le d√©coupage que je propose est purement fictif)</em></p><p>Ici j'ai pris l'exemple de la recherche d'un article et de son achat sur Amazon. Chaque fonctionnalit√© repr√©sent√© par un rectangle rouge pourrait √™tre organis√© comme un microservice.</p><ul><li>La barre de recherche</li><li>Les suggestions d'articles (√† l'aide d'algorithme se basant par exemple sur les pr√©c√©dentes visites de l'utilisateur, la p√©riode actuelle, sa localisation ....)</li><li>La partie concernant la livraison (estimation des d√©lais de livraison, retour de produits, gestion des stocks...)</li><li>Le panier</li><li>...</li></ul><p>Toutes ces fonctionnalit√©s, qui sont externes au site (dans le sens o√π elles vont faire appel √† des algorithmes externes et afficher seulement le r√©sultat sur le site), peuvent √™tre d√©coup√©es et s√©par√©es en microservices. On peut √©videmment pensez √† d'autre fonctionnalit√©s : paiement, √©valuations des produits ...</p><h2 id="preuve-de-concept" tabindex="-1"><a class="header-anchor" href="#preuve-de-concept"></a> Preuve de concept</h2><p>L'auteur de l'<a href="https://github.com/SebastienBtr/Micro-express">article</a> S√©bastien Bouttier, nous mets √† disposition une preuve de concept avec l'architecture suivante sous Docker :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Bert-Nicolas/mon/temps-2.1/sdd-diagram.png" alt="Exemple"></p><p>What you can do:</p><ul><li>Create/update/get articles</li><li>Add articles in the cart, update/get cart items</li><li>Delete an article that is in the cart: will delete the article from the cart thanks to a kafka event</li><li>Checkout the cart: will edit the stock of articles with a kafka event</li><li>If you don't have an auth token you can do nothing on user service</li><li>Signup and login (auth service) to get a token</li><li>You can now access the user service except deleting a user: requires a special role in the token</li></ul><h2 id="sources" tabindex="-1"><a class="header-anchor" href="#sources"></a> Sources</h2><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Information</b></p></div><div class="pl-8 mr-8"><p><em>(consult√©es le 31/12/2022)</em></p></div></div><ul><li><a href="https://fr.wikipedia.org/wiki/Microservices">https://fr.wikipedia.org/wiki/Microservices</a></li><li><a href="https://www.redhat.com/fr/topics/microservices/what-are-microservices">https://www.redhat.com/fr/topics/microservices/what-are-microservices</a></li><li><a href="https://sebastien-bouttier.medium.com/architecture-microservices-de-a-%C3%A0-z-5626809cd4f">https://sebastien-bouttier.medium.com/architecture-microservices-de-a-√†-z-5626809cd4f</a></li></ul></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>