<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2022-2023/Royant-Killian/pok/temps-2/"><meta name="description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta property="og:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="twitter:description" content="Do-It, cours et travaux des √©l√®ves de l&#39;√©cole Centrale M√©diterran√©e"><meta name="author" content="Killian ROYANT"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, POK, JavaScript, NodeJS, Express, Serveur distant"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="[POK] Find the Key (temps 2)"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Royant-Killian/pok/temps-2/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="[POK] Find the Key (temps 2)"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2022-2023/Royant-Killian/pok/temps-2/"><title>[POK] Find the Key (temps 2)</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">[POK] Find the Key (temps 2)</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tags :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">POK</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">JavaScript</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">NodeJS</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">Express</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">Serveur distant</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">POK</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Killian ROYANT</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2022-2023</span></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2022-2023/Royant-Killian/">Killian Royant</a><span class="px-1">/</span><a href="/promos/2022-2023/Royant-Killian/pok/">Les POK de Killian</a><span class="px-1">/</span><a href="/promos/2022-2023/Royant-Killian/pok/temps-2/">[POK] Find the Key (temps 2)</a></div></div><p><strong>Find The Key</strong> est un jeu que j'ai d√©velopp√© durant mon S7. Le but est de trouver la cl√© plac√©e al√©atoirement sur un plateau puis de la ramener √† la base en √©vitant les monstres. Il est cod√© en HTML/CSS/JS pur. Le desing a √©t√© r√©alis√© depuis Adobe XD.</p><p>Le temps 2 est consacr√© √† l'<strong>ajout d'une partie back-end</strong> avec NodeJS et Express et au <strong>d√©ploiement sur un serveur distant</strong>.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mb-2 mr-8"><p><strong>Ressources</strong></p></div><div class="pl-8 mr-8"><ul><li><a href="https://github.com/royantk/FindTheKey">Le Github du POK</a></li><li><a href="https://github.com/royantk/FindTheKey/blob/backend/app.js">Le fichier de l'API</a></li><li><a href="http://cerfeuil.ovh1.ec-m.fr/">R√©sultat serveur distant (front)</a></li><li><a href="http://node.cerfeuil.ovh1.ec-m.fr/">R√©sultat serveur distant (API)</a></li></ul></div></div><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"></a> Introduction</h2><p><strong>Find The Key</strong> est un jeu que j'ai d√©velopp√© durant mon S7. Le but est de trouver la cl√© plac√©e al√©atoirement sur un plateau puis de la ramener √† la base en √©vitant les monstres.</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Royant-Killian/pok/temps-2/FindTheKey.png" alt="Image Find The Key"></p><p>Durant le temps 1, j'ai eu l'occasion de r√©soudre les probl√®mes de compatibilit√© du site ainsi que de recr√©er la structure du HTML/CSS pour rendre l'application responsive. Le temps 2 sera consacr√© √† l'<strong>ajout d'une partie back-end</strong> avec NodeJS et Express et au <strong>d√©ploiement sur un serveur distant</strong>.</p><h3 id="objectif-du-temps-2---d%C3%A9ployer-sur-un-serveur-distant" tabindex="-1"><a class="header-anchor" href="#objectif-du-temps-2---d%C3%A9ployer-sur-un-serveur-distant"></a> Objectif du temps 2 - D√©ployer sur un serveur distant</h3><p>Mes objectifs √† l'occasion de la deuxi√®me partie de ce POK sont les suivants :</p><ul><li>Cr√©er une partie <strong>back-end</strong> (API) pour g√©n√©rer le contenu des cases et sauvegarder les scores des joueurs (ATTENTION : UTILISER ORM (ex : sequelize))</li><li>D√©ployer le site et l'API sur un <strong>serveur distant</strong></li></ul><h3 id="planning" tabindex="-1"><a class="header-anchor" href="#planning"></a> Planning</h3><p>Pour mener √† bien ce projet, j'ai d√©cid√© de m'organiser en <strong>4 √©tapes principales</strong> traitant les parties <strong>back</strong> (en rouge), <strong>serveur</strong> (en vert) et adaptation du <strong>front</strong> (en bleu).</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2022-2023/refs/heads/main//Royant-Killian/pok/temps-2/planning.png" alt="Image planning"></p><p>On peut retrouver le d√©tail du temps pr√©vu et pass√© sur chaque √©tape dans le tableau ci-dessous :</p><table><thead><tr><th><strong>To-do</strong></th><th><strong>Temps pass√©</strong></th><th><strong>Temps pr√©vu</strong></th></tr></thead><tbody><tr><td>Mise en ligne (test) version front sur serveur distant</td><td>1 h</td><td>1 h</td></tr><tr><td>Pr√©paration du back</td><td>7 h</td><td>4 h</td></tr><tr><td>Cr√©ation de l‚ÄôAPI</td><td>8 h</td><td>5 h</td></tr><tr><td>Cr√©ation interface front/back</td><td>1 h</td><td>4 h</td></tr><tr><td>Cr√©ation √©cran scores</td><td>0 h</td><td>4 h</td></tr><tr><td>Mise en ligne du back sur le serveur distant (API)</td><td>3 h</td><td>2 h</td></tr><tr><td><strong>Total</strong></td><td><strong>20 h</strong></td><td><strong>20 h</strong></td></tr></tbody></table><p><em>(mis √† jour le 24/01/2022)</em></p><h3 id="r%C3%A9sultats" tabindex="-1"><a class="header-anchor" href="#r%C3%A9sultats"></a> R√©sultats</h3><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100 dark:border-cyan-800 dark:bg-cyan-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-cyan-500 dark:stroke-cyan-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><div class="pl-8 mb-2 mr-8"><p><strong>R√©sultats</strong></p></div><div class="pl-8 mr-8"><p>Comme on peut le voir, j'ai <strong>d√©pass√©</strong> le temps pr√©vu pour la partie <strong>back</strong>. Cela est d√ª au fait que j'ai d√ª <strong>apprendre</strong> √† utiliser NodeJS, Express et Sequelize et <strong>adapter</strong> mon code frontend √† un environnement backend. Je n'ai ainsi pas pu r√©aliser l'√©cran des scores ni adapter correctement le front pour utiliser l'API.</p><p>J'ai n√©anmoins <strong>r√©ussi</strong> √† mettre en ligne la version front du jeu sur un serveur distant et √† cr√©er une API sur le serveur distant permettant de g√©n√©rer le contenu des cases. Il reste donc √† cr√©er la route qui permet de g√©rer le d√©placement et adapter le front √† l'API.</p><p>Pour utiliser l'API, il faut envoyer une requ√™te <strong>POST</strong> √† l'adresse suivante : <a href="http://node.cerfeuil.ovh1.ec-m.fr/newGame">http://node.cerfeuil.ovh1.ec-m.fr/newGame</a>. Il faut envoyer une requ√™te incluant un <strong>body</strong> contenant la taille du plateau souhait√©. Par exemple, pour un plateau de 4x4, il faut envoyer le body suivant :</p><pre class="language-json line-numbers"><code>

{
  "size": 4
}


</code></pre><p>Cette requ√™te renverra alors un objet JSON contenant le plateau. Cette requ√™te renverra toutes les cases mais <strong>uniquement le type des cases d√©couvertes</strong>. Le vrai contenu des cases est n√©anmoins stock√© en bases de donn√©es. Voici un aper√ßu d'une r√©ponse :</p><pre class="language-json line-numbers"><code>

{
    "success": true,
    "message": "New game created successfully",
    "data": {
        "game": {
            "playerHasKey": false,
            "id": 3,
            "playerLives": 3,
            "playerX": 0,
            "playerY": 2,
            "updatedAt": "2023-01-24T21:00:50.846Z",
            "createdAt": "2023-01-24T21:00:50.846Z"
        },
        "cases": [
            {
                "id": 33,
                "x": 0,
                "y": 0,
                "visibleType": "hidden",
                "etat": "hidden",
                "createdAt": "2023-01-24T21:00:50.915Z",
                "updatedAt": "2023-01-24T21:00:50.915Z",
                "gameId": 3
            } // ... 15 autres cases
        ]
    }
}


</code></pre><p>Le code de l'API est disponible sur le <a href="https://github.com/royantk/FindTheKey/blob/backend/app.js">Github du POK</a></p></div></div><h2 id="mise-en-place" tabindex="-1"><a class="header-anchor" href="#mise-en-place"></a> Mise en place</h2><p>Je d√©taille ci-dessous les diff√©rentes √©tapes que j'ai pu r√©aliser √† l'aide d'explications g√©n√©rales applicables √† un grand nombre de projets.</p><h3 id="mise-en-ligne-(test)-version-front-sur-serveur-distant" tabindex="-1"><a class="header-anchor" href="#mise-en-ligne-(test)-version-front-sur-serveur-distant"></a> Mise en ligne (test) version front sur serveur distant</h3><p>Pour commencer, j'ai d√©cid√© de <strong>mettre en ligne</strong> la version front du jeu sur un serveur distant. J'ai donc utilis√© le service <a href="https://www.ovh.com/fr/">OVH</a> pour cr√©er un serveur et y d√©ployer le site. Je pr√©sente ci-dessous comment cr√©er un serveur OVH, ce que je n'ai pas fais en pratique car j'ai utilis√© le serveur OVH1 de Centrale.</p><h4 id="connexion-au-serveur" tabindex="-1"><a class="header-anchor" href="#connexion-au-serveur"></a> Connexion au serveur</h4><p>Pour se connecter au serveur, il faut utiliser le <strong>protocole SSH</strong>. J'ai utilis√© le terminal de mon ordinateur pour me connecter au serveur. Pour cela, il faut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

ssh username@adresse_serveur


</code></pre><p>On peut alors entrer le mot de passe du serveur pour se connecter. Pour ne pas avoir √† entrer le mot de passe √† chaque fois, il est possible de cr√©er une <strong>cl√© SSH</strong>. Pour cela, il faut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

ssh-keygen


</code></pre><p>On peut alors entrer le chemin de la cl√© et le mot de passe. Une fois la cl√© cr√©√©e, il faut l'<strong>ajouter au serveur</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

ssh-copy-id username@adresse_serveur


</code></pre><h4 id="navigation-dans-le-serveur" tabindex="-1"><a class="header-anchor" href="#navigation-dans-le-serveur"></a> Navigation dans le serveur</h4><p>Pour v√©rifier que la connexion est bien √©tablie, on peut utiliser la commande suivante pour <strong>afficher le contenu du dossier courant</strong> :</p><pre class="language-bash line-numbers"><code>

ls


</code></pre><p>Pour <strong>se d√©placer dans un dossier</strong>, on peut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

cd nom_dossier


</code></pre><p>On peut aussi <strong>cr√©er un nouveau dossier</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

mkdir nom_dossier


</code></pre><p>Enfin, pour <strong>supprimer un dossier</strong>, on peut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

rm -r nom_dossier


</code></pre><h4 id="d%C3%A9ploiement-du-site" tabindex="-1"><a class="header-anchor" href="#d%C3%A9ploiement-du-site"></a> D√©ploiement du site</h4><p>Pour <strong>d√©ployer</strong> le site sur le serveur, on peut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

scp -r chemin_dossier username@adresse_serveur:/chemin_dossier


</code></pre><p>On peut alors entrer le mot de passe du serveur pour d√©ployer le site. Pour v√©rifier que le site est bien d√©ploy√©, on peut se rendre sur le navigateur et entrer l'adresse IP du serveur.</p><h3 id="pr%C3%A9paration-du-back" tabindex="-1"><a class="header-anchor" href="#pr%C3%A9paration-du-back"></a> Pr√©paration du back</h3><p>Pour pr√©parer le back, j'ai d√©cid√© de <strong>cr√©er un projet Node.js</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

npm init


</code></pre><p>On peut alors entrer les informations demand√©es. Une fois le projet cr√©√©, on peut <strong>installer les d√©pendances</strong> comme, par exemple, Express avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

npm install express


</code></pre><p>J'ai ensuite <strong>cr√©√© un fichier</strong> <code>index.js</code> pour cr√©er mon API. Pour commencer, j'ai utilis√© l'exemple tir√© de la documentation d'Express ci-dessous qui permet d'afficher un message dans le navigateur :</p><pre class="language-javascript line-numbers"><code>

const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hello World!');
});

app.listen(port, () => {
  console.log(`Example app listening at http://localhost:${port}`);
});


</code></pre><p>On pourra ensuite <strong>lancer le serveur Node.js</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

node index.js


</code></pre><p>On pourra alors se rendre sur le navigateur et entrer l'adresse suivante pour voir afficher le message <strong>Hello World!</strong> :</p><pre class="language-bash line-numbers"><code>

http://localhost:3000


</code></pre><h3 id="mise-en-ligne-(test)-version-back-sur-serveur-distant" tabindex="-1"><a class="header-anchor" href="#mise-en-ligne-(test)-version-back-sur-serveur-distant"></a> Mise en ligne (test) version back sur serveur distant</h3><h4 id="importation-du-fichier-index.js-dans-le-serveur" tabindex="-1"><a class="header-anchor" href="#importation-du-fichier-index.js-dans-le-serveur"></a> Importation du fichier <code>index.js</code> dans le serveur</h4><p>Pour importer le fichier <code>index.js</code> dans le serveur, on peut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

scp index.js username@adresse_serveur:/chemin_dossier


</code></pre><p>On peut √©galement utiliser un outil tel que <a href="https://filezilla-project.org/">FileZilla</a> pour importer le fichier <code>index.js</code> dans le serveur via l'interface graphique.</p><h4 id="installation-de-node.js-sur-le-serveur" tabindex="-1"><a class="header-anchor" href="#installation-de-node.js-sur-le-serveur"></a> Installation de Node.js sur le serveur</h4><p>On peut ensuite <strong>se connecter au serveur</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

ssh username@adresse_serveur


</code></pre><p>On peut alors entrer le mot de passe du serveur. Une fois connect√©, on peut ensuite <strong>installer Node.js</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

sudo apt install nodejs


</code></pre><p>On peut ensuite <strong>installer npm</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

sudo apt install npm


</code></pre><p>Pour v√©rifier que Node.js et npm sont bien install√©s, on peut utiliser les commandes suivantes :</p><pre class="language-bash line-numbers"><code>

node -v
npm -v


</code></pre><p>On pourra ensuite installer les <strong>d√©pendances</strong> du projet avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

npm install express


</code></pre><h4 id="lancement-du-serveur" tabindex="-1"><a class="header-anchor" href="#lancement-du-serveur"></a> Lancement du serveur</h4><p>On peut ensuite <strong>lancer le serveur</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

node index.js


</code></pre><p>On peut alors se rendre sur le navigateur et entrer l'adresse suivante :</p><pre class="language-bash line-numbers"><code>

http://adresse_serveur:3000


</code></pre><p>On peut alors voir le message <strong>Hello World!</strong>.</p><p>Pour <strong>arr√™ter le serveur</strong>, on peut effectuer la combinaison de touches <code>Ctrl + C</code>.</p><h4 id="laisser-le-serveur-tourner-en-arri%C3%A8re-plan" tabindex="-1"><a class="header-anchor" href="#laisser-le-serveur-tourner-en-arri%C3%A8re-plan"></a> Laisser le serveur tourner en arri√®re-plan</h4><p>Apr√®s avoir lanc√© le serveur, on remarque que celui-ci s'arr√™te d√®s que l'on quitte la connexion SSH. Il est donc n√©cessaire de <strong>laisser le serveur tourner en arri√®re-plan</strong>.</p><p>Pour <strong>laisser le serveur tourner en arri√®re-plan</strong>, on peut utiliser un outil tel que <a href="https://doc.ubuntu-fr.org/screen">screen</a> qui permet de lancer des programmes en arri√®re-plan. On peut cr√©er un screen avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

screen -S nom_du_screen


</code></pre><p>On peut alors relancer le serveur avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

node index.js


</code></pre><p>Enfin, on pourra <strong>quitter le screen</strong> avec le raccourci <code>Ctrl + A + D</code>.</p><p>Le serveur continuera alors de tourner en arri√®re-plan.</p><p>Pour <strong>revenir sur le screen</strong> et arr√™ter le serveur, on utilisera la commande suivante :</p><pre class="language-bash line-numbers"><code>

screen -r nom_du_screen


</code></pre><p>On pourra enfin <strong>arr√™ter le serveur</strong> avec <code>Ctrl + C</code>.</p><h3 id="cr%C3%A9ation-de-l'api" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-de-l'api"></a> Cr√©ation de l'API</h3><p>Pour cr√©er l'API n√©cessaire au projet, j'ai utilis√© Node.js et Express accompagn√©s d'une base de donn√©es PostgreSQL.</p><h4 id="cr%C3%A9ation-de-la-base-de-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-de-la-base-de-donn%C3%A9es"></a> Cr√©ation de la base de donn√©es</h4><p>Pour <strong>cr√©er la base de donn√©es</strong>, on peut utiliser la commande suivante :</p><pre class="language-bash line-numbers"><code>

createdb nom_base_de_donnees


</code></pre><p>On pourra alors s'en servir dans notre fichier <code>index.js</code>. Nous devons ensuite installer les diverses <strong>d√©pendances</strong> n√©cessaires √† la base de donn√©es et √† l'API avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

npm install express sequelize pg body-parser


</code></pre><h4 id="configuration-de-la-connexion-%C3%A0-la-base-de-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#configuration-de-la-connexion-%C3%A0-la-base-de-donn%C3%A9es"></a> Configuration de la connexion √† la base de donn√©es</h4><p>On commence par importer les d√©pendances n√©cessaires √† la connexion √† la base de donn√©es :</p><pre class="language-javascript line-numbers"><code>

const express = require('express');
const Sequelize = require('sequelize');
const bodyParser = require('body-parser');


</code></pre><p>On peut ensuite <strong>cr√©er la connexion</strong> √† la base de donn√©es :</p><pre class="language-javascript line-numbers"><code>

const sequelize = new Sequelize("postgres://<username>:<password>@<host>:<port>/<database>");


</database></port></host></password></username></code></pre><p>On peut alors <strong>tester la connexion</strong> √† la base de donn√©es avec le code suivant :</p><pre class="language-javascript line-numbers"><code>

sequelize.authenticate().then(() => {
    console.log('Connection has been established successfully.');
}).catch(err => {
    console.error('Unable to connect to the database:', err);
});


</code></pre><h4 id="cr%C3%A9ation-du-mod%C3%A8le" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-du-mod%C3%A8le"></a> Cr√©ation du mod√®le</h4><p>On peut ensuite <strong>cr√©er le mod√®le</strong> de la base de donn√©es avec le code suivant :</p><pre class="language-javascript line-numbers"><code>

const User = sequelize.define('user', {
    id: {
        type: Sequelize.INTEGER,
        primaryKey: true,
        autoIncrement: true
    },
    username: {
        type: Sequelize.STRING,
        allowNull: false
    },
    password: {
        type: Sequelize.STRING,
        allowNull: false
    }
});


</code></pre><p>On peut ensuite <strong>cr√©er la table</strong> dans la base de donn√©es avec le code suivant :</p><pre class="language-javascript line-numbers"><code>

User.sync().then(() => {
    console.log('Table created');
});


</code></pre><h4 id="cr%C3%A9ation-des-routes" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-des-routes"></a> Cr√©ation des routes</h4><p>On peut ensuite <strong>cr√©er les routes</strong> de l'API avec le code suivant :</p><pre class="language-javascript line-numbers"><code>

app.get('/users', (req, res) => {
    User.findAll().then(users => {
        res.json(users);
    });
});

app.get('/users/:id', (req, res) => {
    User.findById(req.params.id).then(user => {
        res.json(user);
    });
});

app.post('/users', (req, res) => {
    User.create(req.body).then(user => {
        res.json(user);
    });
});

app.put('/users/:id', (req, res) => {
    User.update(req.body, {
        where: {
            id: req.params.id
        }
    }).then(() => {
        res.json(req.body);
    });
});

app.delete('/users/:id', (req, res) => {
    User.destroy({
        where: {
            id: req.params.id
        }
    }).then(() => {
        res.json(req.params.id);
    });
});


</code></pre><p>On peut ensuite <strong>lancer le serveur</strong> avec la commande suivante :</p><pre class="language-bash line-numbers"><code>

node index.js


</code></pre><p>On peut alors se rendre sur le navigateur et entrer l'adresse suivante :</p><pre class="language-bash line-numbers"><code>

http://adresse_serveur:3000/users


</code></pre><p>On peut alors voir la liste des utilisateurs.</p><h3 id="connexion-de-l'api-au-projet" tabindex="-1"><a class="header-anchor" href="#connexion-de-l'api-au-projet"></a> Connexion de l'API au projet</h3><p>On peut ensuite <strong>modifier le projet</strong> pour qu'il puisse se connecter √† l'API. Pour cela, on va utiliser la m√©thode <code>fetch()</code> de JavaScript qui permet de faire des requ√™tes HTTP.</p><p>On peut commencer par <strong>cr√©er un fichier</strong> <code>api.js</code> qui contiendra les fonctions permettant de se connecter √† l'API. On peut ensuite <strong>cr√©er les fonctions</strong> permettant de se connecter √† l'API :</p><pre class="language-javascript line-numbers"><code>

export function getUsers() {
    return fetch('http://adresse_serveur:3000/users').then(response => response.json());
}

export function getUser(id) {
    return fetch('http://adresse_serveur:3000/users/' + id).then(response => response.json());
}

export function createUser(user) {
    return fetch('http://adresse_serveur:3000/users', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(user)
    }).then(response => response.json());
}

export function updateUser(user) {
    return fetch('http://adresse_serveur:3000/users/' + user.id, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(user)
    }).then(response => response.json());
}

export function deleteUser(id) {
    return fetch('http://adresse_serveur:3000/users/' + id, {
        method: 'DELETE'
    }).then(response => response.json());
}


</code></pre><p>On peut ensuite <strong>modifier le fichier</strong> <code>index.js</code> pour qu'il puisse se connecter √† l'API. On peut commencer par <strong>importer les fonctions</strong> permettant de se connecter √† l'API :</p><pre class="language-javascript line-numbers"><code>

import { getUsers, getUser, createUser, updateUser, deleteUser } from './api.js';


</code></pre><p>On pourra alors utiliser les fonctions de l'API dans le fichier <code>index.js</code>. On peut par exemple <strong>afficher la liste des utilisateurs</strong> avec le code suivant :</p><pre class="language-javascript line-numbers"><code>

getUsers().then(users => {
    console.log(users);
});


</code></pre><p><a href="../">&lt;-- Retour</a></p></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>