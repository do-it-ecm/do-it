<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2023-2024/Ledins-Cassandra/pok/temps-3/"><meta name="description" content="Configurer mon propre serveur pour h√©berger mes sites persos"><meta property="og:description" content="Configurer mon propre serveur pour h√©berger mes sites persos"><meta name="twitter:description" content="Configurer mon propre serveur pour h√©berger mes sites persos"><meta name="author" content="Cassandra Ledins"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, POK"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="Mon serveur √† la maison"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/Ledins-Cassandra/pok/temps-3/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="Mon serveur √† la maison"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/Ledins-Cassandra/pok/temps-3/"><title>Mon serveur √† la maison</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">Mon serveur √† la maison</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tag :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">POK</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">POK</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Cassandra Ledins</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2023-2024</span></div></div><p class="mb-4 text-lg">Configurer mon propre serveur pour h√©berger mes sites persos</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2023-2024/Ledins-Cassandra/">Cassandra Ledins</a><span class="px-1">/</span><a href="/promos/2023-2024/Ledins-Cassandra/pok/">POK de Cassandra Ledins</a><span class="px-1">/</span><a href="/promos/2023-2024/Ledins-Cassandra/pok/temps-3/">Mon serveur √† la maison</a></div></div><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"></a> Introduction</h2><p>Pour voir la naissance d'une application de A √† Z, j'ai envie d'en savoir plus sur la mise en place d'un serveur en passant directement par la pratique. A la fin, j'aimerais pouvoir mettre en ligne mon site (site g√©n√©rique), et qu'une base de donn√©es soit servie aussi. Je pense quand m√™me que √ßa ne sera pas aussi simple qu'en th√©orie, et j'esp√®re ne pas me faire attaquer. Je pensais mettre √ßa en place sur une VM pour plus de s√©curit√© perso. Le serveur n'a √©videmment aucune vocation √† persister.</p><h2 id="backlog-pr%C3%A9vu" tabindex="-1"><a class="header-anchor" href="#backlog-pr%C3%A9vu"></a> Backlog pr√©vu</h2><h3 id="sprint-1" tabindex="-1"><a class="header-anchor" href="#sprint-1"></a> Sprint 1</h3><ul><li><p>[ ] Recherche et familiarisation (3 heures) - Niveau de difficult√© : 2</p><ul><li>Recherche sur les bonnes pratiques de mise en place d'un serveur web.</li><li>Familiarisation avec les concepts de s√©curit√©, de configurations r√©seau et d'administration syst√®me.</li></ul></li><li><p>[ ] Installation et configuration du serveur web (2 heures) - Niveau de difficult√© : 2</p><ul><li>Choix et installation du serveur web (Apache, Nginx, etc.).</li><li>Configuration de base du serveur web pour r√©pondre aux besoins du site.</li></ul></li><li><p>[ ] Configuration du pare-feu et des r√®gles de s√©curit√© (4 heures) - Niveau de difficult√© : 8</p><ul><li>Configuration du pare-feu pour limiter l'acc√®s au serveur aux adresses IP autoris√©es.</li><li>Mise en place de r√®gles de s√©curit√© pour prot√©ger le serveur contre les attaques.</li></ul></li></ul><h3 id="sprint-2" tabindex="-1"><a class="header-anchor" href="#sprint-2"></a> Sprint 2</h3><ul><li><p>[ ] Configuration d'une base de donn√©es (2 heures) - Niveau de difficult√© : 3</p><ul><li>Installation et configuration d'une donn√©es (MySQL).</li><li>Configuration des autorisations d'acc√®s √† la base de donn√©es.</li></ul></li><li><p>[ ] D√©ploiement et configuration du site web (4 heures) - Niveau de difficult√© : 3</p><ul><li>Transfert des fichiers du site web sur le serveur.</li><li>Configuration du serveur web pour servir correctement le site.</li><li>Test du fonctionnement du site sur le serveur local.</li></ul></li><li><p>[ ] Tests et ajustements finaux (5 heures) - Niveau de difficult√© : 5</p><ul><li>Tests de fonctionnalit√© pour s'assurer que le site fonctionne comme pr√©vu.</li><li>Ajustements √©ventuels de la configuration du serveur en fonction des besoins du site.</li><li>V√©rification de la s√©curit√© et des performances du serveur.</li></ul></li></ul><h2 id="fin-du-sprint-1" tabindex="-1"><a class="header-anchor" href="#fin-du-sprint-1"></a> Fin du Sprint 1</h2><ul><li><p>[X] Recherche et familiarisation (temps r√©√©l : 3h)</p><ul><li>Recherche sur les bonnes pratiques de mise en place d'un serveur web.</li><li>Familiarisation avec les concepts de s√©curit√©, de configurations r√©seau et d'administration syst√®me.</li></ul></li><li><p>[X] Installation et configuration du serveur web (temps r√©√©l : 2h)</p><ul><li>Choix et installation du serveur web (Apache, Nginx, etc.).</li><li>Configuration de base du serveur web pour r√©pondre aux besoins du site.</li></ul></li><li><p>[X] Configuration du pare-feu et des r√®gles de s√©curit√© (temps r√©el : 2 heures) - Niveau de difficult√© : 8</p><ul><li>Configuration du pare-feu pour limiter l'acc√®s au serveur aux adresses IP autoris√©es.</li><li>Mise en place de r√®gles de s√©curit√© pour prot√©ger le serveur contre les attaques.</li></ul></li><li><p>[X] D√©ploiement et configuration du site web (temps r√©el : 2 heures) - Niveau de difficult√© : 3</p><ul><li>Transfert des fichiers du site web sur le serveur. <strong>NON FAIT</strong></li><li>Configuration du serveur web pour servir correctement le site.</li><li>Test du fonctionnement du site sur le serveur local.</li></ul></li></ul><h3 id="review" tabindex="-1"><a class="header-anchor" href="#review"></a> Review</h3><p>Ce n'est pas √©vident d'estimer pr√©cis√©ment la dur√©e de chaque t√¢che car elles se sont entrem√™l√©es. Finalement le setup du serveur basique n'a pas pris autant de temps que ce que j'avais pr√©vu, j'ai donc avanc√© un peu sur les t√¢ches qui √©taient initialement pr√©vues pour le Sprint 2. La majorit√© du temps pass√© sur ce Sprint 1 a consist√© en r√©parer les boulettes que j'ai fait en manipulant les adresses r√©seaux. Mon routeur et mon ordinateur n'√©taient pas tr√®s contents. Je ne pense pas avoir √©t√© capable de le faire aussi &quot;vite&quot; snas avoir assist√© au cours R√©seaux, qui m'a permis de comprendre les grandes lignes de l'architecture r√©seau et de la communication avec l'ext√©rieur.</p><p>A la fin du sprint : je pouvais me connecter en SSH sur ma VM depuis un r√©seau ext√©rieur, et je pouvais voir la page d'accueil par d√©faut de Apache sur mon IP depuis un r√©seau ext√©rieur aussi. Je suis sur Internet Maman !</p><p>Le serveur ne tourne pas en permanence et j'ai encore peur de ne pas avoir configur√© assez bien le pare-feu et mon routeur, donc je ne divulguerai pas mon adresse pour l'instant.</p><h3 id="technique" tabindex="-1"><a class="header-anchor" href="#technique"></a> Technique</h3><p>J'ai utilis√© une VM Ubuntu-server, install√© Apache, d√©finis une IP pour ma VM, chang√© l'adresse IP de mon routeur, cass√© mon routeur, chang√© l'adresse IP de mon ordi et red√©marrer mon routeur pour r√©parer tout √ßa, et puis finalement ils n'√©taient pas dans le m√™me sous-r√©seau donc la page ne s'affichait pas sur Internet alors j'ai chang√© la plage d'IP pour qu'ils puissent communiquer plus facilement, mais en fait le probl√®me n'avait rien √† voir. Finalement, il fallait reconfigurer la VM.</p><p>Tout √ßa pour dire que j'ai bidouill√© dans tous les sens, gaff√© beaucoup, appris et compris beaucoup par la m√™me occasion.</p><p>Photo montage de mon aventure :</p><p>L'envers du d√©cor avec la VM :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/server.png" alt=""></p><p>Le pont qui dessert ma VM :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/routeur.png" alt=""></p><p>J'acc√®de au site depuis mon t√©l√©phone en 5G :</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/youpi.jpg" alt=""></p><h2 id="sprint-2-1" tabindex="-1"><a class="header-anchor" href="#sprint-2-1"></a> Sprint 2</h2><p>A la fin du sprint 1, en r√©alisant que j'√©tais plus rapide que pr√©vu sur les objectifs fix√©s au d√©part, je me suis dit qu'il pourrait √™tre int√©ressant de mettre en place une sorte de sonde sur le serveur, qui analyserait les tentatives d'acc√®s et afficherait des stats sur un site. Il me para√Æt aussi plus judicieux et instructif de faire cela que de simplement copier-coller un site d√©j√† pr√™t.</p><p>Voici donc les objectifs du sprint 2 red√©finis.</p><h3 id="nouveaux-objectifs" tabindex="-1"><a class="header-anchor" href="#nouveaux-objectifs"></a> Nouveaux objectifs</h3><ul><li><p>[ ] Configuration d'une base de donn√©es et mise en place de la collecte des logs (3 heures) - Niveau de difficult√© : 5</p><ul><li>Installation et configuration d'une base de donn√©es.</li><li>Configuration des autorisations d'acc√®s √† la base de donn√©es.</li><li>Mise en place de la collecte des logs des acc√®s au serveur.</li></ul></li><li><p>[ ] Cr√©ation de la CGI pour afficher les logs avec localisation (3 heures) - Niveau de difficult√© : 5</p><ul><li>Apprentissage et mise en ≈ìuvre des CGI pour cr√©er une page web dynamique.</li><li>Int√©gration de la base de donn√©es GeoLite pour la localisation des adresses IP.</li><li>Utilisation de GeoIP pour obtenir les informations de localisation.</li><li>Mise en forme des logs pour affichage sur la page web.</li></ul></li><li><p>[ ] Gestion avanc√©e des autorisations et s√©curit√© du serveur (4 heures) - Niveau de difficult√© : 8</p><ul><li>Apprentissage et mise en ≈ìuvre de la gestion avanc√©e des autorisations (chmod).</li><li>Cr√©ation de groupes sp√©ciaux avec des acc√®s restreints pour renforcer la s√©curit√© du serveur.</li><li>Configuration et s√©curisation des acc√®s aux fichiers et r√©pertoires n√©cessaires pour la CGI.</li><li>Test de s√©curit√© pour s'assurer que seuls les utilisateurs autoris√©s peuvent acc√©der aux donn√©es sensibles.</li></ul></li></ul><p>Les nouveaux objectifs restent similaires √† ceux pr√©c√©demment d√©finis, mais me permettront d'apprendre de mani√®re plus pouss√©e la r√©cup√©ration de logs, la gestion des permissions d'acc√®s aux donn√©es, et puis finalement, de voir qui essaie de trouver des failles sur mon serveur (probablement beaucoup de robots).</p><h3 id="c'est-parti" tabindex="-1"><a class="header-anchor" href="#c'est-parti"></a> C'est parti</h3><p>Pour pouvoir voir qui se connecte sur le site, il faut configurer la r√©cup√©ration des donn√©es dans Apache. Comme je ne suis pas encore une vraie admin syst√®me, et que j'en ai marre de tout coder sur un terminal avec Nano et sans souris, j'ai mis en place une connexion SSH-remote sur mon serveur pour pouvoir faire des manipulations sur mon serveur √† partir : d'un IDE, et possiblement d'un autre ordinateur.</p><p>Je peux maintenant me connecter sur mon serveur √† partir de n'importe quel ordinateur et avoir une vue d'ensemble des fichiers en quelques clics, sans avoir √† &quot;ls&quot; dans tous les coins.</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/saveas.png" alt=""></p><p>Mais un probl√®me appara√Æt : Modifier et sauvegarder le fichier avec les commandes de l'IDE ne l'effectue pas en tant que 'sudo' (membre avec tous les droits). J'ai trouv√© une extension VSCode qui permet de &quot;Save as root&quot;, que j'ai li√© √† un shortcut au clavier. Pratique !</p><p>Cette √©tape n'√©tait pas n√©cessaire et a ajout√© une vuln√©rabilit√© √† mon serveur en ouvrant un nouveau port pour la connexion SSH. Mais ce genre de pratique reste courante et r√©aliste.</p><h3 id="configurer-les-logs" tabindex="-1"><a class="header-anchor" href="#configurer-les-logs"></a> Configurer les logs</h3><p>Configurer les logs s'est fait en quelques lignes seulement dans les fichiers .conf d'Apache. Il fallait d√©terminer le format des informations qu'on r√©cup√®re, ainsi que le fichier de sortie. Cette configuration a √©t√© rapide, mais la mise en place correcte des droits d'√©criture et de lecture corrects pour les fichiers et dossiers de logs a √©t√© compliqu√©e (pour moi en tout cas).</p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/conf.png" alt=""></p><h3 id="cr%C3%A9ation-de-la-cgi-pour-afficher-les-logs" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-de-la-cgi-pour-afficher-les-logs"></a> Cr√©ation de la CGI pour afficher les logs</h3><p>Je me suis ensuite renseign√©e rapidement sur les CGIs puisque cel√† me semblait √™tre une solution viable pour afficher des statistiques en direct √† partir de mes documents .log. J'ai alors √©crit un programme Python qui renvoie un html avec les IPs pr√©sents dans les logs. C'EST PAS TRES RGPD. Apr√®s 5 secondes de r√©flexion, j'ai r√©alis√© que √ßa ne semblait pas tr√®s √©thique. J'ai finalement masqu√© environ 75% des IPs pour pas qu'ils ne soient lisibles.</p><h3 id="geolite" tabindex="-1"><a class="header-anchor" href="#geolite"></a> GeoLite</h3><p>J'ai ensuite trouv√© une base de donn√©es gratuite appel√©e GeoLite qui permet d'associer une IP √† un pays, une r√©gion ou une ville. J'ai choisi les pays, car je n'ai pas plus d'int√©r√™t que √ßa √† savoir exactement d'o√π les IPs proviennent. Apr√®s avoir import√© et d√©compress√© la base de donn√©es sur mon serveur, je l'ai inclue dans mon script Python. Et tada ! Ca ne marche pas du tout.</p><h3 id="le-regex-c'est-pas-marrant" tabindex="-1"><a class="header-anchor" href="#le-regex-c'est-pas-marrant"></a> Le REGEX c'est pas marrant</h3><p>Il se trouve que la r√©cup√©ration d'IP √† partir de logs c'est pas √©vident. J'utilise une expression Regex, mais elle ne marchait pas correctement, et je me retrouvais avec des IPs au format non correct, et surtout je loupais pas mal d'IPs pour une raison inconnue (enfin si, je ne sais juste pas faire des regex propres). Donc j'ai bidouill√© une expression jusqu'√† ce que √ßa ait l'air de fonctionner...</p><p>Et l√† √ßa marche ! C'est ce que j'aurais dit si j'avais eu des r√©sultats √† ce moment.</p><h3 id="configuration-des-droits-de-lecture-et-d'%C3%A9criture" tabindex="-1"><a class="header-anchor" href="#configuration-des-droits-de-lecture-et-d'%C3%A9criture"></a> Configuration des droits de lecture et d'√©criture</h3><p>Je ne m'√©tais pas encore bien occup√©e de la configuration de l'acc√®s aux diff√©rents fichiers et dossiers. Sans rentrer dans trop de d√©tails, il a fallu :</p><ul><li>enable l'ex√©cution de CGI</li><li>cr√©er un nouveau groupe de droits &quot;Apache&quot;</li><li>donner la propri√©t√© des logs √† &quot;Apache&quot; et donc le droit en lecture et √©criture</li><li>donner la propri√©t√© de mon script Python √† &quot;Apache&quot; pour qu'il puisse l'√©x√©cuter</li><li>apr√®s avoir g√©r√© les fichiers, il faut faire d'autres manipulations de droits sur les dossiers...</li></ul><p>Et maintenant que j'ai fait √ßa... Je n'ai plus acc√®s aux dossiers. Il est temps de se connecter en tant que root pour faire les modifications n√©cessaires.</p><p>Ca a √©t√© une partie vraiment pas √©vidente pour moi, s√ªrement parce qu'on s'improvise pas professionel dans la dur√©e d'un POK. Le test de s√©curit√© a simplement √©t√© de voir avec diff√©rents profils utilisateurs quels accc√®s j'avais ou non aux fichiers.</p><p>Mais tout fonctionne comme pr√©vu maintenant. Au d√©tail pr√®s que les logs affich√©s ne sont pas n√©cessairement des &quot;attaques&quot;, mais au moins sont des visiteurs. En sachant que mon site n'est pas r√©f√©renc√©, n'a pas de nom, et est juste mon adresse IP que je n'avais au pr√©alable partag√© avec personne, on peut en d√©duire que les visites d√©tect√©es sont des robots parcourant le web, pas forc√©ment tous avec de bonnes intentions.</p><h2 id="fin-du-sprint-2" tabindex="-1"><a class="header-anchor" href="#fin-du-sprint-2"></a> Fin du Sprint 2</h2><ul><li><p>[X] Configuration d'une base de donn√©es et mise en place de la collecte des logs (3 heures) - Niveau de difficult√© : 5</p><ul><li>Installation et configuration d'une base de donn√©es.</li><li>Configuration des autorisations d'acc√®s √† la base de donn√©es.</li><li>Mise en place de la collecte des logs des acc√®s au serveur.</li></ul></li><li><p>[X] Cr√©ation de la CGI pour afficher les logs avec localisation (3 heures) - Niveau de difficult√© : 5</p><ul><li>Apprentissage et mise en ≈ìuvre des CGI pour cr√©er une page web dynamique.</li><li>Int√©gration de la base de donn√©es GeoLite pour la localisation des adresses IP.</li><li>Utilisation de GeoIP pour obtenir les informations de localisation.</li><li>Mise en forme des logs pour affichage sur la page web.</li></ul></li><li><p>[X] Gestion avanc√©e des autorisations et s√©curit√© du serveur (4 heures) - Niveau de difficult√© : 8</p><ul><li>Apprentissage et mise en ≈ìuvre de la gestion avanc√©e des autorisations (chmod).</li><li>Cr√©ation de groupes sp√©ciaux avec des acc√®s restreints pour renforcer la s√©curit√© du serveur.</li><li>Configuration et s√©curisation des acc√®s aux fichiers et r√©pertoires n√©cessaires pour la CGI.</li><li>Test de s√©curit√© pour s'assurer que seuls les utilisateurs autoris√©s peuvent acc√©der aux donn√©es sensibles.</li></ul></li></ul><h2 id="r%C3%A9sultats" tabindex="-1"><a class="header-anchor" href="#r%C3%A9sultats"></a> R√©sultats</h2><p>J'ai laiss√© tourner mon d√©tecteur pendant :</p><p><strong>1 heure</strong></p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/1heure.png" alt=""></p><p><strong>4 heures</strong></p><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Ledins-Cassandra/pok/temps-3/4heures.png" alt=""></p><p>J'ai filtr√© quelques adresses telles que 127.0.0.1 ou autre mais je n'ai pas enlev√© ma propre adresse, ce qui fausse le total. NEANMOINS ! On remarque que d√®s la premi√®re heure, il y a eu relativement beaucoup de visites sur le site (alors qu'il n'est pas r√©f√©renc√©, et que je n'ai envoy√© mon IP √† personne). Notamment une IP irlandaise qui a tent√© 100 acc√®s, probablement pour &quot;mapper&quot; le site et voir les URLs disponibles, mais j'avoue que je n'ai pas approfondi les recherches.</p><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"></a> Conclusion</h2><p>La mise en place du serveur a √©t√© vraiment diff√©rente de ce que j'ai pu imaginer au d√©part. Certaines choses ont √©t√© beaucoup plus rapides que pr√©vues et √† l'inverse, d'autre ont pris beaucoup plus de temps par manque de connaissances. Le cours R√©seaux me para√Æt absolument n√©cessaire pour r√©aliser ce travail. Quelques notions de pentest peuvent aussi aider √† se repr√©senter la nature et la forme des dangers, pour √©viter de faire n'importe quoi dans les r√©glages.</p><h3 id="conclusion-bis" tabindex="-1"><a class="header-anchor" href="#conclusion-bis"></a> Conclusion BIS</h3><p>La prochaine fois je choisis un mot de passe sudo un poil plus court, j'ai pass√© la moiti√© du POK √† le retaper dans tous les sens et √† faire des fautes de frappe.</p><h3 id="sources" tabindex="-1"><a class="header-anchor" href="#sources"></a> Sources</h3><ul><li><a href="https://dev.maxmind.com/geoip/geolite2-free-geolocation-data">Base de donn√©es GeoLite2 gratuite</a></li></ul><h3 id="horodateur" tabindex="-1"><a class="header-anchor" href="#horodateur"></a> Horodateur</h3><p><strong>18/02 :</strong> 3h, lecture, compr√©hension, installation de la VM <strong>22/02 :</strong> 7h, installation Apache et autres modules, bidouille routeur <strong>18/03 :</strong> 3h, configuration SSH, IDE, extension Sudo, configuration access log <strong>21/03 :</strong> 3h, apprentissage et codage CGI, r√©cup√©ration et mise en place GeoLite <strong>23/03 :</strong> 4h, Mise en place des groupes admin, droit de lecture, √©criture et √©x√©cution, test, correction de Regex</p></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>