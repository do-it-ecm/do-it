<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2023-2024/William_Lalanne/pok/temps-3/"><meta name="description" content="POK o√π je souhaite d√©velopper une petite application mobile."><meta property="og:description" content="POK o√π je souhaite d√©velopper une petite application mobile."><meta name="twitter:description" content="POK o√π je souhaite d√©velopper une petite application mobile."><meta name="author" content="William Lalanne"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, POK"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="Application mobile"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/William_Lalanne/pok/temps-3/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="Application mobile"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/William_Lalanne/pok/temps-3/"><title>Application mobile</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">Application mobile</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tag :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">POK</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">POK</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">William Lalanne</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2023-2024</span></div></div><p class="mb-4 text-lg">POK o√π je souhaite d√©velopper une petite application mobile.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2023-2024/William_Lalanne/">William Lalanne</a><span class="px-1">/</span><a href="/promos/2023-2024/William_Lalanne/pok/">POK de William Lalanne</a><span class="px-1">/</span><a href="/promos/2023-2024/William_Lalanne/pok/temps-3/">Application mobile</a></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Pr√©requis</b></p></div><div class="pl-8 mr-8"><p>Pr√©-requis : <strong>Niveau :</strong> Facile <strong>Pr√©requis :</strong> Pour ce POK, il est n√©cessaire d'avoir fait un peu de d√©veloppement mobile avec React Native pour comprendre les concepts abord√©s.</p></div></div><h2 id="objectif-de-ce-pok" tabindex="-1"><a class="header-anchor" href="#objectif-de-ce-pok"></a> Objectif de ce POK</h2><p>L'objectif de ce POK est de cr√©er une application mobile qui sera bas√©e sur le site web que l'on d√©veloppe dans le cadre du projet 3A. Cette application aura pour but de permettre aux centraliens de d√©poser des annonces. En seulement 20h je n'aurais pas le temps de r√©aliser toute l'application, je vais donc me concentrer essentiellement sur la partie connexion et inscription.</p><h2 id="les-%C3%A9tapes-%C3%A0-r%C3%A9aliser-pendant-le-sprint-1" tabindex="-1"><a class="header-anchor" href="#les-%C3%A9tapes-%C3%A0-r%C3%A9aliser-pendant-le-sprint-1"></a> Les √©tapes √† r√©aliser pendant le Sprint 1</h2><p>Pour le premier sprint j'aimerais r√©aliser les √©tapes suivantes :</p><ul><li>Cr√©ation du design de la page d'accueil sur Figma (‚òÖ‚òÜ‚òÜ‚òÜ 2h)</li><li>Cr√©ation du design de la page de connexion (‚òÖ‚òÜ‚òÜ‚òÜ 1h)</li><li>Cr√©ation du design de la page d'inscription (‚òÖ‚òÜ‚òÜ‚òÜ 1h)</li><li>Commencer √† faire les pages avec React Native (‚òÖ‚òÜ‚òÜ‚òÜ 4h)</li></ul><h2 id="sommaire-sprint-1" tabindex="-1"><a class="header-anchor" href="#sommaire-sprint-1"></a> Sommaire sprint 1</h2><ul><li><ol><li>Cr√©ation du design des premi√®res pages sur Figma</li></ol></li><li><ol start="2"><li>Front de la page d'accueil en React Native</li></ol></li><li><ol start="3"><li>Cr√©ation de la base de donn√©es</li></ol></li></ul><h2 id="cr%C3%A9ation-du-design" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-du-design"></a> Cr√©ation du design</h2><p>D'abord il fallait cr√©er la page d'accueil, sur cette page il faut le logo du site, un bouton pour se connecter, un bouton pour s'inscrire. Il faut aussi une petite pr√©sentation du site. Voil√† ce que je fais avec mes talents de designer :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/accueil.png" width="300" height="600"></div></div><p>Lorsqu'on clique sur le bouton &quot;Connexion&quot;, une nouvelle fen√™tre s'ouvre et permet √† l'utilisateur de se connecter. Il faut qu'il puisse rentrer son email, son mot de passe et cliquer sur le bouton. J'ai aussi rajout√© un lien <strong>Mot de passe oubli√©</strong> au cas o√π l'utilisateur veuille changer son mot de passe.</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/connexion.png" width="300" height="600"></div></div><p>Ensuite il faut faire la m√™me chose mais pour l'inscription, cette fois-ci on aura plus d'input car on va demander √† l'utilisateur plusieurs choses :</p><ul><li>son pr√©nom</li><li>son nom</li><li>son email</li><li>son mot de passe</li><li>la confirmation du mot de passe</li></ul><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/inscription.png" width="300" height="600"></div></div>![inscription](inscription.png)<p>Enfin, une fois que l'utilisateur est connect√©, il a acc√®s √† la page principale sur laquelle se trouve les annonces. Il doit pouvoir faire une recherche parmi les annonces pr√©sentes et il doit pouvoir en ajouter s'il le souhaite.</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/principale.png" width="300" height="600"></div></div><h2 id="frontend-de-la-page-d'accueil-en-react-native" tabindex="-1"><a class="header-anchor" href="#frontend-de-la-page-d'accueil-en-react-native"></a> Frontend de la page d'accueil en React Native</h2><p>Pour le frontend des pages, il faut que l'on puisse naviguer entre chacune d'entre elles, je vais donc cr√©er un component pour la page d'accueil, un component pour le pop-up de connexion et un component pour le pop-up de connexion.</p><p>Voici le component pour la page d'accueil :</p><pre class="language-js line-numbers"><code>


const Accueil = () => {
  return (
    <view style="" {="" backgroundcolor="" }]}="">
      <image source="{require('./logo.png')}" style="">
      <text style="">Bienvenue sur l'application Centrale M'Aide</text>
      <view style="">
        <custombutton title="CONNEXION" onpress="ouvertureModal">
        <custombutton title="INSCRIPTION">
      </custombutton></custombutton></view>
      <text style="">Une annonce √† d√©poser ? Vous √™tes au bon endroit</text>
    </image></view>
   );
};


</code></pre><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/accueil.jpg" width="300" height="600"></div></div><p>Maintenant ce qu'il faudrait c'est que quand on clique sur les boutons <strong>CONNEXION</strong> et <strong>INSCRIPTION</strong>, les fen√™tres s'ouvrent pour que l'utilisateur puisse se connecter ou s'inscrire comme vu sur les design pr√©c√©dent. J'ai cr√©√© la fen√™tre de connexion de la mani√®re suivante :</p><pre class="language-js line-numbers"><code>

<modal animationtype="slide" transparent="{true}" visible="{modalVisible}" onrequestclose="ouvertureModal">
    <view style="">
      <view style="">
        <touchableopacity style="" onpress="ouvertureModal">
          <text style="">X</text>
        </touchableopacity>
        <view>
          <text style="">Se connecter</text>
          <view style="">
            <text>Email*</text>
            <textinput style=""></textinput>
          </view>
          <view style="">
            <text>Mot de passe*</text>
            <textinput style=""></textinput>
          </view>
          <custombutton title="Se connecter"></custombutton>
        </view>
       </view>
    </view>
</modal>


</code></pre><p>La fen√™tre de connexion que l'on veut ouvrir est cr√©√©e gr√¢ce √† un component appel√© <strong>Modal</strong>. dans ce modal on met tous les √©l√©ments dont on a besoin :</p><ul><li>un bouton pour fermer la fen√™tre</li><li>le titre &quot;Se connecter&quot;</li><li>les input email et mot de passe</li><li>le bouton &quot;Connexion&quot;</li></ul><p>Il faut ensuite construire la logique, quand on clique sur le bouton connexion, cela d√©clenche une fonction appel√©e <strong>&quot;ouvertureModal&quot;</strong>. Voil√† √† quoi ressemble cette fonction :</p><pre class="language-js line-numbers"><code>

const [modalVisible, setModalVisible] = useState(false);

const ouvertureModal = () => {
  setModalVisible(!modalVisible);
};


</code></pre><p>La fonction permet de changer la visibilit√© de la fen√™tre √† chaque fois qu'elle est utilis√©e. Donc quand on appuie sur inscription la fen√™tre est visible.</p><p>Voil√† ce que √ßa donne :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/fenetre_connexion.jpg" width="300" height="600"></div></div><p>Ensuite on fait la m√™me chose mais avec l'inscription :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/inscription.jpg" width="300" height="600"></div></div><p>Voici le code associ√© :</p><pre class="language-js line-numbers"><code>

<modal animationtype="slide" transparent="{true}" visible="{inscriptionModalVisible}" onrequestclose="ouvertureInscriptionModal">
  <view style="">
    <view style="">
      <touchableopacity style="" onpress="ouvertureInscriptionModal">
        <text style="">X</text>
      </touchableopacity>
      <view>
        <text style="">S'inscrire</text>
            <view style="">
              <text>Pr√©nom*</text>
              <textinput style=""></textinput>
            </view>
            <view style="">
              <text>Nom*</text>
              <textinput style=""></textinput>
            </view>
            <view style="">
              <text>Email*</text>
              <textinput style=""></textinput>
            </view>
            <view style="">
              <text>Mot de passe*</text>
              <textinput style=""></textinput>
            </view>
            <view style="">
              <text>Confirmation du mot de passe*</text>
              <textinput style=""></textinput>
            </view>
            <custombutton title="S'inscrire"></custombutton>
      </view>
    </view>
  </view>
</modal>



</code></pre><h2 id="cr%C3%A9ation-de-la-base-de-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9ation-de-la-base-de-donn%C3%A9es"></a> Cr√©ation de la base de donn√©es</h2><p>Cette √©tape est tr√®s rapide √† r√©aliser, il faut cr√©er une base de donn√©es qu'on appelle par exemple POK3 avec la commande suivante :</p><pre class="language-sql line-numbers"><code>

CREATE DATABASE POK3;


</code></pre><p>Ensuite dans cette base de donn√©es on cr√©e les tables dont on a besoin. Dans mon cas j'ai seulement besoin d'une table <em><strong>utilisateurs</strong></em> dans laquelle je vais mettre les informations de chaque utilisateur : prenom, nom, adresse mail et mot de passe. Pour faire cela :</p><pre class="language-sql line-numbers"><code>

CREATE TABLE utilisateurs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    prenom VARCHAR(50),
    nom VARCHAR(50),
    email VARCHAR(100) UNIQUE,
    mdp VARCHAR(255)
);


</code></pre><p>Les donn√©es seront ensuites ajout√©es dans cette table.</p><h2 id="les-%C3%A9tapes-%C3%A0-r%C3%A9aliser-pendant-le-sprint-2" tabindex="-1"><a class="header-anchor" href="#les-%C3%A9tapes-%C3%A0-r%C3%A9aliser-pendant-le-sprint-2"></a> Les √©tapes √† r√©aliser pendant le Sprint 2</h2><ul><li>Faire le frotend de la page des annonces (‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ 4h)</li><li>Faire le backend avec la logique de l'inscription (‚òÖ‚òÖ‚òÜ‚òÜ 3h)</li><li>Faire le backend avec la logique de connexion (‚òÖ‚òÖ‚òÜ‚òÜ 3h)</li></ul><h2 id="modification-du-frontend-et-cr%C3%A9ation-de-la-derni%C3%A8re-page" tabindex="-1"><a class="header-anchor" href="#modification-du-frontend-et-cr%C3%A9ation-de-la-derni%C3%A8re-page"></a> Modification du frontend et cr√©ation de la derni√®re page</h2><p>Je devais lors de mon deuxi√®me sprint finir la cr√©ation des pages de l'application, j'en ai profit√© pour modifier l√©g√®rement celles que j'avais cr√©√© avant.</p><p>Je devais ensuite cr√©er la page sur laquelle figure les annonces, c'est aussi la page qui appara√Ætra apr√®s que l'utilisateur se soit connect√©. Voici √† quoi je suis arriver :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//William_Lalanne/pok/temps-3/Page_Annonce.jpg" width="300" height="600"></div></div><p>Voici le code qui permet d'arriver √† cette page:</p><pre class="language-js line-numbers"><code>

const Annonces = () => {

    return (
        <view>
            <view style="">
                <image source="{require('../logo.png')}" style="">
            </image></view>
            <text style="">Les Annonces</text>
            <barre></barre>

            <touchableopacity style="">
                <text style="">+  Annonce</text>
            </touchableopacity>

            <view style="">
                <view style="">
                    <text style="">Appartement libre R√©form√©s</text>
                    <view style="">
                        <image style="" source="{require('./date.png')}"></image>
                        <text style="">Octobre 2023</text>
                    </view>
                    <view style="">
                        <image style="" source="{require('./adresse.png')}"></image>
                        <text style="">8 rue Lafayette 13001</text>
                    </view>
                </view>

                <view style="">
                    <text style="">Donne table 4 personnes</text>
                    <view style="">
                        <image style="" source="{require('./date.png')}"></image>
                        <text style="">Mai 2O24</text>
                    </view>
                    <view style="">
                        <image style="" source="{require('./adresse.png')}"></image>
                        <text style="">45 All√©e L√©on Gambetta</text>
                    </view>
                </view>
            </view>

        </view>
    )
};

export default Annonces;


</code></pre><h2 id="backend-%3A-inscription" tabindex="-1"><a class="header-anchor" href="#backend-%3A-inscription"></a> Backend : inscription</h2><p>En ce qui concerne le backend, j'ai d√©cid√© d'utiliser express car je l'ai d√©j√† beaucoup utilis√© pour le projet 3A et c'est un langage avec lequel je suis √† l'aise. Cela me permettra de voir si le langage est adapt√©e au d√©veloppement mobile.</p><p>Voyons ainsi comment j'ai g√©r√© la logique d'inscription d'un utilisateur sur mon application.</p><p>Dans le front, l'utilisateur est invit√© √† rentrer son pr√©nom, son nom, son email, son mot de passe et √† confirmer son mot de passe pour s'inscrire. Les informations rentrer par l'utilisateur doivent √™tre r√©cup√©r√©es puis envoyer √† la bonne table de donn√©es.</p><p>D'abord, il faut se connecter √† la base de donn√©es cr√©√©e pr√©c√©demment :</p><pre class="language-js line-numbers"><code>

const connection = mysql.createConnection({
  host: 'localhost',
  user: 'williamlalanne',
  password: 'motdepasse',
  database: 'POK3'
});

connection.connect((err) => {
    if (err) {
        console.log("Erreur lors de la connextion √† la bdd", err);
    }
    else {
        console.log("Connexion √† la bdd r√©ussie");
    }
});

module.exports = connection;


</code></pre><p>D√®s qu'on voudra faire une requ√™te √† la base de donn√©es il faudra utiliser <em><strong>connection</strong></em> pour pouvoir s'y connecter.</p><p>Pour g√©rer la logique d'inscription, il faut cr√©er une route :</p><pre class="language-js line-numbers"><code>

// Endpoint pour l'inscription
route.post('/inscription', (req, res) => {
  const saltRounds = 10;
  const { prenom, nom, email, mot_de_passe} = req.body;

    bcrypt.hash(mot_de_passe, saltRounds, (err, hash) => {
        if (err) {
            console.error('Erreur lors du hachage du mot de passe :', err);
        }
        else {
            const sql = 'INSERT INTO utilisateurs (prenom, nom, email, mot_de_passe) VALUES (?, ?, ?, ?)';
            db.query(sql, [prenom, nom, email, hash,], (err, results) => {
                if (err) {
                    console.log('Erreur inscription', err);
                    return res.status(500).send('Erreur inscription');
                }
                console.log('Inscription succ√®s');
                return res.status(200).json(results);
            });
        }
    })
});


</code></pre><p>La requ√™te sql que l'on va faire √† la base de donn√©es est la suivante :</p><pre class="language-js line-numbers"><code>

const sql = 'INSERT INTO utilisateurs (prenom, nom, email, mot_de_passe) VALUES (?, ?, ?, ?)';


</code></pre><p>On ins√®re dans la table <strong>utilisateurs</strong> des donn√©es pour chaque colonne. Les valeurs des diff√©rents param√®tres seront celles entr√©es par l'utilisateur. Pour les r√©cup√©rer, on utilise un fetch :</p><pre class="language-js line-numbers"><code>

const formData = {
            prenom,
            nom,
            email,
            mot_de_passe: mdp,
        };

    try {
        const response = await fetch('http://192.168.1.45:8080/api/inscription', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData)
        });
        if (response.ok) {
            const responseData = await response.json();
            console.log(responseData.message);
            props.function();
        }
        else {
            console.error('Erreur lors de la cr√©ation du profil', response.statusText)
        }
    }


</code></pre><p>formData correspond aux donn√©es qui seront entr√©s par l'utilisateur.</p><h2 id="backend-%3A-connexion" tabindex="-1"><a class="header-anchor" href="#backend-%3A-connexion"></a> Backend : connexion</h2><p>Pour la connexion la logique est plus simple. L'utilisateur est invit√© √† entre son adresse mail et son mot de passe dans deux input puis √† appuyer sur connexion. Lorsqu'il appuie sur le bouton, son adresse mail est compar√©e √† celles se trouvant dans la base de donn√©es. Si elle y figure, il y a ensuite une comparaison entre le mot de passe entr√© par l'utilisateur et celui associ√© √† l'adresse mail se trouvant dans la base de donn√©es. Si l'adresse mail n'existe pas un message d'erreur appara√Æt.</p><p>Voici la route associ√©e √† la connexion :</p><pre class="language-js line-numbers"><code>

route.post('/connexion', (req, res) => {

  const { email, mot_de_passe } = req.body;
  console.log(req.body);

  const sql = 'SELECT * FROM utilisateurs WHERE email = ?';

  db.query(sql, [email], (err, results) => {
      if (err) {
          console.log('Erreur pour la connexion', err);
          res.status(500).json({ message: 'Erreur connexion' });
      }
      else {
          if (results.length > 0) {
              const user = results[0];
              console.log(user);
              bcrypt.compare(mot_de_passe, user.mot_de_passe, (bcryptErr, passwordMatch) => {
                  if (bcryptErr) {
                      console.error('Erreur lors de la comparaison des mots de passe', bcryptErr);
                      res.status(401).json({ message: 'Erreur lors de la connexion' });
                  } else {
                      if (passwordMatch) {
                          console.log('Email de l\'utilisateur:', user.email);
                          const token = jwt.sign({ email: user.email }, secret, { expiresIn: '1d' });
                          console.log('Token g√©n√©r√©:', token);
                          res.status(200).json({ token });
                      }
                      else {
                          res.status(401).json({ message: 'Mot de passe incorrect' });
                      }
                  }
              });
          }
          else {
              res.status(404).json({ message: 'Utilisateur non trouv√©' });
          }
      }
  });

});


</code></pre><p>Pour g√©rer les r√©sultats de la requete c√¥t√© front :</p><pre class="language-js line-numbers"><code>

const handleConnection = async () => {

        const formData = {
            email,
            mot_de_passe: mdp,
        };

        try {
            const response = await fetch('http://192.168.0.23:8080/api/connexion', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });
            if (response.ok) {
                const responseData = await response.json();
                console.log(responseData.message);
                navigation.navigate('Annonces');
            }
            else {
                console.error('Erreur lors de la connexion jjjjj: ', response.statusText);
            }
        }
        catch (error) {
            console.error('Erreur lors de la requete: ', error);
        }
    };


</code></pre><p>Pour expliquer un peu le code, si la requ√™te r√©ussie, donc si response.ok, alors on change de page et au lieu d'√™tre sur la page accueil, on passe sur la page Annonces.</p><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"></a> Conclusion</h2><p>Pour une premi√®re utilisation de React Native, j'ai trouv√© que c'est un langage facile √† prendre en main et tr√®s pratique, notamment le syst√®me de components qui peuvent √™tre r√©utilis√©s. En revanche, pour observer le resultat et voir ce que donne l'application sur un t√©l√©phone, expo n'est pas une solution que je conseillerai. Il faut prendre son t√©l√©phone √† chaque fois, √™tre connect√© sur la m√™me wifi que son ordinateur, prendre le qrcode en photo... Cela fait perdre pas mal de temps. En cas de bug, expo ne fournit pas assez d'informations pour comprendre d'o√π √ßa vient. J'aurais aim√© avoir plus de temps pour continuer √† d√©velopper l'application.</p><h2 id="horodatage" tabindex="-1"><a class="header-anchor" href="#horodatage"></a> Horodatage</h2><ul><li><p>Sprint 1 : Cr√©ation du design des pages sur figma : 4h Cr√©ation des pages avec React Native : 4h Cr√©ation de la base de donn√©es : 10min</p></li><li><p>Sprint 2 : Reprise du front et cr√©ation de la page Annonces avec RN : 4h Logique d'inscription avec Express : 3h30 Logique de connexion avec Express : 2h30</p></li></ul></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>