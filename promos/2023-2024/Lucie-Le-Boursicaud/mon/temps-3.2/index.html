<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2023-2024/Lucie-Le-Boursicaud/mon/temps-3.2/"><meta name="description" content="Ce MON va m&#39;apprendre √† programmer √† l&#39;aide de tests en utilisant le language Python."><meta property="og:description" content="Ce MON va m&#39;apprendre √† programmer √† l&#39;aide de tests en utilisant le language Python."><meta name="twitter:description" content="Ce MON va m&#39;apprendre √† programmer √† l&#39;aide de tests en utilisant le language Python."><meta name="author" content="Lucie Le Boursicaud"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, MON, tests, programmation, python"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="La programmation par les tests"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/Lucie-Le-Boursicaud/mon/temps-3.2/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="La programmation par les tests"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2023-2024/Lucie-Le-Boursicaud/mon/temps-3.2/"><title>La programmation par les tests</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">La programmation par les tests</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tags :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">MON</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">tests</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">programmation</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">python</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">MON</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Lucie Le Boursicaud</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2023-2024</span></div></div><p class="mb-4 text-lg">Ce MON va m'apprendre √† programmer √† l'aide de tests en utilisant le language Python.</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2023-2024/Lucie-Le-Boursicaud/">Lucie Le Boursicaud</a><span class="px-1">/</span><a href="/promos/2023-2024/Lucie-Le-Boursicaud/mon/">MON de Lucie Le Boursicaud</a><span class="px-1">/</span><a href="/promos/2023-2024/Lucie-Le-Boursicaud/mon/temps-3.2/">La programmation par les tests</a></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p>Niveau interm√©diaire</p></div><div class="pl-8 mr-8"><p>Connaitre python.</p></div></div><h3 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"></a> Introduction</h3><p>Pour ce MON je vais donc me baser sur le cours <a href="https://francoisbrucker.github.io/cours_informatique/cours/coder-et-d%C3%A9velopper/projet-TDD/">Programmation par les tests</a> de Fran√ßois Brucker. On utilisera tout au long des chapitres le language Python.</p><h2 id="sommaire" tabindex="-1"><a class="header-anchor" href="#sommaire"></a> Sommaire</h2><ol><li>Cours de Fran√ßois Brucker</li><li>Exercices</li></ol><h3 id="c'est-quoi-la-programmation-par-les-tests-%3F" tabindex="-1"><a class="header-anchor" href="#c'est-quoi-la-programmation-par-les-tests-%3F"></a> C'est quoi la programmation par les tests ?</h3><p>La programmation par tests (Test-Driven Development ou TDD en anglais), c'est une approche de d√©veloppement logiciel o√π les tests sont √©crits avant m√™me que le code de production ne soit impl√©ment√©. Pour mettre en place cette m√©thode on suit g√©n√©ralement trois √©tapes :</p><ol><li><p><strong>√âcriture du test (Red)</strong> : Dans cette premi√®re √©tape, on <strong>r√©dige un test unitaire</strong> qui d√©finit le comportement attendu d'une fonction ou d'un module. √Ä ce stade, le code de production n'existe pas encore, donc <strong>le test √©chouera initialement.</strong></p></li><li><p><strong>Impl√©mentation du code de production (Green)</strong> : Apr√®s avoir √©crit le test, on <strong>cr√©e le code minimal</strong> n√©cessaire pour faire passer le test avec succ√®s. L'objectif est de produire un code qui satisfait les exigences du test, sans ajouter de fonctionnalit√©s suppl√©mentaires, <strong>seulement le n√©cessaire.</strong></p></li><li><p><strong>Refactoring (Refactor)</strong> : Une fois que le test passe avec succ√®s, on peut ensuite r√©organiser et am√©liorer le code sans alt√©rer son comportement externe. Cela implique souvent d'√©liminer les <strong>duplications de code</strong>, <strong>d'am√©liorer la lisibilit√©</strong> ou <strong>d'optimiser les performances</strong>.</p></li></ol><p>Ce cycle se r√©p√®te continuellement, chaque nouvelle fonctionnalit√© ou modification du code √©tant accompagn√©e de l'√©criture de nouveaux tests, garantissant ainsi que les changements ne causent pas de r√©gressions ou de dysfonctionnements dans le syst√®me existant.</p><h3 id="pourquoi-c'est-bien-%3F" tabindex="-1"><a class="header-anchor" href="#pourquoi-c'est-bien-%3F"></a> Pourquoi c'est bien ?</h3><p>La programmation par tests pr√©sente plusieurs avantages :</p><ul><li><p><strong>Fiabilit√© accrue</strong> : En ayant une suite compl√®te de tests automatis√©s, on peut √™tre plus confiants dans la stabilit√© et la fiabilit√© de notre code.</p></li><li><p><strong>D√©couverte pr√©coce des erreurs</strong> : En √©crivant les tests en premier, on est plus susceptible de d√©tecter les erreurs d√®s le d√©but du processus de d√©veloppement, ce qui permet de les corriger rapidement et √† moindre co√ªt.</p></li><li><p><strong>Conception modulaire</strong> : Cette approche encourage la conception modulaire en favorisant la cr√©ation de code testable, ce qui conduit g√©n√©ralement √† des architectures logicielles plus propres et mieux structur√©es.</p></li><li><p><strong>Documentation vivante</strong> : Les tests servent √©galement de documentation vivante du comportement attendu du code, √ßa permet de mieux comprendre le code pour quelqu'un qui ne la pas √©crit de sa main.</p></li></ul><p>Ainsi, la programmation par tests est une m√©thode de d√©veloppement qui vise √† am√©liorer la qualit√© du code en √©crivant des tests automatis√©s avant d'√©crire le code de production, favorisant ainsi la fiabilit√©, la d√©tection pr√©coce des erreurs et une meilleure conception logicielle. C'est pour √ßa que c'est bien de s'y int√©resser, de bien comprendre son principe et de prendre le temps de s'exercer parce que ce fonctionnement n'est pas tr√®s intuitif au d√©bu (on a tr√®s souvent envie de coder directement la fonction &quot;compliqu√©&quot; car on sait les soucis que l'on peut rencontrer).</p><h2 id="cours-de-fran%C3%A7ois-brucker" tabindex="-1"><a class="header-anchor" href="#cours-de-fran%C3%A7ois-brucker"></a> Cours de Fran√ßois Brucker</h2><h3 id="1.-d%C3%A9part" tabindex="-1"><a class="header-anchor" href="#1.-d%C3%A9part"></a> 1. D√©part</h3><p>Dans ce premier chapitre on met en place le projet de d√©veloppement pour s'initier √† la programmation par test.</p><ul><li><p><strong>D√©finition des objectifs principaux : </strong>Avant de commercer √† √©crire du code, il est crucial de d√©finir ce que l'applucation doit accomplir. Cela peut-√™tre sous la forme d'une liste de t√¢ches √† r√©aliser, appel√©e aussi backlog ou todo-list.</p></li><li><p><strong>Cr√©ation du projet : </strong>On utilise l'environnement de d√©veloppement VSCode. On cr√©e un nouveau dossier pour le projet, le fichier <strong>test_monnaie.py</strong> et je t√©l√©charge la biblioth√®que python <strong>pytest</strong> que l'on utilise pour faire les tests.</p></li><li><p><strong>Ecriture du premier test :</strong> Selon la m√©thode TDD, on commence par √©crire un test qui sp√©cifie le comportement attendu du code. Dans cet exemple, le premier test concerne la multiplication de 5 dollars par 2.</p></li><li><p><strong>Analyse du test :</strong> L'√©criture du test soul√®ve des questions sur l'impl√©mentation du code, ce qui conduit √† une extension de la todo-list avec de nouveaux √©l√©ments √† consid√©rer.</p></li><li><p><strong>It√©rations de d√©veloppement :</strong> En suivant le cycle du TDD (test-driven development), on impl√©mente juste assez de code pour que le test passe, puis on r√©factorise pour supprimer les duplications et am√©liorer la conception du code.</p></li><li><p><strong>R√©sum√© du processus TDD :</strong> La m√©thode g√©n√©rale du TDD est r√©sum√©e comme suit : √©crire un test, le faire √©chouer (en rouge), √©crire juste assez de code pour le faire passer (en vert), puis r√©factoriser pour am√©liorer le code tout en maintenant les tests verts.</p></li><li><p><strong>Pattern TDD : </strong>L'utilisation du &quot;fake it&quot;, o√π l'on duplique simplement le r√©sultat attendu dans le code, est mentionn√©e comme une strat√©gie utile dans le processus TDD.</p></li></ul><p>Gr√¢ce √† ce chapitre on a introduit les bases de la programmation par test en mettant l'accent sur la cr√©ation de tests avant l'√©criture de code fonctionnel, et en d√©crivant un processus it√©ratif pour d√©velopper et am√©liorer le code de mani√®re incr√©mentale.</p><h3 id="2.-value-object" tabindex="-1"><a class="header-anchor" href="#2.-value-object"></a> 2. Value Object</h3><p>Ce chapitre se concentre sur la mise en ≈ìuvre d'objets de valeur (value objects) dans le processus de d√©veloppement.</p><ul><li><p><strong>Priorit√©s dans le d√©veloppement :</strong> L'approche pr√©conis√©e consiste √† d'abord assurer le fonctionnement correct de l'application (that works), avant de se concentrer sur l'optimisation du code (clean code).</p></li><li><p><strong>Todo list :</strong> L'√©laboration d'une liste de t√¢ches √† effectuer permet de hi√©rarchiser les actions √† entreprendre. Dans cet exemple, la priorit√© est donn√©e √† la multiplication des devises, suivie de la s√©curisation de la classe Dollar en tant qu'objet de valeur.</p></li><li><p><strong>Impl√©mentation des tests :</strong> Les tests sont utilis√©s pour sp√©cifier le comportement attendu du code. Dans cet exemple, des tests sont √©crits pour v√©rifier que la multiplication des dollars produit le r√©sultat escompt√©.</p></li><li><p><strong>D√©tection de &quot;code smell&quot; : </strong>La lecture du code peut r√©v√©ler des signes de mauvaise conception ou de comportement inhabituel, appel√©s &quot;code smell&quot;. Dans ce cas, l'usage de valeurs mutables pour repr√©senter l'argent est consid√©r√© comme probl√©matique.</p></li><li><p><strong>Utilisation des value objects :</strong> Les objets de valeur sont des objets immuables, qui une fois cr√©√©s ne peuvent pas √™tre modifi√©s. Cette propri√©t√© les rend s√©curis√©s et pr√©visibles dans leur utilisation.</p></li><li><p><strong>Impl√©mentation de la m√©thode fois :</strong> En suivant la m√©thodologie TDD, une impl√©mentation √©vidente de la m√©thode fois est propos√©e, qui retourne un nouvel objet Dollar r√©sultant de la multiplication.</p></li><li><p><strong>Pattern de TDD :</strong> Impl√©mentation √©vidente : L'impl√©mentation directe du test, sans trop de r√©flexion, est appel√©e &quot;obvious implementation&quot;. Cela implique de coder la solution la plus √©vidente pour faire passer le test.</p></li></ul><p>Gr√¢ce √† ce chapitre on a mis en lumi√®re l'importance de garantir le bon fonctionnement de l'application avant de se pr√©occuper de son optimisation, et on a introduit la notion d'objets de valeur comme moyen de s√©curiser et de rendre pr√©visible le comportement du code.</p><h3 id="3.-%3D%3D" tabindex="-1"><a class="header-anchor" href="#3.-%3D%3D"></a> 3. ==</h3><p>Le troisi√®me chapitre se concentre sur l'impl√©mentation de la comparaison d'√©galit√© (==) entre les objets Dollar.</p><ul><li><p><strong>Todo list : </strong>La mise en place d'une liste de t√¢ches guide le d√©veloppement. Dans cet exemple, l'impl√©mentation de l'√©galit√© entre les objets Dollar est ajout√©e √† la liste des t√¢ches √† r√©aliser.</p></li><li><p><strong>√âcriture des tests : </strong>Des tests sont √©crits pour sp√©cifier le comportement attendu de l'op√©rateur d'√©galit√© (==) entre deux objets Dollar.</p></li><li><p><strong>Utilisation de la technique &quot;fake it&quot; : </strong>Pour faire passer les tests, une impl√©mentation initiale est r√©alis√©e en retournant toujours True dans la m√©thode <strong>eq</strong>. Cela permet de passer les tests mais ne fournit pas une comparaison correcte.</p></li><li><p><strong>Triangulation : </strong>Pour supprimer les duplications non √©videntes, la technique de triangulation est utilis√©e. Cela implique d'√©crire un nouveau test qui devrait retourner False pour l'√©galit√© entre deux objets Dollar.</p></li><li><p><strong>Suppression des duplications : </strong>En ajoutant un test suppl√©mentaire, les duplications dans la m√©thode <strong>eq</strong> deviennent √©videntes et peuvent √™tre supprim√©es. Cela conduit √† une impl√©mentation correcte de la m√©thode d'√©galit√©.</p></li><li><p><strong>Todo list mise √† jour : </strong>√Ä mesure que de nouveaux probl√®mes sont identifi√©s, ils sont ajout√©s √† la liste des t√¢ches √† effectuer pour une future r√©solution.</p></li></ul><p>Ce chapitre illustre la d√©marche it√©rative du TDD pour impl√©menter la comparaison d'√©galit√© entre les objets Dollar, en mettant l'accent sur la d√©tection des duplications et la r√©solution progressive des probl√®mes identifi√©s.</p><h3 id="4.-mul" tabindex="-1"><a class="header-anchor" href="#4.-mul"></a> 4. <strong>mul</strong></h3><p>Le quatri√®me chapitre se concentre sur l'impl√©mentation de la m√©thode sp√©ciale <strong>mul</strong> pour permettre la multiplication des objets Dollar.</p><ul><li><p><strong>Todo list :</strong> La mise √† jour de la liste des t√¢ches inclut l'impl√©mentation de la m√©thode sp√©ciale <strong>mul</strong> pour permettre la multiplication des objets Dollar.</p></li><li><p><strong>√âcriture des tests : </strong>Les tests sont adapt√©s pour inclure l'utilisation de l'op√©rateur de multiplication (*) entre les objets Dollar et un scalaire.</p></li><li><p><strong>Obvious implementation : </strong>Une impl√©mentation initiale est r√©alis√©e pour faire passer les tests. Dans cet exemple, la multiplication d'un objet Dollar par un scalaire retourne un nouvel objet Dollar avec le montant correct.</p></li><li><p><strong>Todo list mise √† jour : </strong>Apr√®s avoir compl√©t√© l'impl√©mentation de la m√©thode sp√©ciale <strong>mul</strong>, la liste des t√¢ches est mise √† jour pour refl√©ter les prochaines √©tapes √† r√©aliser.</p></li></ul><p>ce chapitre illustre comment utiliser la m√©thodologie TDD pour impl√©menter la multiplication des objets Dollar en ajoutant la m√©thode sp√©ciale <strong>mul</strong>. Ce processus met en √©vidence la progression it√©rative du d√©veloppement logiciel en identifiant les t√¢ches √† accomplir et en les r√©alisant une par une.</p><h3 id="5.-privacy" tabindex="-1"><a class="header-anchor" href="#5.-privacy"></a> 5. Privacy</h3><p>Le cinqui√®me chapitre se concentre sur la confidentialit√© de l'attribut montant et sur la mani√®re de tester les objets Dollar en se concentrant sur leur comportement externe plut√¥t que sur leur impl√©mentation interne.</p><ul><li><p><strong>Todo list mise √† jour : </strong>La confidentialit√© de l'attribut montant est ajout√©e √† la liste des t√¢ches √† accomplir.</p></li><li><p><strong>√âcriture des tests : </strong>Les tests sont adapt√©s pour ne pas faire r√©f√©rence directe √† l'attribut montant. Ils se concentrent uniquement sur le comportement des objets Dollar, en utilisant les op√©rateurs d√©finis (<strong>mul</strong>) pour les tester.</p></li><li><p><strong>Bonnes pratiques de test : </strong>Il est soulign√© qu'il est pr√©f√©rable de tester le comportement d'une classe plut√¥t que de ses attributs internes. Cela garantit que les tests restent robustes m√™me lorsque l'impl√©mentation de la classe change.</p></li><li><p><strong>Progression it√©rative :</strong> √Ä mesure que de nouveaux tests sont ajout√©s et que l'impl√©mentation √©volue, la liste des t√¢ches est mise √† jour pour refl√©ter les prochaines √©tapes √† r√©aliser.</p></li></ul><p>Ce chapitre illustre l'importance de tester le comportement externe des objets Dollar et de maintenir la confidentialit√© de leur impl√©mentation interne. La m√©thodologie TDD est utilis√©e pour guider le d√©veloppement de mani√®re it√©rative, en se concentrant sur les fonctionnalit√©s √† impl√©menter et en v√©rifiant leur fonctionnement par le biais de tests.</p><h3 id="6.-dollar" tabindex="-1"><a class="header-anchor" href="#6.-dollar"></a> 6. Dollar</h3><p>Dans ce chapitre, l'objectif est de commencer √† introduire les Francs dans le syst√®me de gestion de la monnaie.</p><ul><li><p><strong>Todo list mise √† jour :</strong> L'objectif ambitieux de la conversion de $5 + 2.5CHF = $10 est d√©coup√© en sous-t√¢ches. La premi√®re √©tape est de permettre la multiplication de 5 CHF par 2 pour obtenir 10 CHF.</p></li><li><p><strong>√âcriture des tests :</strong> Deux nouveaux tests sont ajout√©s pour les Francs, similaire √† ceux des Dollars mais adapt√©s √† cette nouvelle devise.</p></li><li><p><strong>Impl√©mentation des Francs :</strong> Pour faire passer les tests, une classe Franc est cr√©√©e en copiant/collant la classe Dollar et en la modifiant pour refl√©ter les caract√©ristiques des Francs.</p></li><li><p><strong>Todo list mise √† jour : </strong>Apr√®s avoir fait passer les tests, la todo list est mise √† jour pour refl√©ter les prochaines t√¢ches √† accomplir, notamment la gestion de la duplication entre les classes Dollar et Franc.</p></li></ul><p>Ce chapitre montre comment d√©couper des t√¢ches ambitieuses en √©tapes plus g√©rables et comment commencer √† int√©grer de nouvelles fonctionnalit√©s dans le syst√®me en utilisant la m√©thodologie TDD. La todo list sert de guide pour s'assurer que toutes les √©tapes n√©cessaires sont prises en compte et r√©alis√©es de mani√®re it√©rative.</p><h3 id="7.-m%C3%AAme-%3D%3D-pour-tous" tabindex="-1"><a class="header-anchor" href="#7.-m%C3%AAme-%3D%3D-pour-tous"></a> 7. m√™me == pour tous</h3><p>Ce chapitre se concentre sur l'√©limination de la duplication du code identique pr√©sent dans les classes Dollar et Franc en les faisant h√©riter d'une classe m√®re Monnaie.</p><ul><li><p><strong>Todo list mise √† jour : </strong>Un nouvel item est ajout√© pour √©liminer la duplication du code identique pr√©sent dans les classes Dollar et Franc.</p></li><li><p><strong>Cr√©ation de la classe abstraite Monnaie :</strong> Une classe abstraite Monnaie est cr√©√©e pour englober les fonctionnalit√©s communes des classes Dollar et Franc. Initialement, cette classe ne contient aucune m√©thode.</p></li><li><p><strong>V√©rification des tests :</strong> Les tests sont ex√©cut√©s pour v√©rifier qu'ils passent initialement.</p></li><li><p><strong>H√©ritage de Dollar et Franc de la classe Monnaie :</strong> Les classes Dollar et Franc sont modifi√©es pour h√©riter de la classe Monnaie.</p></li><li><p><strong>Remont√©e de la m√©thode __init__ : </strong>Comme la m√©thode __init__ est identique dans les classes Dollar et Franc, elle est remont√©e dans la classe m√®re Monnaie.</p></li><li><p><strong>Ajout de tests d'√©galit√© pour les Francs :</strong> Des tests d'√©galit√© et de diff√©rence sont ajout√©s pour les Francs afin de garantir que le mouvement de la m√©thode __eq__ dans la classe m√®re Monnaie se d√©roule correctement.</p></li><li><p><strong>Todo list mise √† jour :</strong> La todo list est mise √† jour pour inclure la comparaison entre les Francs et les Dollars.</p></li><li><p><strong>Remont√©e de la m√©thode __eq__ :</strong> La m√©thode __eq__ est finalement remont√©e dans la classe m√®re Monnaie pour √©liminer la duplication du code.</p></li></ul><p>Ce chapitre montre l'importance de l'√©limination de la duplication du code pour maintenir un code propre et √©viter les r√©p√©titions inutiles. L'utilisation de l'h√©ritage et de la remont√©e des m√©thodes communes dans une classe m√®re permet d'optimiser la structure du code.</p><h3 id="8.-franc%2Fdollar" tabindex="-1"><a class="header-anchor" href="#8.-franc%2Fdollar"></a> 8. Franc/Dollar</h3><p>Ce chapitre se concentre sur la comparaison entre les objets de classe Franc et Dollar.</p><ul><li><p><strong>Todo list mise √† jour :</strong> Un nouvel item est ajout√© pour comparer les Francs et les Dollars.</p></li><li><p><strong>Ajout d'un test de comparaison :</strong> Un test est ajout√© pour v√©rifier que des Francs ne sont pas √©gaux √† des Dollars.</p></li><li><p><strong>Correction de la m√©thode __eq__ :</strong> La m√©thode __eq__ est modifi√©e pour v√©rifier que les classes des deux objets √† comparer sont diff√©rentes.</p></li><li><p><strong>R√©flexion sur la conception :</strong> Une r√©flexion est men√©e sur la mani√®re dont la comparaison est effectu√©e. Il est soulign√© que la comparaison actuelle est bas√©e sur les classes des objets plut√¥t que sur leur signification r√©elle en termes de devises. Cela soul√®ve des pr√©occupations quant √† la conception du code.</p></li><li><p><strong>Mise √† jour de la todo list :</strong> Un nouvel item est ajout√© pour explorer une meilleure fa√ßon de g√©rer la comparaison des devises, en utilisant leur signification plut√¥t que leur classe.</p></li></ul><p>Ce chapitre met en lumi√®re l'importance de coder en tenant compte de la signification des objets plut√¥t que de leur impl√©mentation interne. La todo list est mise √† jour pour r√©fl√©chir √† une meilleure fa√ßon de g√©rer la comparaison des devises.</p><h3 id="9.-duplication-franc%2Fdollar" tabindex="-1"><a class="header-anchor" href="#9.-duplication-franc%2Fdollar"></a> 9. Duplication Franc/Dollar</h3><p>Dans ce chapitre, l'objectif est de supprimer la duplication entre les classes Franc et Dollar en les rempla√ßant par une seule classe, tout en garantissant que toutes les fonctionnalit√©s sont pr√©serv√©es gr√¢ce aux tests.</p><ul><li><p><strong>Mise √† jour de la todo list :</strong> Un nouvel item est ajout√© pour explorer la possibilit√© de supprimer les tests de la classe Franc.</p></li><li><p><strong>Utilisation du design pattern factory :</strong> Les tests sont modifi√©s pour utiliser une fonction factory, <code>dollar</code>, qui cr√©e des objets de la classe Dollar.</p></li><li><p><strong>Impl√©mentation de la fonction <code>dollar</code> :</strong> Une fonction <code>dollar</code> est ajout√©e dans le module <code>monnaie</code> pour cr√©er des objets de la classe Dollar.</p></li><li><p><strong>Remplacement des r√©f√©rences √† Dollar :</strong> Toutes les r√©f√©rences √† la classe Dollar dans les tests sont remplac√©es par des appels √† la fonction <code>dollar</code> du module <code>monnaie</code>.</p></li><li><p><strong>Question sur l'utilit√© des tests de Franc :</strong> Une r√©flexion est men√©e sur l'utilit√© de conserver les tests de la classe Franc, √©tant donn√© que les deux classes Franc et Dollar seront unifi√©es. Cette question est ajout√©e √† la todo list.</p></li><li><p><strong>Remplacement des r√©f√©rences √† Franc :</strong> De mani√®re similaire √† Dollar, toutes les r√©f√©rences √† la classe Franc dans les tests sont remplac√©es par des appels √† une fonction factory <code>franc</code> du module <code>monnaie</code>.</p></li><li><p><strong>R√©flexion sur la suppression des duplications :</strong> Bien que les tests aient √©t√© modifi√©s pour utiliser le factory, des duplications persistent entre Franc et Dollar dans le code. Cependant, avant de les supprimer, une r√©flexion est men√©e sur la mani√®re de les remplacer par quelque chose qui les unifie.</p></li><li><p><strong>Mise √† jour de la todo list :</strong> Un nouvel item est ajout√© pour g√©rer la suppression des duplications entre Franc et Dollar.</p></li></ul><p>Ce chapitre montre comment utiliser le design pattern factory pour remplacer les r√©f√©rences directes aux classes Franc et Dollar par des fonctions de cr√©ation d'objets, en pr√©paration de leur unification.</p><h3 id="10.-devise" tabindex="-1"><a class="header-anchor" href="#10.-devise"></a> 10. Devise</h3><p>Dans ce chapitre, l'objectif est de remplacer les classes Franc et Dollar par une seule classe Monnaie tout en maintenant les fonctionnalit√©s existantes et en √©liminant les duplications de code.</p><ul><li><p><strong>Mise √† jour de la todo list :</strong> Un nouvel item est ajout√© pour explorer la possibilit√© de supprimer les tests de la classe Franc.</p></li><li><p><strong>Ajout de l'attribut devise :</strong> Un attribut <code>devise</code> est ajout√© aux classes Franc et Dollar pour distinguer les devises.</p></li><li><p><strong>Refactoring pattern : Pull Up Field : </strong>L'attribut <code>devise</code> est remont√© dans la classe Monnaie √† l'aide du pattern de refactoring Pull Up Field.</p></li><li><p><strong>Refactoring pattern : Pull Up Method :</strong> Les constructeurs des classes Franc et Dollar sont modifi√©s pour avoir la m√™me signature que celui de la classe Monnaie, puis les m√©thodes de cr√©ation d'objets (factory methods) sont utilis√©es pour cr√©er des objets Monnaie. Les m√©thodes <code>__mul__</code> des classes Franc et Dollar sont √©galement modifi√©es pour utiliser les factory methods.</p></li><li><p><strong>Uniformisation des constructeurs :</strong> Les constructeurs des classes Franc et Dollar sont rendus identiques en ajoutant un param√®tre de devise utilis√© pour cr√©er des objets Monnaie.</p></li><li><p><strong>Suppression des constructeurs :</strong> Les constructeurs des classes Franc et Dollar sont supprim√©s une fois qu'ils sont devenus identiques √† celui de la classe Monnaie.</p></li></ul><p>Ce chapitre montre comment unifier les classes Franc et Dollar en une seule classe Monnaie tout en maintenant les fonctionnalit√©s et en √©liminant les duplications de code, gr√¢ce √† l'utilisation de patterns de refactoring et de bonnes pratiques de conception.</p><h3 id="11.-unification-de-*" tabindex="-1"><a class="header-anchor" href="#11.-unification-de-*"></a> 11. Unification de *</h3><p>Dans ce chapitre, l'objectif √©tait de supprimer les m√©thodes de multiplication <code>__mul__</code> des classes Franc et Dollar pour les unifier dans la classe Monnaie.</p><ul><li><p><strong>Mise √† jour de la todo list :</strong> Un nouvel item est ajout√© pour supprimer les duplications entre Franc et Dollar.</p></li><li><p><strong>Modification de <code>__mul__</code> dans Monnaie :</strong> Une m√©thode <code>__mul__</code> est ajout√©e dans la classe Monnaie pour remplacer les m√©thodes <code>__mul__</code> des classes Franc et Dollar.</p></li><li><p><strong>Suppression de <code>__mul__</code> dans Franc :</strong> La m√©thode <code>__mul__</code> est supprim√©e de la classe Franc.</p></li><li><p><strong>Correction de <code>__eq__</code> dans Monnaie : </strong>La m√©thode <code>__eq__</code> de la classe Monnaie est modifi√©e pour utiliser l'attribut <code>devise</code> plut√¥t que la classe elle-m√™me.</p></li><li><p><strong>Suppression de <code>__mul__</code> dans Dollar :</strong> La m√©thode <code>__mul__</code> est √©galement supprim√©e de la classe Dollar.</p></li><li><p><strong>Utilisation du constructeur de Monnaie :</strong> Les factory methods pour cr√©er des objets sont mises √† jour pour utiliser le constructeur de la classe Monnaie.</p></li><li><p><strong>Suppression des classes Franc et Dollar :</strong> Finalement, les classes Franc et Dollar sont supprim√©es une fois que toutes les fonctionnalit√©s sont unifi√©es dans la classe Monnaie.</p></li></ul><p>Ce chapitre montre comment unifier les m√©thodes de multiplication <code>__mul__</code> des classes Franc et Dollar dans la classe Monnaie, en √©liminant les duplications de code et en maintenant les fonctionnalit√©s existantes.</p><p>PS : il faut bien penser √† retirer l'importation des classes Dollar et Franc qui n'existe plus du fichier des tests sinon √ßa marche pas :)</p><h3 id="12.-addition-1%2F3" tabindex="-1"><a class="header-anchor" href="#12.-addition-1%2F3"></a> 12. Addition 1/3</h3><p>Dans cette √©tape, nous avons ajout√© la fonctionnalit√© d'addition pour une unique devise.</p><ul><li><p><strong>Todo list mise √† jour :</strong> Un nouvel item a √©t√© ajout√© pour traiter l'addition de deux montants de la m√™me devise.</p></li><li><p><strong>√âcriture du test d'addition : </strong>Un test a √©t√© √©crit pour v√©rifier que l'addition de $5 et $2 est √©gale √† $7 en utilisant la m√©thode <code>plus</code> de la classe Monnaie. Cela garantit que l'op√©ration d'addition fonctionne correctement.</p></li><li><p><strong>Impl√©mentation de l'addition : </strong>Dans la classe Monnaie, la m√©thode <code>plus</code> a √©t√© remplac√©e par <code>__add__</code> pour permettre une syntaxe plus √©l√©gante lors de l'addition de deux montants. L'impl√©mentation de <code>__add__</code> cr√©e un nouvel objet Monnaie avec le montant total de l'addition et la m√™me devise que les objets d'origine.</p></li><li><p><strong>Mise √† jour du test :</strong> Le test a √©t√© ajust√© pour utiliser l'op√©rateur <code>+</code> √† la place de la m√©thode <code>plus</code>.</p></li></ul><p>Cette √©tape nous a permis d'ajouter la fonctionnalit√© d'addition pour une unique devise, ce qui constitue un progr√®s dans la r√©alisation des op√©rations mon√©taires de base.</p><p>Voici le test que j'ai ajout√© :</p><pre class="language-html line-numbers"><code>

def test_addition():
    cinq = monnaie.dollar(5)
    deux = monnaie.dollar(2)
    sept = monnaie.dollar(7)
    assert cinq.plus(deux) == sept



</code></pre><p>Et voici mon code :</p><pre class="language-html line-numbers"><code>

class Monnaie:
    def __init__(self, montant, devise):
        self.montant = montant
        self.devise = devise

    def __eq__(self, other):
        if(self.devise==other.devise) :
            return self.montant == other.montant
        else :
            return False

    def __mul__(self, multiplicateur):
        return Monnaie(self.montant * multiplicateur, self.devise)

    def plus(self, other):
        return Monnaie(self.montant + other.montant, self.devise)


</code></pre><p>Et mes tests passent. Apr√®s v√©rification ma fonction <strong>plus </strong>est similaire √† la correction et mon test peut-√™tre simplifi√© de cette fa√ßon mais l'id√©e est la m√™me :</p><pre class="language-html line-numbers"><code>

def test_plus():
    assert monnaie.dollar(7) == monnaie.dollar(5).plus(monnaie.dollar(2))


</code></pre><h3 id="13.-addition" tabindex="-1"><a class="header-anchor" href="#13.-addition"></a> 13. Addition</h3><p>Avant de traiter l'addition de deux monnaies diff√©rentes, il est n√©cessaire de commencer par traiter le cas de l'addition de montants d'une m√™me monnaie.</p><ul><li><p><strong>√âcrire un test :</strong> Commencez par √©crire un test pour v√©rifier que $5 + $2 donne $7.</p></li><li><p><strong>Impl√©menter la m√©thode plus :</strong> Cr√©ez une m√©thode <code>plus</code> dans la classe <code>Monnaie</code> qui prend une autre monnaie en param√®tre et retourne la somme des deux montants.</p></li><li><p><strong>Utiliser <strong>add</strong> :</strong> Remplacez la m√©thode <code>plus</code> par <code>__add__</code> dans la classe <code>Monnaie</code> pour utiliser l'op√©rateur <code>+</code>.</p></li><li><p><strong>√âcrire le test :</strong> √âcrivez un test pour v√©rifier que l'op√©rateur <code>+</code> fonctionne correctement avec des montants de m√™me devise.</p></li><li><p><strong>Impl√©menter <strong>add</strong> :</strong> Impl√©mentez la m√©thode <code>__add__</code> dans la classe <code>Monnaie</code> pour retourner une nouvelle instance de <code>Monnaie</code> contenant la somme des montants.</p></li><li><p><strong>Valider le test :</strong> Ex√©cutez les tests pour v√©rifier que l'op√©rateur <code>+</code> fonctionne comme pr√©vu pour les montants de m√™me devise.</p></li></ul><p>Cela permet de garantir que l'addition de montants d'une m√™me monnaie fonctionne correctement avant de passer √† des cas plus complexes impliquant des devises diff√©rentes.</p><p>Apr√®s avoir trait√© l'addition de montants d'une m√™me monnaie, il est n√©cessaire de r√©soudre le probl√®me de l'addition de montants de devises diff√©rentes.</p><ul><li><p><strong>Identifier le probl√®me :</strong> L'addition de montants de devises diff√©rentes pose des d√©fis car les taux de change peuvent varier avec le temps, ce qui signifie que la valeur de la somme peut √©galement changer.</p></li><li><p><strong>√âcrire un test :</strong> √âcrivez un test pour v√©rifier que la conversion d'une somme de devises diff√©rentes en une devise donn√©e produit le r√©sultat attendu.</p></li><li><p><strong>Impl√©menter la conversion :</strong> Cr√©ez une classe <code>Banque</code> avec une m√©thode <code>conversion</code> qui prend une somme et une devise cible en param√®tres, puis retourne la conversion de la somme dans la devise cible.</p></li><li><p><strong>√âcrire le test final :</strong> Utilisez la classe <code>Banque</code> pour convertir une somme de montants de devises diff√©rentes en une devise cible, puis v√©rifiez que le r√©sultat correspond √† ce qui est attendu.</p></li><li><p><strong>Impl√©menter la conversion :</strong> Impl√©mentez la logique de conversion dans la m√©thode <code>conversion</code> de la classe <code>Banque</code>.</p></li><li><p><strong>Valider le test :</strong> Ex√©cutez les tests pour v√©rifier que la conversion de la somme de devises diff√©rentes produit le r√©sultat attendu.</p></li></ul><p>Cela permet de r√©soudre le probl√®me de l'addition de montants de devises diff√©rentes en assurant une conversion appropri√©e des montants avant de les additionner.</p><p>Apr√®s avoir trait√© l'addition de montants de devises diff√©rentes, il est temps de g√©n√©raliser cette approche pour toutes les op√©rations d'addition.</p><ul><li><p><strong>D√©finir la nouvelle approche :</strong> Consid√©rez que toute somme de deux montants de monnaies diff√©rentes est une nouvelle classe appel√©e <code>Somme</code>.</p></li><li><p><strong>Mettre √† jour la liste de t√¢ches :</strong> Modifiez la liste de t√¢ches pour inclure la n√©cessit√© de rendre $5 + $2 √©gal √† $7, tout en maintenant la conversion correcte pour les montants de devises diff√©rentes.</p></li><li><p><strong>Supprimer les tests obsol√®tes :</strong> Supprimez le test v√©rifiant que $5 + $2 √©gale $7, car cela ne sera plus vrai avec la nouvelle approche.</p></li><li><p><strong>√âcrire un test pour la classe <code>Somme</code> :</strong> √âcrivez un test pour v√©rifier que la somme de deux montants de monnaies diff√©rentes cr√©e une instance de la classe <code>Somme</code> contenant les montants d'origine.</p></li><li><p><strong>Impl√©menter la classe <code>Somme</code> :</strong> Cr√©ez une classe <code>Somme</code> avec des attributs <code>gauche</code> et <code>droite</code> pour stocker les montants d'origine.</p></li><li><p><strong>Modifier l'impl√©mentation de l'addition :</strong> Dans la classe <code>Monnaie</code>, mettez √† jour la m√©thode <code>__add__</code> pour renvoyer une instance de <code>Somme</code> au lieu d'une nouvelle monnaie.</p></li><li><p><strong>Valider le test :</strong> Ex√©cutez les tests pour v√©rifier que la somme de deux montants de monnaies diff√©rentes cr√©e une instance de <code>Somme</code> contenant les montants d'origine.</p></li></ul><p>En suivant ces √©tapes, l'ajout de montants de devises diff√©rentes sera correctement g√©r√© par la classe <code>Somme</code>, tandis que les montants de la m√™me devise resteront g√©r√©s par la classe <code>Monnaie</code>.</p><h3 id="14.-conversion" tabindex="-1"><a class="header-anchor" href="#14.-conversion"></a> 14. Conversion</h3><p>Pour permettre que $5 + $2 corresponde √† quelque chose qui vaut √† $7, nous devons travailler sur la m√©thode <code>conversion</code> de la classe <code>Banque</code>. Actuellement, c'est une m√©thode fictive qui renvoie $7. Nous devons la rendre fonctionnelle pour g√©rer les conversions de devises.</p><ul><li><p><strong>Supprimer les duplications dans la m√©thode <code>conversion</code> de la <code>Banque</code> :</strong> Cette m√©thode doit pouvoir g√©rer les sommes de monnaies en supposant que les parties gauche et droite sont des <code>Monnaie</code>, et que le taux de change est toujours de 1 pour 1.</p></li><li><p><strong>Impl√©menter une nouvelle m√©thode de conversion dans la classe <code>Somme</code> :</strong> Pour √©viter que la classe <code>Banque</code> ait une connaissance directe des attributs de <code>Monnaie</code>, d√©placez la logique de conversion de la banque vers une m√©thode <code>conversion</code> dans la classe <code>Somme</code>.</p></li><li><p><strong>Mettre √† jour la liste de t√¢ches :</strong> Ajoutez √† la liste de t√¢ches la n√©cessit√© de faire en sorte que la m√©thode <code>Somme.conversion(devise)</code> effectue r√©ellement des conversions.</p></li></ul><p>L'impl√©mentation actuelle de la m√©thode <code>Banque.conversion</code> pose des probl√®mes car la banque doit conna√Ætre l'impl√©mentation de <code>Monnaie</code> pour acc√©der √† l'attribut <code>montant</code>. Cela viole le principe de la loi de D√©m√©ter en mati√®re de d√©veloppement orient√© objet.</p><ul><li><strong>Remonter la m√©thode de conversion de la <code>Banque</code> √† la <code>Somme</code> :</strong> Cette √©tape permet de r√©duire le niveau de connaissance de la banque sur les objets environnants, suivant ainsi la loi de D√©m√©ter.</li></ul><p>L'√©tape pr√©c√©dente a permis de baisser le niveau de connaissance de la banque, mais il reste √† traiter le cas o√π la m√©thode <code>Banque.conversion</code> a une <code>Monnaie</code> comme param√®tre. Pour cela, nous devons ajouter une m√©thode de conversion dans la classe <code>Monnaie</code>.</p><ul><li><p><strong>Cr√©er un test pour la conversion d'une <code>Monnaie</code> :</strong> √âcrivez un test o√π l'argument de <code>Banque.conversion</code> est un objet de type <code>Monnaie</code>.</p></li><li><p><strong>Impl√©menter la m√©thode de conversion dans la classe <code>Monnaie</code> :</strong> Ajoutez une m√©thode <code>conversion</code> √† la classe <code>Monnaie</code> pour g√©rer la conversion vers une devise donn√©e.</p></li></ul><h3 id="15.-taux-de-change" tabindex="-1"><a class="header-anchor" href="#15.-taux-de-change"></a> 15. Taux de change</h3><p>Dans cette partie, nous nous attaquons √† la gestion des taux de change. Nous commen√ßons par travailler sur les objets de type <code>Monnaie</code> pour r√©aliser des conversions entre devises.</p><ul><li><p><strong>Cr√©er un test pour <code>Banque.change</code> :</strong> Assurez-vous que <code>Banque.change</code> fonctionne correctement pour deux devises identiques et impl√©mentez cette m√©thode dans la classe <code>Banque.conversion</code>.</p></li><li><p><strong>Ajouter des tests pour les conversions de devises :</strong> √âcrivez des tests pour convertir des dollars en CHF et vice versa, et assurez-vous que la m√©thode <code>Banque.conversion</code> renvoie les r√©sultats corrects.</p></li><li><p><strong>Impl√©menter la m√©thode <code>Monnaie.conversion</code> :</strong> Utilisez la banque pour effectuer des conversions dans la m√©thode <code>Monnaie.conversion</code>. N'oubliez pas d'ajouter la banque comme param√®tre.</p></li></ul><p>Maintenant que la conversion de devises pour les sommes de monnaies identiques fonctionne, nous passons √† la gestion des conversions pour des devises diff√©rentes.</p><ul><li><strong>Ajouter un test pour la conversion de somme de devises diff√©rentes :</strong> √âcrivez un test pour convertir la somme de $2 et 1CHF en franc suisse et impl√©mentez la logique n√©cessaire.</li></ul><p>Pour g√©n√©raliser les op√©rations sur les sommes et les monnaies, nous utilisons le design pattern composite. Nous devons nous assurer que les op√©rations telles que l'addition et la multiplication fonctionnent correctement avec les sommes et les monnaies.</p><ul><li><p><strong>Impl√©menter la m√©thode <code>__add__</code> pour la classe <code>Somme</code> :</strong> Assurez-vous que l'addition de deux sommes fonctionne correctement en impl√©mentant la m√©thode <code>__add__</code>.</p></li><li><p><strong>Ajouter une m√©thode <code>__mul__</code> pour la classe <code>Somme</code> :</strong> Impl√©mentez la m√©thode <code>__mul__</code> pour permettre la multiplication d'une somme par un entier.</p></li><li><p><strong>Tester la multiplication de somme :</strong> √âcrivez un test pour la multiplication d'une somme et assurez-vous que cela fonctionne correctement.</p></li></ul><h3 id="conclusion-du-cours" tabindex="-1"><a class="header-anchor" href="#conclusion-du-cours"></a> Conclusion du cours</h3><p>La programmation par les tests (TDD) est une approche de d√©veloppement logiciel o√π les tests sont √©crits avant le code de production. Durant ce cours on a vu son principe et ses qualit√©s :</p><ol><li><p><strong>It√©ratif :</strong> Les tests sont √©crits, le code est impl√©ment√© pour les faire passer, puis refactor√© si n√©cessaire, dans un cycle it√©ratif.</p></li><li><p><strong>Qualit√© :</strong> Les tests automatis√©s identifient les erreurs t√¥t, garantissant la qualit√© du code et r√©duisant les co√ªts de maintenance.</p></li><li><p><strong>Conception dirig√©e par les tests :</strong> Les tests d√©finissent le comportement attendu du logiciel, guidant ainsi sa conception et son impl√©mentation.</p></li><li><p><strong>Documentation vivante :</strong> Les tests servent √©galement de documentation du code, facilitant sa compr√©hension et favorisant la collaboration.</p></li><li><p><strong>Agilit√© :</strong> La TDD permet une adaptation rapide aux changements et une r√©activit√© aux besoins m√©tier, assurant un d√©veloppement fiable et √©volutif.</p></li></ol><p>La programmation par les tests est essentielle pour d√©velopper rapidement des logiciels de haute qualit√©, tout en favorisant la collaboration et l'agilit√©.</p><h2 id="exercices" tabindex="-1"><a class="header-anchor" href="#exercices"></a> Exercices</h2><p>Maintenant que je connais mieux le fonctionnement du TDD et que j'ai r√©alis√© mon premier programme √† l'aide du cours, je peux tenter de r√©aliser un exercice par moi-m√™me. J'ai donc demand√© √† ChatGPT de me proposer un exercice pour mettre en application ce que j'ai appris :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Lucie-Le-Boursicaud/mon/temps-3.2/ChatGPTExo.png"></div></div><p>Donc on va coder une<stong>calculatrice simple !</stong></p><h3 id="calculatrice-simple" tabindex="-1"><a class="header-anchor" href="#calculatrice-simple"></a> Calculatrice simple</h3><p>Je cr√©e un nouveau dossier <strong>calculatrice-tdd</strong> dans lequel j'ajoute un fichier pour les tests <strong>test_calculatrice.py</strong>, un fichier pour mon code <strong>calculatrice.py</strong> et bien sur on n'oublies pas <strong>todo.md</strong>.</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Lucie-Le-Boursicaud/mon/temps-3.2/environnementExo.png"></div></div><p>La premi√®re chose c'est donc de remplir notre <strong>todo</strong>. Le plus instinctif √ßa serait d'√©crire √ßa :</p><pre class="language-html line-numbers"><code>

## MY TODO 1
- [] Pouvoir ajouter deux nombres
- [] Pouvoir soustraire deux nombres
- [] Pouvoir multiplier deux nombres
- [] Pouvoir diviser deux nombres


</code></pre><p>Commen√ßons par <strong>l'addition</strong>. On √©crit un test simple :</p><p><strong>test_calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

from calculatrice import Calculatrice

def test_addition():
    assert Calculatrice.add(1,2)==3


</code></pre><p>Je lance mon test :</p><pre class="language-html line-numbers"><code>

python -m pytest test_calculatrice.py


</code></pre><p>Et √©videmment √ßa √©choue, il n'existe pas de class <strong>Calculatrice</strong>. On en cr√©e donc une mais qui ne fait rien :</p><p><strong>calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

class Calculatrice():
    pass


</code></pre><p>Maintenant l'erreur vient du fais que la class <strong>Calculatrice</strong> n'a pas de m√©thode <strong>add</strong>. On va donc la coder :</p><pre class="language-html line-numbers"><code>

class Calculatrice():
    def add(self, other) :
        return self + other


</code></pre><p>Et le test passe ! Maintenant on va s'ocupper de la <strong>soustraction</strong>. J'√©cris un nouveau test :</p><p><strong>test_calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

from calculatrice import Calculatrice

def test_addition():
    assert Calculatrice.add(1,2)==3

def test_soustraction():
    assert Calculatrice.sub(5,3)==2


</code></pre><p>Evidemment le test √©choue car on a pas cr√©√© de m√©thode <strong>sub. On s'occupe de le faire :</strong></p><pre class="language-html line-numbers"><code>

class Calculatrice():
    def add(self, other) :
        return self + other

    def sub(self, other) :
        return self - other


</code></pre><p>Super les tests passent !</p><p>On va faire la <strong>multiplication</strong>.</p><p><strong>test_calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

from calculatrice import Calculatrice

def test_addition():
    assert Calculatrice.add(1,2)==3

def test_soustraction():
    assert Calculatrice.sub(5,3)==2

def test_multiplication():
    assert Calculatrice.mul(4,5)==20


</code></pre><p><strong>calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

class Calculatrice():
    def add(self, other) :
        return self + other

    def sub(self, other) :
        return self - other

    def mul(self, other) :
        return self*other


</code></pre><p>Et les 3 tests passent bien.</p><p>La <strong>division</strong> pour finir :</p><p><strong>test_calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

from calculatrice import Calculatrice

def test_addition():
    assert Calculatrice.add(1,2)==3

def test_soustraction():
    assert Calculatrice.sub(5,3)==2

def test_multiplication():
    assert Calculatrice.mul(4,5)==20

def test_division():
    assert Calculatrice.div(36,3)==12


</code></pre><p><strong>calculatrice.py</strong></p><pre class="language-html line-numbers"><code>

class Calculatrice():
    def add(self, other) :
        return self + other

    def sub(self, other) :
        return self - other

    def mul(self, other) :
        return self*other

    def div(self, other):
        return self/other


</code></pre><p>Et nos tests passent bien.</p><p>Bon cet exercice est assez simple parce qu'on manipule des nombres, m√™me si je peux complexifier le code j'ai envie d'aller vers autre chose de moins intuitif.</p><h3 id="gestion-d'une-biblioth%C3%A8que" tabindex="-1"><a class="header-anchor" href="#gestion-d'une-biblioth%C3%A8que"></a> Gestion d'une biblioth√®que</h3><p>Je redemande √† ChatGPT un nouvel exo mais un peut moins simple cette fois :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Lucie-Le-Boursicaud/mon/temps-3.2/ExoBibliotheque.png"></div></div><p>Je cr√©e mes diff√©rents fichiers et je rempli ma <strong>todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [] Rechercher un livre par titre ou par auteur
- [] Emprunter un livre disponible
- [] Retourn√© un livre emprunt√©


</code></pre><p>On va commencer par <strong>ajouter un livre</strong> car sans √ßa on ne peut pas faire les autes.</p><h4 id="ajouter-un-livre" tabindex="-1"><a class="header-anchor" href="#ajouter-un-livre"></a> Ajouter un livre</h4><p>Je ne savais pas trop quoi mettre comme test pour v√©rifier que l'ajout a bien fonctionn√©. J'ai fait √ßa sans √™tre trop s√ªre de moi :</p><p><strong>test_bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

from bibliotheque import Bibliotheque

def test_ajout_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.livre_existe("L'Ecume des jours")


</code></pre><p>Evidemment le test √©choue, il n'existe pas de class <strong>Bibliotheque</strong> et encore moins de m√©thode <strong>add_book</strong> ou <strong>livre_existe</strong>.</p><p>Je commence mon code dans <strong>bibliotheque.py</strong>. Evidemment √ßa a pas √©t√© √©vident du premier coup, j'ai un peu eu du mal au d√©but (surtout que je code pas souvent en orient√© objet...) mais au final j'ai r√©ussi √† m'en sortir ! Voici le code :</p><pre class="language-html line-numbers"><code>

class Bibliotheque() :
    def __init__(self):
        self.livres = []

    def add_book(self, titre, auteur, annee):
        livre = {"titre" : titre, "auteur": auteur, "ann√©e" : annee, "disponible" : True}
        self.livres.append(livre)

    def livre_est_disponible(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return livre["disponible"]
        return False


</code></pre><p>Et √ßa passe ! On peut mettre √† jour la <strong>Todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [-] Rechercher un livre par titre et obtenir ses infos
- [ ] Rechercher un livre par auteur et avoir la liste de ses livres
- [] Emprunter un livre disponible
- [] Retourn√© un livre emprunt√©


</code></pre><p>On va s'occuper de la recherche d'un livre maintenant, mais comme on a d√©j√† cod√© le fait qu'il existe on va dire que cette fois on veut savoir ses informations et surtout sa disponibilit√©.</p><h3 id="recherche-d'un-livre-par-titre" tabindex="-1"><a class="header-anchor" href="#recherche-d'un-livre-par-titre"></a> Recherche d'un livre par titre</h3><p>On commence par √©crire le test associ√© √† la fonctionnalit√© :</p><p><strong>test_bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

from bibliotheque import Bibliotheque

def test_ajout_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.livre_existe("L'Ecume des jours")

def test_recherche_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.recherche_livre("L'Ecume des jours")==["L'Ecume des jours","Boris Vian",1947,True]


</code></pre><p>Le test √©choue, on va rajouter une nouvelle m√©thode <strong>recherche_livre</strong>.</p><pre class="language-html line-numbers"><code>

class Bibliotheque() :
    def __init__(self):
        self.livres = []

    def add_book(self, titre, auteur, annee):
        livre = {"titre" : titre, "auteur": auteur, "ann√©e" : annee, "disponible" : True}
        self.livres.append(livre)

    def livre_existe(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return True
        return False

    def recherche_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return [livre["titre"],livre["auteur"],livre["ann√©e"],livre["disponible"]]


</code></pre><p>Et √ßa passe du premier coup ! On peut mettre √† jour la <strong>Todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [x] Rechercher un livre par titre et obtenir ses infos
- [-] Rechercher un livre par auteur et obtenir la liste de ses livres
- [] Emprunter un livre disponible
- [] Retourn√© un livre emprunt√©


</code></pre><h3 id="recherche-d'un-livre-par-auteur" tabindex="-1"><a class="header-anchor" href="#recherche-d'un-livre-par-auteur"></a> Recherche d'un livre par auteur</h3><p>On commence par √©crire le test associ√© √† la fonctionnalit√© :</p><p><strong>test_bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

from bibliotheque import Bibliotheque

def test_ajout_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.livre_existe("L'Ecume des jours")

def test_recherche_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.recherche_livre("L'Ecume des jours")==["L'Ecume des jours","Boris Vian",1947,True]

def test_recherche_livres_par_auteur():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    assert bibliotheque.recherche_livres_par_auteur("Boris Vian")==["L'Ecume des jours","L'Arrache-coeur"]
    assert bibliotheque.recherche_livres_par_auteur("Victor Hugo")==["Les Mis√©rables"]


</code></pre><p>Je commence donc √† coder une fonction pour faire passer le test : <strong>bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

class Bibliotheque() :
    def __init__(self):
        self.livres = []

    def add_book(self, titre, auteur, annee):
        livre = {"titre" : titre, "auteur": auteur, "ann√©e" : annee, "disponible" : True}
        self.livres.append(livre)

    def livre_existe(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return True
        return False

    def recherche_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return [livre["titre"],livre["auteur"],livre["ann√©e"],livre["disponible"]]

    def recherche_livres_par_auteur(self, auteur):
        listes_des_livres=[]
        for livre in self.livres :
            if livre["auteur"]==auteur:
                listes_des_livres.append(livre["titre"])
        return listes_des_livres


</code></pre><p>Ca passe aussi ! On peut mettre √† jour la <strong>Todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [x] Rechercher un livre par titre et obtenir ses infos
- [x] Rechercher un livre par auteur et obtenir la liste de ses livres
- [-] Emprunter un livre disponible
- [] Retourn√© un livre emprunt√©


</code></pre><h3 id="emprunter-un-livre" tabindex="-1"><a class="header-anchor" href="#emprunter-un-livre"></a> Emprunter un livre</h3><p>On va s'occuper maintenant de l'emprunt d'un livre si il est disponible.</p><div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none dark:border-indigo-800 dark:bg-indigo-950"><details class="group"><summary class="list-none py-0.5"><svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg> <svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg><div class="pl-8 font-bold inline-block group-open:select-text"><p>Test associ√©</p></div><svg class="group-open:hidden inline-block pl-3 w-10 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg></summary><div class="mx-8 pb-2 cursor-auto select-text"><p><strong>bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

from bibliotheque import Bibliotheque

def test_ajout_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.livre_existe("L'Ecume des jours")

def test_recherche_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.recherche_livre("L'Ecume des jours")==["L'Ecume des jours","Boris Vian",1947,True]

def test_recherche_livres_par_auteur():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    assert bibliotheque.recherche_livres_par_auteur("Boris Vian")==["L'Ecume des jours","L'Arrache-coeur"]
    assert bibliotheque.recherche_livres_par_auteur("Victor Hugo")==["Les Mis√©rables"]

def test_emprunt_livre():
    bibliotheque=Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    assert bibliotheque.emprunt_livre("L'Arrache-coeur")==True
    assert bibliotheque.emprunt_livre("L'Arrache-coeur")==False
    assert bibliotheque.emprunt_livre("L'Ecume des jours")==True


</code></pre></div></details></div><div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none dark:border-indigo-800 dark:bg-indigo-950"><details class="group"><summary class="list-none py-0.5"><svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg> <svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg><div class="pl-8 font-bold inline-block group-open:select-text"><p>Code associ√©</p></div><svg class="group-open:hidden inline-block pl-3 w-10 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg></summary><div class="mx-8 pb-2 cursor-auto select-text"><p><strong>bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

class Bibliotheque() :
    def __init__(self):
        self.livres = []

    def add_book(self, titre, auteur, annee):
        livre = {"titre" : titre, "auteur": auteur, "ann√©e" : annee, "disponible" : True}
        self.livres.append(livre)

    def livre_existe(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return True
        return False

    def recherche_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return [livre["titre"],livre["auteur"],livre["ann√©e"],livre["disponible"]]

    def recherche_livres_par_auteur(self, auteur):
        listes_des_livres=[]
        for livre in self.livres :
            if livre["auteur"]==auteur:
                listes_des_livres.append(livre["titre"])
        return listes_des_livres

    def emprunt_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre and livre["disponible"]:
                livre["disponible"]=False
                return True
        return False


</code></pre></div></details></div><p>On peut mettre √† jour la <strong>Todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [x] Rechercher un livre par titre et obtenir ses infos
- [x] Rechercher un livre par auteur et obtenir la liste de ses livres
- [x] Emprunter un livre disponible
- [-] Retourn√© un livre emprunt√©


</code></pre><h3 id="retourner-un-livre" tabindex="-1"><a class="header-anchor" href="#retourner-un-livre"></a> Retourner un livre</h3><p>On va s'occuper maintenant de retourner un livre emprunt√©.</p><div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none dark:border-indigo-800 dark:bg-indigo-950"><details class="group"><summary class="list-none py-0.5"><svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg> <svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg><div class="pl-8 font-bold inline-block group-open:select-text"><p>Test associ√©</p></div><svg class="group-open:hidden inline-block pl-3 w-10 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg></summary><div class="mx-8 pb-2 cursor-auto select-text"><p><strong>bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

from bibliotheque import Bibliotheque

def test_ajout_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.livre_existe("L'Ecume des jours")

def test_recherche_livre():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    assert bibliotheque.recherche_livre("L'Ecume des jours")==["L'Ecume des jours","Boris Vian",1947,True]

def test_recherche_livres_par_auteur():
    bibliotheque= Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    assert bibliotheque.recherche_livres_par_auteur("Boris Vian")==["L'Ecume des jours","L'Arrache-coeur"]
    assert bibliotheque.recherche_livres_par_auteur("Victor Hugo")==["Les Mis√©rables"]

def test_emprunt_livre():
    bibliotheque=Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    assert bibliotheque.emprunt_livre("L'Arrache-coeur")==True
    assert bibliotheque.emprunt_livre("L'Arrache-coeur")==False
    assert bibliotheque.emprunt_livre("L'Ecume des jours")==True

def test_retour_livre():
    bibliotheque=Bibliotheque()
    bibliotheque.add_book("L'Ecume des jours","Boris Vian",1947)
    bibliotheque.add_book("L'Arrache-coeur","Boris Vian",1953)
    bibliotheque.add_book("Les Mis√©rables","Victor Hugo",1862)
    bibliotheque.emprunt_livre("L'Arrache-coeur")
    bibliotheque.emprunt_livre("L'Ecume des jours")
    bibliotheque.retour_livre("L'Arrache-coeur")
    assert bibliotheque.livre_disponible("L'Arrache-coeur")==True
    assert bibliotheque.livre_disponible("L'Ecume des jours")==False


</code></pre></div></details></div><div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none dark:border-indigo-800 dark:bg-indigo-950"><details class="group"><summary class="list-none py-0.5"><svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg> <svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg><div class="pl-8 font-bold inline-block group-open:select-text"><p>Code associ√©</p></div><svg class="group-open:hidden inline-block pl-3 w-10 fill-none stroke-2 stroke-indigo-500 dark:stroke-indigo-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg></summary><div class="mx-8 pb-2 cursor-auto select-text"><p><strong>bibliotheque.py</strong></p><pre class="language-html line-numbers"><code>

class Bibliotheque() :
    def __init__(self):
        self.livres = []

    def add_book(self, titre, auteur, annee):
        livre = {"titre" : titre, "auteur": auteur, "ann√©e" : annee, "disponible" : True}
        self.livres.append(livre)

    def livre_existe(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return True
        return False

    def recherche_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return [livre["titre"],livre["auteur"],livre["ann√©e"],livre["disponible"]]

    def recherche_livres_par_auteur(self, auteur):
        listes_des_livres=[]
        for livre in self.livres :
            if livre["auteur"]==auteur:
                listes_des_livres.append(livre["titre"])
        return listes_des_livres

    def emprunt_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre and livre["disponible"]:
                livre["disponible"]=False
                return True
        return False

    def retour_livre(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                livre["disponible"]=True
        pass

    def livre_disponible(self, titre):
        for livre in self.livres :
            if livre["titre"] == titre:
                return livre["disponible"]
        return False


</code></pre></div></details></div><p>On peut mettre √† jour la <strong>Todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un livre avec titre auteur ann√©e de publication et statut
- [x] Rechercher un livre par titre et obtenir ses infos
- [x] Rechercher un livre par auteur et obtenir la liste de ses livres
- [x] Emprunter un livre disponible
- [x] Retourn√© un livre emprunt√©


</code></pre><p>On a fini notre gestionaire de biblioth√®que !</p><h3 id="syt%C3%A8me-de-r%C3%A9servation-de-vol" tabindex="-1"><a class="header-anchor" href="#syt%C3%A8me-de-r%C3%A9servation-de-vol"></a> Syt√®me de r√©servation de vol</h3><p>Je redemande √† ChatGPT un nouvel exo mais encore plus dur :</p><div style="display:flex"><div><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2023-2024/refs/heads/main//Lucie-Le-Boursicaud/mon/temps-3.2/ExoVol.png"></div></div><p>Je cr√©e mes diff√©rents fichiers et je rempli ma <strong>todo</strong>.</p><pre class="language-html line-numbers"><code>

## MY TODO
- [] Pouvoir ajouter un nouveau vol en pr√©cisant la compagnie, la ville de d√©part, la ville d'arriv√©e, l'heure de d√©part, l'heure d'arriv√©e, la date du vol et le num√©ro de vol
- [] Rechercher des vols disponibles en pr√©cisant une ville de d√©part, une ville d'arriv√©e et la date du voyage
- [] Pouvoir r√©server un vol et obtenir un num√©ro de r√©servation
- [] Pouvoir r√©server un si√®ge sur le vol √† l'aide du num√©ro de r√©servation
- [] Pouvoir annuler une r√©servation √† l'aide de son num√©ro


</code></pre><h4 id="ajouter-un-nouveau-vol" tabindex="-1"><a class="header-anchor" href="#ajouter-un-nouveau-vol"></a> Ajouter un nouveau vol</h4><p><strong>test_vol.py</strong></p><pre class="language-html line-numbers"><code>

from vol import VolSysteme

def test_ajouter_vol():
    volsysteme=VolSysteme()
    volsysteme.ajouter_vol("Rayanair","Marseille","Lisbonne","16:00","17:20","12/03/2024","RYA2598")
    volsysteme.ajouter_vol("EasyJet","Marseille","Lisbonne","15:10","16:35","12/03/2024","EZS081")
    assert volsysteme.recherche_vol("Marseille","Lisbonne","12/03/2024")==["RYA2598","EZS081"]


</code></pre><p>Evidemment le test √©choue, il n'existe pas de class <strong>VolSysteme</strong> et encore moins de m√©thode <strong>ajouter_vol</strong> ou <strong>recherche_vol</strong>.</p><p>Je commence mon code dans <strong>vol.py</strong>.</p><pre class="language-html line-numbers"><code>

class VolSysteme():
    def __init__(self):
        self.vols = []

    def ajouter_vol(self,compagnie, depart, arrivee, heured, heurea, date, numero):
        vol = {"compagnie":compagnie, "depart":depart, "arrivee":arrivee, "heured":heured, "heurea":heurea, "date": date, "numero":numero}
        self.vols.append(vol)

    def recherche_vol(self,depart,arrivee,date):
        vols_possibles=[]
        for vol in self.vols:
            print(vol)
            if(vol["arrivee"] == arrivee and vol["depart"] == depart and vol["date"] == date):
                vols_possibles.append(vol["numero"])
        return vols_possibles


</code></pre><pre class="language-html line-numbers"><code>

## MY TODO
- [x] Pouvoir ajouter un nouveau vol en pr√©cisant la compagnie, la ville de d√©part, la ville d'arriv√©e, l'heure de d√©part, l'heure d'arriv√©e, la date du vol et le num√©ro de vol
- [x] Rechercher des vols disponibles en pr√©cisant une ville de d√©part, une ville d'arriv√©e et la date du voyage
- [] Pouvoir r√©server un vol et obtenir un num√©ro de r√©servation
- [] Pouvoir r√©server un si√®ge sur le vol √† l'aide du num√©ro de r√©servation
- [] Pouvoir annuler une r√©servation √† l'aide de son num√©ro


</code></pre><h4 id="suite-de-l'exercice" tabindex="-1"><a class="header-anchor" href="#suite-de-l'exercice"></a> Suite de l'exercice</h4><p>J'ai continu√© l'exercice de la m√™me mani√®re. Voici mes deux fichiers finaux :</p><p><strong>test_vol.py</strong></p><pre class="language-html line-numbers"><code>

from vol import VolSysteme

def test_ajouter_vol():
    volsysteme=VolSysteme()
    volsysteme.ajouter_vol("Rayanair","Marseille","Lisbonne","16:00","17:20","12/03/2024","RYA2598")
    volsysteme.ajouter_vol("EasyJet","Marseille","Lisbonne","15:10","16:35","12/03/2024","EZS081")
    assert volsysteme.recherche_vol("Marseille","Lisbonne","12/03/2024")==["RYA2598","EZS081"]

def test_r√©server_si√®ge():
    volsysteme=VolSysteme()
    volsysteme.ajouter_vol("Rayanair","Marseille","Lisbonne","16:00","17:20","12/03/2024","RYA2598")
    volsysteme.ajouter_vol("EasyJet","Marseille","Lisbonne","15:10","16:35","12/03/2024","EZS081")
    assert volsysteme.r√©server_si√®ge("RYA2598", "A1")==True
    assert ("A1" in volsysteme.vols[0]["sieges"]) == True

def test_annuler_r√©servation():
    volsysteme=VolSysteme()
    volsysteme.ajouter_vol("Rayanair","Marseille","Lisbonne","16:00","17:20","12/03/2024","RYA2598")
    volsysteme.ajouter_vol("EasyJet","Marseille","Lisbonne","15:10","16:35","12/03/2024","EZS081")
    assert volsysteme.r√©server_si√®ge("RYA2598", "A1")==True
    assert volsysteme.annuler_r√©servation("RYA2598", "A1")==True
    assert ("A1" not in volsysteme.vols[0]["sieges"]) == True


</code></pre><p><strong>vol.py</strong></p><pre class="language-html line-numbers"><code>

class VolSysteme():
    def __init__(self):
        self.vols = []

    def ajouter_vol(self,compagnie, depart, arrivee, heured, heurea, date, numero):
        vol = {"compagnie":compagnie, "depart":depart, "arrivee":arrivee, "heured":heured, "heurea":heurea, "date": date, "numero":numero}
        self.vols.append(vol)

    def recherche_vol(self,depart,arrivee,date):
        vols_possibles=[]
        for vol in self.vols:
            print(vol)
            if(vol["arrivee"] == arrivee and vol["depart"] == depart and vol["date"] == date):
                vols_possibles.append(vol["numero"])
        return vols_possibles

    def r√©server_si√®ge(self, num√©ro_vol, si√®ge):
        for vol in self.vols:
            if vol["numero"] == num√©ro_vol:
                if "sieges" not in vol:
                    vol["sieges"] = []
                vol["sieges"].append(si√®ge)
                return True
        return False

    def annuler_r√©servation(self, num√©ro_vol, si√®ge):
        for vol in self.vols:
            if vol["numero"] == num√©ro_vol and "sieges" in vol and si√®ge in vol["sieges"]:
                vol["sieges"].remove(si√®ge)
                return True
        return False


</code></pre><p>Maintenant je me dis qu'on peut ajouter une gestion des passagers et de les tarifs. Je fais donc une nouvelle <strong>Todo</strong>, cr√©er mes tests et ajuster le code en cons√©quence.</p><p><a href="tdd.zip">Ici</a>, vous trouverez mes diff√©rents fichiers sur lesquels j'ai travaill√©.</p><h3 id="horodateur" tabindex="-1"><a class="header-anchor" href="#horodateur"></a> Horodateur</h3><table><thead><tr><th>Date</th><th>Heures pass√©es</th><th>Indications</th></tr></thead><tbody><tr><td>Samedi 24/02</td><td>2H</td><td><em>Environnement + Parie 1/3</em></td></tr><tr><td>Samedi 24/02</td><td>1H30</td><td><em>Partie 2/3</em></td></tr><tr><td>Dimanche 25/02</td><td>2H</td><td><em>Partie 3/3</em></td></tr><tr><td>Mercredi 28/02</td><td>30min</td><td><em>Exercice calculatrice</em></td></tr><tr><td>Mercredi 28/02</td><td>2H</td><td><em>Exercice biblioth√®que</em></td></tr><tr><td>Vendredi 01/03</td><td>2H</td><td><em>Exercice r√©servation de vol</em></td></tr></tbody></table></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>