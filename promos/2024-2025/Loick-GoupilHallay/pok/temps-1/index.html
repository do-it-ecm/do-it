<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="index, follow">

        <link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Loick-GoupilHallay/pok/temps-1/">

        
        

        <meta name="description" content="D√©ploiement automatis√© d&#39;un environnement de d√©veloppement s√©curis√© pour une √©quipe de d√©veloppement moderne">
        <meta property="og:description" content="D√©ploiement automatis√© d&#39;un environnement de d√©veloppement s√©curis√© pour une √©quipe de d√©veloppement moderne">
        <meta name="twitter:description" content="D√©ploiement automatis√© d&#39;un environnement de d√©veloppement s√©curis√© pour une √©quipe de d√©veloppement moderne">

        
            <meta name="author" content="Lo√Øck Goupil-Hallay">
        
        <meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, POK, dev, cyber">

        <link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon">
        <link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png">
        <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png">

        <link href="/assets/stylesheets/main.css" rel="stylesheet">

        <meta property="og:title" content="D√©ploiement automatis√© de l&#39;environnement de d√©veloppement pour une √©quipe">

        <meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png">
        <meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2024-2025/Loick-GoupilHallay/pok/temps-1/">
        <meta property="og:type" content="website">

        <meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png">
        <meta name="twitter:title" content="D√©ploiement automatis√© de l&#39;environnement de d√©veloppement pour une √©quipe">
        <meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png">
        <meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2024-2025/Loick-GoupilHallay/pok/temps-1/">

        <title>D√©ploiement automatis√© de l&#39;environnement de d√©veloppement pour une √©quipe</title>

        <!-- Prismjs imports
                - Prism line numbers
                - Prism toolbar
        -->
        <link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">
        <link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <!-- Mermaid import and initialization -->
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js "></script>

        <script defer="">
        // Check if a theme is stored in localStorage. If so, use it, otherwise fallback to the system preference.
        const storedTheme = localStorage.getItem('theme');
        if (storedTheme) {
            document.documentElement.classList.toggle("dark", storedTheme === "dark");
        } else {
            // Use system color scheme if there is no stored theme preference.
            document.documentElement.classList.toggle("dark", window.matchMedia("(prefers-color-scheme: dark)").matches);
        }

        function loadPrismTheme(isDarkMode) {
            const newTheme = isDarkMode ? 'prism-okaidia.min.css' : 'prism-solarizedlight.min.css';
            const newLink = document.createElement('link');
            newLink.rel = 'stylesheet';
            newLink.id = 'prism-theme';
            newLink.href = `https://cdn.jsdelivr.net/npm/prismjs/themes/${newTheme}`;

            newLink.onload = () => {
                // Reapply highlighting after the new theme loads
                Prism.highlightAll();
            };

            const existingLink = document.getElementById('prism-theme');
            if (existingLink) {
                document.head.replaceChild(newLink, existingLink);
            } else {
                document.head.appendChild(newLink);
            }
        }

        function setMermaidTheme(isDarkMode) {
            const theme = isDarkMode ? 'dark' : 'forest';
            mermaid.initialize({
                securityLevel: 'loose',
                theme,
                startOnLoad: true,
            });
        }

        // Toggle dark and light mode and update localStorage accordingly.
        function toggleDarkMode() {
            const dark = document.documentElement.classList.contains("dark");
            const newTheme = dark ? "light" : "dark";
            localStorage.setItem('theme', newTheme);
            document.documentElement.classList.toggle("dark", !dark);
            loadPrismTheme(!dark);
            setMermaidTheme(!dark);
        }

        // On initial load, ensure that Prism and Mermaid are initialized using the current theme.
        const isDark = document.documentElement.classList.contains("dark");
        loadPrismTheme(isDark);
        setMermaidTheme(isDark);
        </script>

    </head>

    <body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50">
        <header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-between items-center">
                    <a class="mx-2" href="/">Home</a>
                    <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current">
                            <circle cx="12" cy="12" r="5"></circle>
                            <path d="M12 2V4" stroke-linecap="round"></path>
                            <path d="M12 20V22" stroke-linecap="round"></path>
                            <path d="M4 12L2 12" stroke-linecap="round"></path>
                            <path d="M22 12L20 12" stroke-linecap="round"></path>
                            <path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path>
                            <path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path>
                            <path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path>
                            <path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path>
                        </svg>
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block">
                            <path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    <div class="flex items-center gap-4 sm:gap-6 ">
                        <a class="" href="/cs">CS</a>
                        <a class="" href="/pok">POK</a>
                        <a class="" href="/mon">MON</a>
                        <a class="" href="/projets">Projets</a>
                        <a class="hidden sm:block" href="/promos">Promos</a>
                        <a href="/search">
                            <svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                            </svg>
                        </a>
                        <a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank">
                            <svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">D√©ploiement automatis√© de l&#39;environnement de d√©veloppement pour une √©quipe</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Tags : </div>
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">dev</li>
                
                    <li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">cyber</li>
                

            </ul>

            
            <div class="hidden" data-pagefind-meta="Type" aria-hidden="true">
                
                    
                        <span data-pagefind-filter="Type">POK</span>
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteur : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Lo√Øck Goupil-Hallay</li>
                
            </ul>
        </div>
    

    
        <div class="absolute top-0 right-0">
            <span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">
                2024-2025
            </span>
        </div>
    
</div>

<p class="mb-4 text-lg">D√©ploiement automatis√© d'un environnement de d√©veloppement s√©curis√© pour une √©quipe de d√©veloppement moderne</p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/promos/2024-2025/Loick-GoupilHallay/">Lo√Øck Goupil-Hallay</a><span class="px-1">/</span><a href="/promos/2024-2025/Loick-GoupilHallay/pok/">POKs Lo√Øck Goupil-Hallay</a><span class="px-1">/</span><a href="/promos/2024-2025/Loick-GoupilHallay/pok/temps-1/">D√©ploiement automatis√© de l&#39;environnement de d√©veloppement pour une √©quipe</a>

</div>
</div>




<head>
  <link rel="icon" href="https://github.com/BoxBoxJason/resume/blob/d07f37a66e2a583832533a10a9a4bf73b020be6f/src/assets/avatar.png?raw=true" type="image/x-icon">
</head>
<script>
let lastScrollYSummary = window.scrollY;

function toggleSummarySidebar() {
    document.getElementById('toc-sidebar').classList.toggle('open');
}

window.addEventListener('scroll', () => {
    const burger = document.getElementById('toc-burger-button');
    const sidebar = document.getElementById('toc-sidebar');
    const currentScroll = window.scrollY;
    // Hide the burger button if max width is reached
    if (currentScroll < 10 || currentScroll < lastScrollYSummary) {
        burger.classList.remove('hidden');
    } else if (!sidebar || !sidebar.classList.contains('open')) {
        burger.classList.add('hidden');
    }

    lastScrollYSummary = currentScroll;
});
</script>
<p><button id="toc-burger-button" class="sidebar-burger-button right-2" onclick="toggleSummarySidebar()">‚ò∞</button></p>
<nav id="toc-sidebar" class="sidebar right-0 border-l-2 translate-x-full 3xl:translate-x-0">
<h2>Sommaire</h2>
<nav class="toc"><ol class="toc-list"><li class="toc-item"><a class="toc-link" href="#svcadm"> svcadm</a><ol class="toc-list"><li class="toc-item"><a class="toc-link" href="#h%C3%A9ritage"> H√©ritage</a></li><li class="toc-item"><a class="toc-link" href="#contenu"> Contenu</a><ol class="toc-list"><li class="toc-item"><a class="toc-link" href="#code-source"> Code Source</a></li><li class="toc-item"><a class="toc-link" href="#services-d%C3%A9ploy%C3%A9s"> Services d√©ploy√©s</a><ol class="toc-list"><li class="toc-item"><a class="toc-link" href="#nginx"> Nginx</a></li><li class="toc-item"><a class="toc-link" href="#postgresql"> PostgreSQL</a></li><li class="toc-item"><a class="toc-link" href="#sonarqube"> SonarQube</a></li><li class="toc-item"><a class="toc-link" href="#gitlab"> GitLab</a></li><li class="toc-item"><a class="toc-link" href="#mattermost"> Mattermost</a></li><li class="toc-item"><a class="toc-link" href="#hashicorp-vault"> Hashicorp Vault</a></li><li class="toc-item"><a class="toc-link" href="#trivy"> Trivy</a></li><li class="toc-item"><a class="toc-link" href="#minio"> MinIO</a></li></ol></li><li class="toc-item"><a class="toc-link" href="#executable"> Executable</a></li><li class="toc-item"><a class="toc-link" href="#comment-%C3%A7a-marche-%3F"> Comment √ßa marche ?</a></li></ol></li><li class="toc-item"><a class="toc-link" href="#planification"> Planification</a><ol class="toc-list"><li class="toc-item"><a class="toc-link" href="#sprint-planning-1"> Sprint Planning 1</a></li><li class="toc-item"><a class="toc-link" href="#sprint-planning-2"> Sprint Planning 2</a></li></ol></li><li class="toc-item"><a class="toc-link" href="#horodatage"> Horodatage</a></li></ol></li></ol></nav></nav>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8 mb-2 mr-8">
<p><strong>POK avanc√©</strong></p>
</div><div class="pl-8 mr-8">
<ul>
<li>Conteneurisation</li>
<li>Golang</li>
<li><a href="../../mon/temps-1.1/">MON sur l'environnement de d√©veloppement id√©al</a></li>
</ul>
</div>
</div>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100 dark:border-emerald-800 dark:bg-emerald-950">
<svg class="absolute w-6 h-6 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-emerald-500 dark:stroke-emerald-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mb-2 mr-8">
<p><strong>Liens utiles</strong></p>
</div><div class="pl-8 mr-8">
<ul>
<li><a href="https://github.com/boxboxjason/svcadm">GitHub svcadm</a></li>
<li><a href="https://www.redhat.com/en/topics/containers">What is a container ?</a></li>
<li>Services d√©ploy√©s
<ul>
<li><a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/">Nginx reverse proxy</a></li>
<li><a href="https://www.postgresql.org/">PostgreSQL</a></li>
<li><a href="https://www.sonarqube.org/">SonarQube</a></li>
<li><a href="https://about.gitlab.com/">GitLab</a></li>
<li><a href="https://mattermost.com/">Mattermost</a></li>
<li><a href="https://www.vaultproject.io/">Hashicorp Vault</a></li>
<li><a href="https://github.com/aquasecurity/trivy">Trivy</a></li>
<li><a href="https://www.clamav.net/">ClamAV</a></li>
</ul>
</li>
</ul>
</div>
</div>
<h1 id="svcadm" tabindex="-1"><a class="header-anchor" href="#svcadm"></a> svcadm</h1>
<p>svcadm est une CLI (command line interface) √©crite en golang qui permet de d√©ployer un environnement de d√©veloppement entier, personnalisable et moderne pour une √©quipe de d√©veloppement. Le d√©ploiement ne n√©cessite aucune connaissance en conteneurisation et est enti√®rement automatis√© (pas mal non ? üòè).</p>
<p>L'utilisateur a seulement besoin de remplir un fichier de configuration pour d√©finir et param√©trer les services √† d√©ployer.
Il peut aussi d√©finir les utilisateurs administrateurs (ou pas) √† cr√©er automatiquement depuis un autre fichier de configuration.
Ensuite, il n'y a plus qu'√† lancer la commande <code>svcadm setup</code> et le tour est jou√© !</p>
<h2 id="h%C3%A9ritage" tabindex="-1"><a class="header-anchor" href="#h%C3%A9ritage"></a> H√©ritage</h2>
<p>Ce POK se base sur un projet d√©j√† existant qui d√©ployait √† l'√©poque des services antivirus de mani√®re automatis√©e en utilisant des conteneurs accessibles depuis un proxy.<br>
Le code √©tait √©crit en zsh et √©tait peu personnalisable. L'objectif est de reprendre ce projet et de le r√©√©crire en golang pour le rendre plus op√©rationnel et ajouter des fonctionnalit√©s complexes.</p>
<h2 id="contenu" tabindex="-1"><a class="header-anchor" href="#contenu"></a> Contenu</h2>
<h3 id="code-source" tabindex="-1"><a class="header-anchor" href="#code-source"></a> Code Source</h3>
<p>Le code source (disponible sur <a href="https://github.com/boxboxjason/svcadm">GitHub</a>) d'environ 2500 lignes effectives est divis√© en plusieurs modules:</p>
<ul>
<li><code>pkg</code>: En go, il s'agit de la biblioth√®que de code r√©employable par d'autres projets
<ul>
<li><code>logger</code>: Gestion des logs de l'application</li>
<li><code>containerutils</code>: Gestion des conteneurs et des commandes qui les concernent</li>
<li><code>fileutils</code>: Manipulation des fichiers et des r√©pertoires</li>
<li><code>formatutils</code>: Gestion des formats de donn√©es, de texte, de json,...</li>
<li><code>utils</code>: Autres fonctions utilitaires</li>
</ul>
</li>
<li><code>cmd</code>: En go, il s'agit des commandes ex√©cutables de l'application, c'est l√† que sont d√©finies les commandes de la CLI</li>
<li><code>internal</code>: En go, il s'agit des modules internes de l'application
<ul>
<li><code>config</code>: Gestion de la configuration de l'application</li>
<li><code>services</code>: G√®re la logique propre √† chaque service, de leur cr√©ation √† leur suppression, en passant par les backups, le status,...
<ul>
<li><code>svcadm</code>: Interface pour les services, d√©finit les m√©thodes de base pour chaque service, contient des fonctions g√©n√©riques pour les services</li>
<li><code>gitlabadm</code>: Gestion de GitLab</li>
<li><code>mattermostadm</code>: Gestion de Mattermost</li>
<li><code>minioadm</code>: Gestion de Minio</li>
<li><code>nginxadm</code>: Gestion de Nginx</li>
<li><code>psqladm</code>: Gestion de PostgreSQL</li>
<li><code>sonaradm</code>: Gestion de SonarQube</li>
<li><code>trivyadm</code>: Gestion de Trivy</li>
<li><code>vaultadm</code>: Gestion de Vault</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="services-d%C3%A9ploy%C3%A9s" tabindex="-1"><a class="header-anchor" href="#services-d%C3%A9ploy%C3%A9s"></a> Services d√©ploy√©s</h3>
<p>Les services d√©ploy√©s sont ceux que j'ai mentionn√© dans mon <a href="../../mon/temps-1.1/">MON sur l'environnement de d√©veloppement id√©al</a></p>
<h4 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"></a> Nginx</h4>
<p>Nginx est un serveur web open-source (la partie que nous utilisons) qui peut √©galement √™tre utilis√© comme reverse proxy, load balancer, mail proxy et serveur HTTP cache.<br>
Dans notre cas, il est utilis√© comme reverse proxy pour rediriger les requ√™tes vers les services d√©ploy√©s. Il est accessible depuis les ports 80 et 443 de la machine h√¥te.</p>
<p>Concr√®tement, il permet de rediriger les requ√™tes HTTP vers les services d√©ploy√©s en fonction de l'URL demand√©e.<br>
Il ajoute √©galement une couche de s√©curit√© en masquant les services d√©ploy√©s derri√®re un seul point d'entr√©e, qui peut √™tre s√©curis√© par un certificat SSL. Il garde √©galement les logs des requ√™tes effectu√©es sur les services, permettant de les remonter en cas de probl√®me.</p>
<h4 id="postgresql" tabindex="-1"><a class="header-anchor" href="#postgresql"></a> PostgreSQL</h4>
<p>PostgreSQL est un syst√®me de gestion de base de donn√©es relationnelle et objet. Il est open-source et est tr√®s utilis√© dans le monde professionnel.</p>
<p>Dans notre cas, il est utilis√© pour stocker les donn√©es n√©cessaires √† chaque service d√©ploy√©. Il peut aussi √™tre utilis√© pour stocker les donn√©es des applications d√©velopp√©es par l'√©quipe.</p>
<h4 id="sonarqube" tabindex="-1"><a class="header-anchor" href="#sonarqube"></a> SonarQube</h4>
<p>SonarQube est un outil open-source (la partie que nous utilisons) de gestion de la qualit√© du code source. Il permet de d√©tecter les bugs, les vuln√©rabilit√©s, les codes dupliqu√©s, les mauvaises pratiques, les tests unitaires manquants et les commentaires de code manquants dans le code source.</p>
<h4 id="gitlab" tabindex="-1"><a class="header-anchor" href="#gitlab"></a> GitLab</h4>
<p>GitLab est une plateforme open-source (la partie que nous utilisons) de gestion de code source, de CI/CD, de collaboration et de gestion de projet. Il permet de stocker le code source, de g√©rer les versions, de tester &amp; d√©ployer automatiquement les applications, de collaborer sur le code source et de g√©rer les projets.</p>
<h4 id="mattermost" tabindex="-1"><a class="header-anchor" href="#mattermost"></a> Mattermost</h4>
<p>Mattermost est une plateforme open-source (la partie que nous utilisons) de messagerie et de collaboration. Elle permet de discuter en temps r√©el, de partager des fichiers, de collaborer sur des projets et de g√©rer les √©quipes.</p>
<h4 id="hashicorp-vault" tabindex="-1"><a class="header-anchor" href="#hashicorp-vault"></a> Hashicorp Vault</h4>
<p>Vault est un outil open-source (la partie que nous utilisons) de gestion des secrets et de protection des donn√©es sensibles. Il permet de stocker les secrets, de les distribuer, de les g√©rer et de les prot√©ger. Il permet √©galement de g√©n√©rer des tokens, des certificats et des cl√©s de chiffrement.</p>
<h4 id="trivy" tabindex="-1"><a class="header-anchor" href="#trivy"></a> Trivy</h4>
<p>Trivy est un outil open-source de scan de vuln√©rabilit√©s pour les conteneurs, les images, les paquets, les fichiers et les syst√®mes d'exploitation. Il permet de d√©tecter les vuln√©rabilit√©s, les failles de s√©curit√© et les erreurs dans les applications et les syst√®mes.</p>
<h4 id="minio" tabindex="-1"><a class="header-anchor" href="#minio"></a> MinIO</h4>
<p>MinIO est un serveur de stockage d'objets open-source qui permet de stocker des objets, des fichiers et des donn√©es non structur√©es. Il est compatible avec l'API S3 d'Amazon et peut √™tre utilis√© pour stocker des donn√©es dans le cloud.</p>
<h3 id="executable" tabindex="-1"><a class="header-anchor" href="#executable"></a> Executable</h3>
<p><a href="https://github.com/BoxBoxJason/svcadm/releases/">L'ex√©cutable (binaire) de svcadm</a> est g√©n√©r√© √† partir du code source et est utilis√© pour d√©ployer l'environnement de d√©veloppement.
Pour qu'il puisse fonctionner, la seule condition est que la machine h√¥te ait install√© le moteur d'√©x√©cution de conteneurs qu'elle souhaite utiliser (docker ou podman).</p>
<p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2024-2025/refs/heads/main//Loick-GoupilHallay/pok/temps-1/images/help.png" alt="svcadm help"></p>
<h3 id="comment-%C3%A7a-marche-%3F" tabindex="-1"><a class="header-anchor" href="#comment-%C3%A7a-marche-%3F"></a> Comment √ßa marche ?</h3>
<pre class="mermaid" style="background-color: transparent">
%%{init: {'theme': 'forest'}}%%
architecture-beta
    service users(clarity:users-solid)[Utilisateurs]

    group network(internet)[Network]

    service nginx(logos:nginx)[Nginx] in network
    service postgres(logos:postgresql)[PostgreSQL] in network
    service sonarqube(devicon:sonarqube)[SonarQube] in network
    service gitlab(devicon:gitlab)[GitLab] in network
    service mattermost(logos:mattermost-icon)[Mattermost] in network
    service vault(devicon:vault)[Vault] in network
    service trivy(simple-icons:trivy)[Trivy] in network
    service minio(simple-icons:minio)[MinIO] in network

    junction row1 in network
    junction row2 in network
    junction row3 in network
    junction line1 in network

    users:R <--> L:nginx

    nginx:R <-- L:row1
    vault:B <-- T:row1
    gitlab:T <-- B:row1

    row1:R -- L:row2
    minio:B <-- T:row2
    sonarqube:T <-- B:row2

    row2:R -- L:row3
    trivy:B <-- T:row3
    mattermost:T <-- B:row3

    gitlab:B --> L:postgres
    sonarqube:B --> T:postgres
    mattermost:B --> R:postgres
</pre>
<ol>
<li>L'utilisateur remplit un fichier de configuration <code>svcadm.yaml</code> pour d√©finir les services √† d√©ployer et les param√©trer.
<ul>
<li>Il d√©cide des services √† activer, des ports √† utiliser, des volumes √† monter, des variables d'environnement √† d√©finir,...</li>
<li>Il choisit le moteur de conteneurisation √† utiliser (docker ou podman) et le r√©seau √† utiliser.</li>
<li>Il d√©finit le TLS certificat et la cl√© priv√©e √† utiliser pour s√©curiser les connexions (s'il utilise nginx)
<img src="https://raw.githubusercontent.com/do-it-ecm/promo-2024-2025/refs/heads/main//Loick-GoupilHallay/pok/temps-1/images/svcadm.png" alt="svcadm.yaml"></li>
</ul>
</li>
<li>L'utilisateur remplit un fichier de configuration <code>access.yaml</code> pour d√©finir les utilisateurs √† cr√©er et leurs r√¥les.
<img src="https://raw.githubusercontent.com/do-it-ecm/promo-2024-2025/refs/heads/main//Loick-GoupilHallay/pok/temps-1/images/access.png" alt="access.yaml"></li>
<li>L'utilisateur lance la commande <code>svcadm setup</code> pour d√©ployer les services.</li>
<li>Les services sont d√©ploy√©s dans des conteneurs, sur le m√™me r√©seau et sont accessibles depuis le reverse proxy Nginx (s'il est activ√©) sur la machine h√¥te, sur les ports 80 (HTTP) et 443 (HTTPS).</li>
<li>Les utilisateurs sont cr√©√©s avec les r√¥les d√©finis dans le fichier de configuration <code>access.yaml</code>.</li>
<li>L'utilisateur peut acc√©der aux services d√©ploy√©s depuis un navigateur web en se connectant √† l'URL de la machine h√¥te.</li>
<li>L'utilisateur peut acc√©der au status des services d√©ploy√©s en lan√ßant la commande <code>svcadm status</code>.</li>
</ol>
<h2 id="planification" tabindex="-1"><a class="header-anchor" href="#planification"></a> Planification</h2>
<h3 id="sprint-planning-1" tabindex="-1"><a class="header-anchor" href="#sprint-planning-1"></a> Sprint Planning 1</h3>
<ul>
<li>Permettre d√©ploiement de:
<ul>
<li>Outil de gestion des codes sources</li>
<li>Cluster de base de donn√©es</li>
<li>Outils de gestion des artefacts</li>
<li>Outils de communication</li>
<li>Outil d'analyse de qualit√© de code</li>
<li>Outil d'analyse antivirus</li>
</ul>
</li>
</ul>
<h3 id="sprint-planning-2" tabindex="-1"><a class="header-anchor" href="#sprint-planning-2"></a> Sprint Planning 2</h3>
<ul>
<li>Permettre d√©ploiement de:
<ul>
<li>Outil de gestion des secrets</li>
<li>Outil de scan de vuln√©rabilit√©s</li>
<li>Outil de gestion des utilisateurs</li>
</ul>
</li>
<li>Tests complets d'int√©grations</li>
</ul>
<h2 id="horodatage" tabindex="-1"><a class="header-anchor" href="#horodatage"></a> Horodatage</h2>
<img src="https://preview.redd.it/pleasestop-v0-txr7gptyv1ad1.jpeg?auto=webp&s=12700b2cfb87aca17abd54317dd5f7e2a8d22a5f" alt="I have big plans for this code" class="img-banner mx-auto">
<p>Le sprint ne s'est pas du tout d√©roul√© comme pr√©vu, j'ai trouv√© qu'il y avait tr√®s peu de plus value √† r√©√©crire des scripts non personnalisables en bash.
Cela ne correspond pas du tout au besoin des √©quipes de d√©veloppement modernes qui veulent des outils personnalisables et faciles √† utiliser.</p>
<p>J'ai donc r√©orient√© le fonctionnement du projet, en offrant la possibilit√© de customiser les services √† d√©ployer et en utilisant un fichier de configuration pour les param√©trer.</p>
<p>Pour m'offrir plus de flexibilit√©, j'ai d√©cid√© d'utiliser golang pour l'int√©gralit√© du code car c'est un langage que je ma√Ætrise bien et qui est utilis√© pour la plupart des op√©rateurs de conteneurs &amp; kubernetes.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Heures pass√©es</th>
<th>Indications</th>
</tr>
</thead>
<tbody>
<tr>
<td>Samedi 14/09</td>
<td>1H</td>
<td>R√©daction du fichier de configuration avec param√©trage initial des servicess</td>
</tr>
<tr>
<td>Samedi 14/09</td>
<td>5H</td>
<td>Code du parser &amp; validateur de fichier de configuration</td>
</tr>
<tr>
<td>Dimanche 15/09</td>
<td>1H</td>
<td>Code du script de d√©ploiement par des conteneurs</td>
</tr>
<tr>
<td>Dimanche 15/09</td>
<td>3H</td>
<td>Fine tuning pour chaque service (du premier sprint)</td>
</tr>
<tr>
<td>Samedi 12/10</td>
<td>6H (qui ne comptent pas)</td>
<td>Refactor ENORME de la syntaxe des services pour normer tout √ßa avec des interfaces</td>
</tr>
<tr>
<td>Dimanche 13/10</td>
<td>3H</td>
<td>Refactor ENORME du module de gestion des conteneurs &amp; de la configuration</td>
</tr>
<tr>
<td>Dimanche 13/10</td>
<td>3H</td>
<td>Ajout des services manquants &amp; Correction des scripts de cr√©ation des utilisateurs pour chaque service</td>
</tr>
<tr>
<td>Dimanche 13/10</td>
<td>1H</td>
<td>Correction des soucis de flags et mise √† jour des commandes disponibles</td>
</tr>
<tr>
<td>Dimanche 13/10</td>
<td>1H</td>
<td>Tests d'int√©grations complets et corrections pour le d√©ploiement de tous les services</td>
</tr>
<tr>
<td>Lundi 14/10</td>
<td>2H</td>
<td>Impl√©mentation du script de suppression &amp; de status des services</td>
</tr>
</tbody>
</table>



</article>

        </main>

        <footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        ¬©2025 <b><span style="font-family: Consolas, sans-serif;">Do-<span style="color: #4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT
                    </p>
                </div>
            </div>
        </footer>

        <!-- MathJax import and initialization -->
        <script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\\(', '\\)']], // Delimiters for inline math
                    displayMath: [['$$', '$$'], ['\\[', '\\]']] // Delimiters for block math
                },
                svg: {
                    fontCache: 'global' // Use global font cache for SVG output
                }
            };
            document.addEventListener('DOMContentLoaded', () => {
                MathJax.typeset(); // Ensures MathJax processes the content after the page loads
            });
        </script>

        <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">
            Prism.plugins.NormalizeWhitespace.setDefaults({
                'remove-trailing': true,
                'remove-indent': true,
                'left-trim': true,
                'right-trim': true,
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>
    </body>
</html>
