<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="robots" content="index, follow"><link rel="canonical" href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Lola-Perdrix/mon/temps-2.1/"><meta name="description" content="√âtude plus approfondie de tout ce que l&#39;on peut faire avec SQL"><meta property="og:description" content="√âtude plus approfondie de tout ce que l&#39;on peut faire avec SQL"><meta name="twitter:description" content="√âtude plus approfondie de tout ce que l&#39;on peut faire avec SQL"><meta name="author" content="Lola Perdrix"><meta name="keywords" content="do-it, centrale, centrale m√©diterran√©e, ecm, MON, SQL, vert"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/favicon.ico" type="image/x-icon"><link rel="icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png" type="image/png"><link rel="apple-touch-icon" href="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/minimal.png"><link href="/assets/stylesheets/main.css" rel="stylesheet"><meta property="og:title" content="SQL Overview"><meta property="og:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta property="og:url" content="https://do-it.aioli.ec-m.fr/promos/2024-2025/Lola-Perdrix/mon/temps-2.1/"><meta property="og:type" content="website"><meta name="twitter:card" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:title" content="SQL Overview"><meta name="twitter:image" content="https://raw.githubusercontent.com/do-it-ecm/do-it/main/src/assets/img/logo/intermediate-text.png"><meta name="twitter:url" content="https://do-it.aioli.ec-m.fr/promos/2024-2025/Lola-Perdrix/mon/temps-2.1/"><title>SQL Overview</title><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet"><link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script defer="">const storedTheme=localStorage.getItem("theme");function loadPrismTheme(e){const t=e?"prism-okaidia.min.css":"prism-solarizedlight.min.css",s=document.createElement("link");s.rel="stylesheet",s.id="prism-theme",s.href=`https://cdn.jsdelivr.net/npm/prismjs/themes/${t}`,s.onload=()=>{Prism.highlightAll()};const m=document.getElementById("prism-theme");m?document.head.replaceChild(s,m):document.head.appendChild(s)}function setMermaidTheme(e){const t=e?"dark":"forest";mermaid.initialize({securityLevel:"loose",theme:t,startOnLoad:!0})}function toggleDarkMode(){const e=document.documentElement.classList.contains("dark"),t=e?"light":"dark";localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",!e),loadPrismTheme(!e),setMermaidTheme(!e)}storedTheme?document.documentElement.classList.toggle("dark","dark"===storedTheme):document.documentElement.classList.toggle("dark",window.matchMedia("(prefers-color-scheme: dark)").matches);const isDark=document.documentElement.classList.contains("dark");loadPrismTheme(isDark),setMermaidTheme(isDark)</script></head><body data-prismjs-copy="üìã" data-prismjs-copy-error="‚ùå" data-prismjs-copy-success="‚úÖ" data-prismjs-copy-timeout="1000" class="bg-neutral-50 text-neutral-950 dark:bg-neutral-900 dark:text-neutral-50"><header class="fixed top-0 z-50 w-full border-b-2 border-gray-200 bg-white dark:bg-neutral-900 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-between items-center"><a class="mx-2" href="/">Home</a> <button class="hidden sm:block text-neutral-950 dark:text-neutral-50 hover:bg-neutral-700 hover:text-neutral-50 hover:dark:bg-neutral-300 hover:dark:text-neutral-950 transition-colors p-2 rounded-full duration-800 ease-in-out" onclick="toggleDarkMode()"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 dark:hidden stroke-current"><circle cx="12" cy="12" r="5"></circle><path d="M12 2V4" stroke-linecap="round"></path><path d="M12 20V22" stroke-linecap="round"></path><path d="M4 12L2 12" stroke-linecap="round"></path><path d="M22 12L20 12" stroke-linecap="round"></path><path d="M19.7778 4.22266L17.5558 6.25424" stroke-linecap="round"></path><path d="M4.22217 4.22266L6.44418 6.25424" stroke-linecap="round"></path><path d="M6.44434 17.5557L4.22211 19.7779" stroke-linecap="round"></path><path d="M19.7778 19.7773L17.5558 17.5551" stroke-linecap="round"></path></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="h-5 aspect-square fill-none aspect-square stroke-2 stroke-current hidden dark:block"><path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><div class="flex items-center gap-4 sm:gap-6"><a class="" href="/cs">CS</a> <a class="" href="/pok">POK</a> <a class="" href="/mon">MON</a> <a class="" href="/projets">Projets</a> <a class="hidden sm:block" href="/promos">Promos</a> <a href="/search"><svg class="h-5 aspect-square stroke-neutral-950 dark:stroke-neutral-300 fill-none stroke-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg> </a><a class="hidden sm:block" href="https://github.com/do-it-ecm/do-it" target="_blank"><svg class="h-5 aspect-square dark:stroke-neutral-300 dark:fill-neutral-300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></div></header><main class="mt-[66px] max-w-[1000px] mx-auto px-4" data-pagefind-body=""><article class="relative"><h1 class="mb-1">SQL Overview</h1><div class="mb-4"><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Tags :</div><ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags"><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">MON</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">SQL</li><li class="bg-yellow-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Tags">vert</li></ul><div class="hidden" data-pagefind-meta="Type" aria-hidden="true"><span data-pagefind-filter="Type">MON</span></div></div><div class="px-4 flex flex-wrap items-center"><div class="font-bold">Auteur :</div><ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs"><li class="bg-blue-200 rounded-full px-2 text-neutral-950" data-pagefind-filter="Auteurs">Lola Perdrix</li></ul></div><div class="absolute top-0 right-0"><span class="bg-purple-200 rounded-full px-3 py-1 mt-2 mr-2 text-neutral-950" data-pagefind-filter="Ann√©e">2024-2025</span></div></div><p class="mb-4 text-lg">√âtude plus approfondie de tout ce que l'on peut faire avec SQL</p><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100 dark:border-purple-800 dark:bg-purple-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-purple-500 dark:stroke-purple-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path></svg><div class="pl-8 mr-8"><a href="/promos/2024-2025/Lola-Perdrix/">Lola Perdrix</a><span class="px-1">/</span><a href="/promos/2024-2025/Lola-Perdrix/mon/">MON de Lola Perdrix</a><span class="px-1">/</span><a href="/promos/2024-2025/Lola-Perdrix/mon/temps-2.1/">SQL Overview</a></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100 dark:border-pink-800 dark:bg-pink-950"><svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-pink-500 dark:stroke-pink-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Pr√©requis</b></p></div><div class="pl-8 mr-8"><p>Bases de SQL</p></div></div><div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100 dark:border-emerald-800 dark:bg-emerald-950"><svg class="absolute w-6 h-6 pl-1 pt-0.5 pb-0.5 fill-none stroke-2 stroke-emerald-500 dark:stroke-emerald-800" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path></svg><div class="pl-8 mb-2 mr-8"><p><b>Liens</b></p></div><div class="pl-8 mr-8"><p><a href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Lola-Perdrix/mon/temps-1.2/">Mon pr√©c√©dent MON sur les bases de SQL</a></p></div></div><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"></a> Introduction</h2><p>L'objectif de ce MON est de continuer le travail d√©but√© pendant mon MON 1.2 sur les bases de SQL. Mon premier MON √©tait plus ax√© sur la r√©alisation des requ√™tes et je me suis perfectionn√©e dessus, mais je souhaite maintenant pouvoir explorer toutes les autres fonctionnalit√©s de SQL afin d'avoir une vue d'ensemble sur tout ce qu'il est possible de faire, pour comprendre un peu mieux cet outil si r√©pandu li√© aux bases de donn√©es relationnelles, et savoir que cela existe lorsque j'en aurais besoin (ce qui n'est pas impossible).</p><p>Ce MON me servira √©galement de ressource lorsque je voudrais me rappeler de certaines notions, c'est pourquoi je lui donnerai la forme d'une grande liste repr√©sentant les actions possibles.</p><h2 id="sources" tabindex="-1"><a class="header-anchor" href="#sources"></a> Sources</h2><p>Pour la majeure partie de ce MON, je me base sur le livre <em><strong>SQL : les fondamentaux du langage</strong></em> de Anne-Christine BISSON. Le livre est super clair, aborde des notions th√©oriques et pratiques avec de nombreux exemples, ainsi que des exercices et des corrig√©s (je recommende si on veut apprendre la m√™me chose que moi). J'ai repris √† peu pr√®s les grands chapitres du livre pour structurer mon MON, en mettant les pages correspondantes.</p><h2 id="le-mod%C3%A8le-relationnel" tabindex="-1"><a class="header-anchor" href="#le-mod%C3%A8le-relationnel"></a> Le mod√®le relationnel</h2><p>J'ai pu revoir dans ce premier chapitre du livre les principes de base sur les mod√®les relationnels. C'est-√†-dire les notions de domaines, de relations, ainsi que l'existence de certaines r√®gles comme <strong>l'unicit√©</strong>, les <strong>cl√©s primaires</strong> et <strong>secondaires</strong>, l'<strong>int√©grit√© r√©f√©rentielle</strong>, la <strong>contrainte d'identit√©</strong>, etc.</p><p>J'ai aussi revu quelques bases de l'alg√®bre relationnelle, qui permet la manipulation des tables, et qui est d'ailleurs √† l'origine de la conception de SQL. Elle utilise des op√©rateurs bas√©s sur la th√©orie des ensembles qui sont princialement :</p><ul><li>L'union</li><li>L'intersection</li><li>La diff√©rence</li><li>La division (on prend le compl√©ment √† la 2e table)</li><li>La restriction (r√©pondu par un WHERE)</li><li>La projection (r√©pondu par un SELECT)</li><li>Le produit cart√©sien</li><li>La jointure : restriction sur le produit cart√©sien</li><li>Calculs √©l√©mentaires et calculs d'aggr√©gats(fonctions statistiques qui requi√®rent plusieurs lignes)--&gt; COUNT, SUM, AVG, MAX...</li></ul><p>La suite du MON permet de voir comment sont effectu√©es ces op√©rations avec SQL.</p><h2 id="ldd-%3A-la-d%C3%A9finition-des-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#ldd-%3A-la-d%C3%A9finition-des-donn%C3%A9es"></a> LDD : La d√©finition des donn√©es</h2><h3 id="types-de-donn%C3%A9es-(p29-37)" tabindex="-1"><a class="header-anchor" href="#types-de-donn%C3%A9es-(p29-37)"></a> Types de donn√©es (p29-37)</h3><p>D√©j√†, 3 types de donn√©es principalement : num√©riques, alphanum√©riques, et temporelles. Chaque SGDBR (syst√®me de gestion de bases de donn√©es relationnelles) peut d√©cliner des types comme il veut pour les adapter √† des probl√©matiques de stockage ou de pr√©cision etc.</p><ul><li><p><strong>Donn√©es num√©riques :</strong> Il y a les entiers (TINYINT, INT, BIT...), les nombres d√©cimaux (DECIMAL, NUMERIC, NUMBER, MONEY...) ou les nombre √† virgule flottante(FLOAT, REAL...). La pr√©cision et le stockage sont renseign√©s pour chaque SGBDR mais je passe cette partie. Il existe des propri√©t√©s qui compl√®tent le type de donn√©es dans les attributs, par exemple : IDENTITY, AUTO_INCREMENT, ZEROFILL... Mais √ßa c'est pareil √ßa existe et varie selon les SGDBR.</p></li><li><p><strong>Caract√®res :</strong> Il y a CHAR ou VARCHAR si la longueur de la cha√Æne est variable. Aussi NCHAR ou NVARCHAR si contient des caract√®res sp√©ciaux (chinois etc.). Idem on peut ajouter des propri√©t√©s comme ASCII, UNICODE, et autres.</p></li><li><p><strong>Donn√©es temporelles :</strong> DATE (format date), TIME (format heure), et TIMESTAMP (format date et heure) principalement. Idem, attention aux divergences entre SGDBR.</p></li><li><p><strong>Autres :</strong> Il peut exister certains autres types comme les donn√©es g√©ographiques, spaciales, ou sp√©cifiques comme les URLs.</p></li></ul><h3 id="cr%C3%A9er%2C-modifier%2C-ou-supprimer-des-objets-(p37-77)" tabindex="-1"><a class="header-anchor" href="#cr%C3%A9er%2C-modifier%2C-ou-supprimer-des-objets-(p37-77)"></a> Cr√©er, modifier, ou supprimer des objets (p37-77)</h3><ul><li><p><strong>Cr√©er une table :</strong> <code>CREATE TABLE</code></p><ul><li>Syntaxe : <code>CREATE TABLE &lt;nom table&gt; (col_1 Type_1, col_2 Type_2, ...);</code></li><li>On peut cr√©er des tables temporaires (existe que dans une session)</li><li>On peut ajouter des commentaires sur le contenu des colonnes avec l'ordre <code>COMMENT</code></li><li>On peut cr√©er une table √† partir d'une autre existante : <code>CREATE TABLE &lt;table&gt; AS SELECT...FROM...WHERE...</code> ou <code>CREATE ... LIKE</code></li><li><code>CREATE SYNONYM</code> permet de donner un autre nom √† une table (fait une copie)</li><li>Pour cr√©er un id unique on peut cr√©er une s√©quence avec <code>CREATE SEQUENCE</code> ou ajouter l'option <code>AUTO_INCREMENT</code> avec le type de la colonne</li></ul></li><li><p><strong>Cr√©er une vue :</strong> <code>CREATE VIEW &lt;nom vue&gt; AS SELECT...</code></p><ul><li>La vue est une sorte de table &quot;virtuelle&quot; qui r√©sulte d'une requ√™te pour un besoin sp√©cifique et r√©p√©t√©. On peut r√©aliser nos requ√™tes directement sur les vues</li><li>N'est pas stock√© sur un disque mais en m√©moire, en permanence mis √† jour</li><li>Permet de simplifier les bdd pour les usages m√©tiers</li><li>Permet de cacher des informations par rapport √† des probl√©matiques de confidentialit√©</li></ul></li><li><p><strong>Modifier une table :</strong> <code>ALTER</code></p><ul><li>Syntaxe : <code>ALTER TABLE &lt;nom table&gt; [liste des modifs]</code></li><li>Ajouter colonne : <code>[ADD &lt;nom col&gt; &lt;type col&gt;]</code></li><li>Supprimer une colonne : <code>[DROP COLUMN &lt;nom col&gt;]</code></li><li>Ajouter des contraintes : <code>[ADD CONSTRAINT &lt;nom contrainte&gt;]</code></li><li>Rennomer une table : <code>RENAME</code></li><li>Modifier une propri√©t√© : <code>[MODIFY &lt;nom col&gt; &lt;propri√©t√©&gt;]</code></li><li>Exemple : ajouter une valeur par d√©faut si pas renseign√© dans la cr√©ation <code>ALTER TABLE Chambres MODIFY Type DEFAULT 3</code></li></ul></li><li><p><strong>Supprimer une table / une vue :</strong> <code>DROP [TABLE / VIEW] &lt;nom [table / vue]&gt;</code></p><ul><li>Attention car suppression souvent d√©finitive</li></ul></li><li><p><strong>Supprimer le contenu d'une table (la vider) :</strong> <code>TRUNCATE TABLE &lt;nom table&gt;</code></p></li><li><p><strong>Notion d'index :</strong> Il s'agit d'une impl√©mentation physique qui permet d'acc√©l√©rer les recherche sur une table (et ne pas la parcourir s√©quentiellement) de mani√®re exponentielle, c'est donc quasiment indispensable. Chaque SGDBR l'impl√©mente comme il le souhaite. Je n'ai pas souhait√© rentrer dans le d√©tails des diff√©rentes m√©thodes d'indexation, c'est un peu plus d√©taill√© dans le <a href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Billa-Valentin/mon/temps-1.1/">MON SQL Avanc√©</a> de Valentin.</p></li><li><p><strong>Contraintes d'int√©grit√© des donn√©es :</strong> Il est possible d'indiquer au syst√®me des contraintes pour permettre d'assurer a coh√©rence de la base de donn√©es</p><ul><li><code>DEFAULT</code> : une valeur √† renseigner par d√©faut afin d'√©viter les valeurs <code>NULL</code> (choix important)</li><li><code>NOT NULL</code> : une colonne qui ne peut pas avoir de valeurs <code>NULL</code></li><li><code>UNIQUE</code> : une colonne qui doit √™tre unique</li><li><code>CHECK</code> : programme un contr√¥le automatique sur une colonne √† chaque m√†j</li><li><code>PRIMARY KEY</code> : le syst√®me v√©rifiera que les valeurs de la cl√© sont uniques (Passer par l'ordre <code>CONSTRAINT</code> si plusieurs colonnes)</li><li>Ces contraintes sont √† d√©clarer apr√®s les types de colonnes lorsqu'on cr√©e la table</li><li><code>FOREIGN KEY</code> : associe la colonne √† une table de r√©f√©rence (<code>CONSTRAINT &lt;nom&gt; FOREIGN KEY (colonne) REFERENCES &lt;table secondaire&gt;</code>)</li></ul></li></ul><h2 id="lmd-%3A-la-manipulation-des-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#lmd-%3A-la-manipulation-des-donn%C3%A9es"></a> LMD : La manipulation des donn√©es</h2><p>Souvent, on peut uniquement faire de la s√©lection de donn√©es, la modification, l'insertion, et la supression des donn√©es √©tant plut√¥t r√©serv√©e aux administrateurs de la base. Cependant je tenais √† explorer toutes ces notions qui peuvent servir.</p><h3 id="la-s%C3%A9lection-de-donn%C3%A9es-(p81-132)" tabindex="-1"><a class="header-anchor" href="#la-s%C3%A9lection-de-donn%C3%A9es-(p81-132)"></a> La s√©lection de donn√©es (p81-132)</h3><p>La majorit√© de cette partie est constitu√©e de notions que j'ai bien approfondies lors de mon MON 1.2. Je ne reviendrais donc pas sur ce qui a d√©j√† √©t√© abord√©e et me pencherais sur les notions compl√©mentaires.</p><ul><li><p><strong>Contr√¥ler les lignes retourn√©es par la requ√™te :</strong></p><ul><li><code>TOP</code> (au d√©but) ou <code>LIMIT</code> (√† la fin) : ne sort que les premi√®res lignes de la requ√™te</li><li><code>OFFSET</code> pour d√©caler les lignes qu'on r√©cup√®re</li><li><code>ROWNUM</code> avec Oracle par ex pour s√©lectionner des lignes en particulier</li></ul></li><li><p><strong>Les sous-requ√™tes</strong> : Peuvent remplacer une variable si ne retourne qu'une ligne. Il existe aussi les <strong>CTE</strong> (common table expression) avec le mot cl√© <code>WITH</code> que j'ai pu voir dans mon premier MON.</p></li><li><p><strong>Autres types de jointures :</strong></p><ul><li>Jointure naturelle : le syst√®me choisit tout seul d'associer les colonnes du m√™me nom (<code>NATURAL JOIN</code>)</li><li>Jointure crois√©e : le syst√®me r√©alise au plus simple un produit cart√©sien (<code>CROSS JOIN</code>)</li><li>On peut faire des jointures en utilisant uniquement un WHERE mais moins conseill√©</li></ul></li><li><p><strong>Op√©rateurs ensemblistes :</strong></p><ul><li><code>UNION</code> pour faire l'union de deux tables (avec <code>ALL</code> si on veut aussi les doublons) -&gt; n√©cessite les m√™mes structures</li><li><code>INERSECT</code> pour faire l'intersection (donc les lignes √† la fois dans la table 1 et la table 2, en supprimant les doublons par d√©faut)</li><li><code>EXCEPT</code> pour faire la diff√©rence : s√©lectionne les lignes de la table 1 qui ne sont pas dans la table 2</li></ul></li></ul><h3 id="restreindre-la-s%C3%A9lection" tabindex="-1"><a class="header-anchor" href="#restreindre-la-s%C3%A9lection"></a> Restreindre la s√©lection</h3><ul><li><p><strong>Instruction de conditions :</strong></p><ul><li>une espce de match de plusieurs possibilit√©s : <code>CASE WHEN...THEN/WHEN...THEN/ELSE...END AS</code></li><li>un if tel que l'on imagine : <code>IIF (&lt;col&gt; &lt;condition&gt; &lt;valeur&gt; &lt;valeur si vrai&gt; &lt;valeur si faux)</code></li></ul></li><li><p>Je passe la liste des op√©rateurs arithm√©tiques et de comparaison car il n'y a rien de particulier. Cependant les <strong>op√©rateurs logiques</strong> peuvent s'av√©rer int√©ressants :</p><ul><li><code>LIKE &quot;__%&quot;</code> : commence par __</li><li><code>LIKE &quot;%__&quot;</code> : finit par __</li><li><code>LIKE &quot;%__%&quot;</code> : contient __</li><li><code>LIKE &quot;_ _ s%&quot;</code> : &quot;s&quot; en 3e position¬µ</li><li><code>BETWEEN</code> : entre 2 dates par exemple</li><li><code>EXISTS</code> : test d'une sous-requ√™te (sous-requ√™te corr√©l√©e)</li><li><code>IN</code> : suivi d'une liste d'√©l√©ments ou sous-requ√™te (sous-requ√™te imbriqu√©e)</li><li><code>SOME</code></li><li><code>ANY</code></li><li>Tous ces op√©rateurs se retrouvent dans les clauses WHERE principalement</li></ul></li></ul><h3 id="ins%C3%A9rer%2C-modifier-ou-supprimer-(p140-169)" tabindex="-1"><a class="header-anchor" href="#ins%C3%A9rer%2C-modifier-ou-supprimer-(p140-169)"></a> Ins√©rer, modifier ou supprimer (p140-169)</h3><ul><li><p><strong>Ins√©rer des donn√©es :</strong> pour rajouter des lignes dans la table</p><ul><li>Souvent ligne par ligne, en respectant l'ordre des colonnes (ou en indiquant les colonnes) : <code>INSERT INTO &lt;table&gt; VALUES (val1, val2, ...);</code></li><li>Il est possible de r√©cup√©rer des lignes d'une autre table en remplacant les <code>VALUES</code> par un <code>SELECT</code></li></ul></li><li><p><strong>Supprimer des donn√©es :</strong> <code>DELETE FROM &lt;table&gt;</code> pour tout supprimer, ou ajouter un <code>WHERE...</code> pour pr√©ciser quoi supprimer en particulier</p></li><li><p><strong>Modifier des lignes :</strong> <code>UPDATE &lt;table&gt; SET &lt;col1&gt; = &lt;val1&gt;, &lt;col2 = val2&gt;, ...</code> pour changer toute la colonne, ou ajouter un <code>WHERE...</code> pour s√©lectionner les lignes √† modifier</p></li><li><p>On peut <strong>agir sur les donn√©es d'une table √† partir d'une autre table</strong> avec <code>MERGE INTO</code> en faisant des <code>WHEN MATCH THEN UPDATE SET...</code> mais je ne suis pas s√ªre que ce soit tr√®s utilis√©</p></li></ul><h3 id="les-fonctions-(p171-209)" tabindex="-1"><a class="header-anchor" href="#les-fonctions-(p171-209)"></a> Les fonctions (p171-209)</h3><ul><li><strong>Les fonctions principales :</strong> J'ai pu refaire un tour des fonctions basiques existantes dans SQL qui peuvent √™tre pratiques pour faire des calculs qui arrangent. Par exemple pour les cha√Ænes de caract√®res : les fonctions <code>CONCAT</code>, <code>LOWER</code>, <code>UPPER</code>, <code>TRIM</code> (pour supprimer les espaces), <code>INSTR</code>, <code>POSITION</code> ou <code>CHARINDEX</code> (pour trouver la position d'une sous-cha√Æne), <code>SUBSTR</code>, <code>ASCII</code>, <code>CONCAT</code>, etc. Les fonctions <code>CAST</code> ou <code>CONVERT</code> peuvent √™tre utiles pour changer le type d'une colonne. Il existe de multiples fonctions propres √† chaque syst√®me notamment pour les donn√©es de type temporelles, je ne vais pas tout √©num√©rer.</li><li>Il y a aussi <strong>les fonctions de fen√™trage</strong>, qui agissent selon les valeurs d'une &quot;fen√™tre&quot;. Il s'agit par exemple des fonctions <code>RANK</code>, <code>LAG</code> et <code>LEAD</code> (ligne pr√©c. et ligne suiv.), <code>NVL</code> ou <code>ISNULL</code> (pour remplacer les valeurs nulles), <code>COALESCE</code>, etc. J'ai eu l'occasion de voir comment les utiliser de mani√®re g√©n√©rale dans mon premier MON sur SQL.</li></ul><h2 id="dcl-%3A-la-s%C3%A9curit%C3%A9-des-donn%C3%A9es" tabindex="-1"><a class="header-anchor" href="#dcl-%3A-la-s%C3%A9curit%C3%A9-des-donn%C3%A9es"></a> DCL : La s√©curit√© des donn√©es</h2><p>Cette partie qu'on retrouve √† partir de la page 215 du livre permet d'√©tudier ce qui permet d'attribuer des droits aux utilisateurs sur les tables. C'est donc plut√¥t reserv√© aux administrateurs des tables.</p><h3 id="pourquoi-faire-(p215)" tabindex="-1"><a class="header-anchor" href="#pourquoi-faire-(p215)"></a> Pourquoi faire (p215)</h3><p>Cela permet la gestion de diff√©rentes typologies d'utilisateurs au sein d'une entreprise dans laquelle on va retrouver une multitude d'usages m√©tiers diff√©rents. Tous ne vont pas faire la m√™me chose et chacun doit pouvoir faire son travail sans risquer de g√™ner celui des autres.</p><h3 id="comment-faire-(p223-241)" tabindex="-1"><a class="header-anchor" href="#comment-faire-(p223-241)"></a> Comment faire (p223-241)</h3><p>En g√©n√©ral on classe les utilisateurs par fonction et par m√©tier puis on d√©termine quelle fonction a besoin de quelle table. De quels acc√®s ont-ils besoin ? Peuvent-ils faire des mises √† jour ou lire seulement ? Ce travail doit √™tre fait par l'IT conjointement avec des r√©f√©rents m√©tiers.</p><p>Ces infos sont regroup√©es elles-m√™me dans des tables qui peuvent √™tre mises √† jour si besoin (d√©parts / changements de poste...) et qui sont d√©di√©es √† les gestion des droits utilisateurs. <strong>Essayer de metre la photo p216</strong>. On va pouvoir attribuer les droits correspondants aux utilisateurs apr√®s cette √©tude, et aussi cr√©er des r√¥les pour regrouper des utilisateurs auxquels on va attribuer les m√™mes droits.</p><p>Apr√®s il y a des commandes qui permettent de :</p><ul><li><strong>Cr√©er un utiisateur</strong> : <code>CREATE USER &lt;user&gt; IDENTIFIED BY &lt;mdp&gt;</code> (plus ou moins selon syst√®me)</li><li><strong>Attribuer des droits</strong> avec l'ordre <code>GRANT</code> :<ul><li>Syntaxe : <code>GRANT [SELECT/UPDATE/DELETE/INSERT] ON TABLE &lt;table&gt; TO &lt;user1&gt;, &lt;user2&gt;,... (WITH GRANT OPTION)</code></li><li>On peut sp√©cifier des colonnes de la table</li><li>On peut d√©signer tous les users avec <code>PUBLIC</code></li><li>On peut aussi GRANT sur des commandes du LLD (ex : <code>GRANT CREATE TABLE TO &lt;user&gt;</code>)</li></ul></li><li><strong>Supprimer des droits</strong> avec l'ordre <code>REVOKE</code> :<ul><li>Syntaxe : <code>REVOKE [SELECT/UPDATE/DELETE/INSERT] ON TABLE &lt;table&gt; FROM &lt;user&gt;</code></li><li>M√™mes principes que pour GRANT</li></ul></li><li><strong>Interdire des actions</strong> (SQL Server) avec <code>DENY</code></li><li><strong>Cr√©er un r√¥le :</strong> <code>CREATE ROLE &lt;nom r√¥le&gt;</code></li><li><strong>Attribuer un r√¥le :</strong> <code>GRANT &lt;r√¥le&gt; TO &lt;user&gt;</code></li><li><strong>Supprimer un r√¥le :</strong> <code>ALTER ROLE &lt;nom r√¥le&gt; DROP MEMBER &lt;user&gt;</code> ou si plus personne <code>DROP ROLE &lt;nom r√¥le&gt;</code></li></ul><h2 id="tcl-%3A-le-contr%C3%B4le-des-transactions" tabindex="-1"><a class="header-anchor" href="#tcl-%3A-le-contr%C3%B4le-des-transactions"></a> TCL : Le contr√¥le des transactions</h2><p>Ce dernier chapitre du livre est un peu plus technique. Elle aborde la probl√©matique des acc√®s simultan√©s sur une base qui peuvent cr√©er des conflits et comment s'en charger. C'est peut √™tre une partie un peu moins int√©ressante mais tout de m√™me √† conna√Ætre dans les grandes lignes.</p><p>On a ce qu'on appelle des ph√©nom√®nes de <strong>lectures r√©p√©titives</strong> ou de <strong>lignes fant√¥mes</strong> lorsque les utilisateurs modifient en m√™me temps les m√™mes donn√©es. Pour √©viter cela on a cr√©√© la notion de <strong>transaction</strong>, qui permet de borner le d√©but et la fin d'une action dans la base.</p><p><strong>Maintenant comment √©viter les incoh√©rences ?</strong> (p248-252)</p><ul><li>Lancer les transactions en s√©ries (peut cr√©er des temps d'attentes importants)</li><li>Bloquer puis lib√©rer les objets impliqu√©s √† chaque programme (pose probl√®me si l'utilisateur oublie de valider ou prend son temps car bloque tout)</li><li>Sauvegarder les donn√©es lues en m√©moire puis relecture juste avant la validation pour v√©rifier si toujours les bonnes donn√©es, sinon refus de l'update</li><li>Diff√©rents types de verrouillage : <code>READ UNCOMMITED</code>, <code>READ COMMITED</code>, <code>REPEATABLE READ</code>, et <code>SERIAZABLE</code> (du plus libre au plus restrictif, et don donc au plus s√©curisant). Ensuite on peut param√©trer le niveau de verrouillage que l'on veut avec <code>SET SESSION TRASACTION ISOLATION LEVEL</code></li><li>Enfin on peut &quot;r√©server&quot; une table le temps d'une op√©ration pour emp√™cher la modification de lignes entre temps : <code>SELECT col FROM table FOR UPDATE</code></li></ul><p>J'avoue ne pas avoir tout compris √† propos de ces techniques et de leur diff√©rences mais je ne suis pas s√ªre que ce soit tr√®s grave √† ce niveau.</p><h3 id="notion-de-validation-des-modifications-(p258-260)" tabindex="-1"><a class="header-anchor" href="#notion-de-validation-des-modifications-(p258-260)"></a> Notion de validation des modifications (p258-260)</h3><p>En SQL il existe aussi la <strong>notion de &quot;commit&quot;</strong> pour la validation de nos modifications, cela permet aussi de lib√©rer les verrous qui ont pu √™tre pos√©s pour notre travail. Il s'agit simplement de l'ordre <code>COMMIT</code>.</p><p>Si on veut <strong>revenir en arri√®re</strong>, il existe l'ordre <code>ROLLBACK</code> qui invalide la modification et nous ram√®ne au point de sauvegarde pr√©c√©dent.</p><p>On peut d√©finir nous m√™me nos <strong>points de sauvegarde</strong> pour pouvoir faire des retours en arri√®re, il suffit de d√©finir un <code>SAVEPOINT &lt;nom du savepoint&gt;</code>.</p><h2 id="faire-des-programmes-avec-sql" tabindex="-1"><a class="header-anchor" href="#faire-des-programmes-avec-sql"></a> Faire des programmes avec SQL</h2><p>Au del√† de faire des requ√™tes, j'ai aussi vu la possibilit√© de faire du code avec SQL qui peut servir notamment √† cr√©er des <strong>fonctions</strong> et <strong>proc√©dures stock√©es</strong> ou des d√©clencheurs qui peuvent faire gagner beaucoup de temps selon les usages. On les appelle avec les ordres <code>EXECUTE</code> ou <code>CALL</code>.</p><p>Il existe des langages de programmation d√©di√©s comme <strong>PL/SQL</strong> ou <strong>TransactSQL</strong>.</p><p>J'ai pu explorer un petit peu les m√©thodes, qui consistent comme en programmation g√©n√©rale en d√©finir des variables, rajouter des requ√™tes SQL stock√©es dans des curseurs que l'on peut parcourir avec des boucles, faire des op√©rations sur des valeurs retourn√©es, et renvoyer des valeurs ou non. Il existe un tas de choses que l'on peut faire et que j'ai un peu parcourues sans rentrer dans le d√©tail car ce n'est pas forc√©ment ce qui √©tait essentiel. Si besoin le <a href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Billa-Valentin/mon/temps-1.1/">MON SQL Avanc√©</a> de Valentin aborde un peu plus le sujet.</p><h2 id="soucis-de-performance-et-conseils" tabindex="-1"><a class="header-anchor" href="#soucis-de-performance-et-conseils"></a> Soucis de performance et conseils</h2><p>Faire des requ√™tes sur des grandes tables de donn√©es peut tr√®s vite poser des soucis de performance et des temps d'attente importants. Il est important de savoir optimiser nos calculs, j'ai d√©j√† un peu abord√© le sujet dans mon premier MON. J'ai regroup√© des informations √©parpill√©es dans le livre que j'ai cru bon de rassembler ici.</p><ul><li><p><strong>Mieux comprendre ce avec quoi on travaille</strong></p><ul><li>Obtenir la description du sch√©ma d'une table : <code>DESC &lt;nom table&gt;</code></li></ul></li><li><p><strong>Mieux √©crire nos requ√™tes</strong></p><ul><li>On peut faire des commentaires dans le code (<code>/* */</code> ou <code>#</code> ou encore <code>--</code>)</li><li>V√©rifier les syntaxes pr√©cises dans les clauses WHERE (source d'erreur fr√©quente)</li><li>Limiter les jointures</li></ul></li><li><p><strong>Optimiser une requ√™te</strong></p><ul><li>√âvaluer d'abord la taille de nos requ√™tes avec COUNT(*) en premier lieu par exemple</li><li>Privil√©gier l'utilisation des colonnes index√©es</li><li>Utiliser la commande <code>EXPLAIN</code> ou <code>EXPLAIN PLAN</code> pour analyser comment le syst√®me parvient √† r√©aliser ce qu'on lui demande (cf <a href="https://do-it.aioli.ec-m.fr/promos/2024-2025/Billa-Valentin/mon/temps-1.1/">MON de Valentin</a>)</li></ul></li></ul><h2 id="r%C3%A9sum%C3%A9" tabindex="-1"><a class="header-anchor" href="#r%C3%A9sum%C3%A9"></a> R√©sum√©</h2><p><img src="https://raw.githubusercontent.com/do-it-ecm/promo-2024-2025/refs/heads/main//Lola-Perdrix/mon/temps-2.1/resume.jpg" alt="image"></p><p><em><strong>Photo : <a href="https://stacklima.com/sql-ddl-dml-tcl-et-dcl/">StackLima.com</a></strong></em></p><p>A la fin du livre on retrouve √©galement le r√©sum√© de toutes les syntaxes essentielles.</p><h2 id="bonus-%3A-notions-de-nosql" tabindex="-1"><a class="header-anchor" href="#bonus-%3A-notions-de-nosql"></a> Bonus : notions de NoSQL</h2><p>Apr√®s avoir autant √©t√© plong√©e dans l'univers de SQL, j'ai souhait√© regarder un petit peu du c√¥t√© de NoSQL sur mon temps restant pour compl√©ter ces connaissances et prendre du recul (parce qu'il ne faudrait pas que je me dise que SQL r√®gne de partout).</p><p>J'ai regard√© sur le site d'<a href="https://www.oracle.com/fr/database/nosql/what-is-nosql/">Oracle</a> quelques d√©fintions et explications.</p><p>Le NoSQL sert donc √† traiter les bases de donn√©es non relationnelles, sur lesquelles on peut quand m√™me faire des requ√™tes classiques, c'est pourquoi on les appelle les bases &quot;pas seulement SQL&quot;. Il a √©t√© con√ßu dans l'objectif de pouvoir s'adapter aux √©volutions applicatives et pour faire des requ√™tes efficaces sur un grand volume.</p><p>De ce que j'ai compris :</p><table><thead><tr><th>Avantages</th><th>Inconv√©nients</th></tr></thead><tbody><tr><td>√âvolutivit√© √©lev√©e et rapide, s'adapte facilement</td><td>Donn√©es pas (souvent) normalis√©es, donc pas terrible pour des secteurs comme la finance ou la comptabilit√©</td></tr><tr><td>Haute disponibilit√©, et haute performance</td><td>Bien pour des requ√™tes simples sur de gros volumes mais se complexifie rapidement si plusieurs tables et requ√™te plus fine</td></tr><tr><td>Sch√©mas flexibles, stockage non structur√©</td><td>Syntaxe diff√©rente d'une base √† l'autre</td></tr></tbody></table><p>Le NoSQL serait donc largement utilis√© pour les applications en temps r√©√©l, les grands volumes de donn√©es. Il exise 4 types de base NoSQL, cela vaudrait le coup de se pencher un peu plus dessus. Enfin, on peut aussi maintenant avoir des mod√®les &quot;hybrides&quot; en combinant les bases de donn√©es relationnelles et non-relationnelles dans une m√™me entreprise.</p><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"></a> Conclusion</h2><p>Ce MON m'a vraiment permis de <strong>balayer tous l'univers de SQL</strong>. Je ne suis jamais rentr√©e dans le d√©tail de chacune de ces notions, c'est pourquoi il y en a beaucoup, mais ce n'√©tait pas le but car je ne suis pas s√ªre que cela aurait √©t√© utile. J'ai d√©sormais une bonne connaissance d'ensemble sur le sujet et je suis globalement tr√®s satisfaite de ce MON.</p><p><strong>Reste √† faire :</strong> S'entra√Æner sur ces notions en les pratiquant et en les mettant en oeuvre dans un des syst√®mes de gestion, sans oublier de regarder un peu du c√¥t√© du fonctionnement un peu plus pouss√© du NoSQL.</p><p>D'un point de vue plus technique par rapport √† la r√©daction du MON, j'aurais du prendre mes notes directement sur mon ordinateur... cela m'aurait √©pargn√© un peu de temps de resaisie (je n'ai pas compt√© le temps de r√©daction dans le MON).</p><h2 id="bibliographie" tabindex="-1"><a class="header-anchor" href="#bibliographie"></a> Bibliographie</h2><ul><li>Le livre <em><strong>SQL : les fondamentaux du langage</strong></em> de Anne-Christine BISSON</li><li>L'article <a href="https://www.oracle.com/fr/database/nosql/what-is-nosql/">What is NoSQL</a> sur le site d'Oracle.</li></ul></article></main><footer class="min-h-[50px] border-t-2 mt-4 border-gray-200 dark:border-neutral-700"><div class="max-w-[1000px] mx-auto px-4"><div class="min-h-[50px] flex justify-center items-center"><p class="text-center">¬©2025 <b><span style="font-family:Consolas,sans-serif">Do-<span style="color:#4a86e8">It</span></span></b> - D√©veloppement, Management et Gestion de projets en IT</p></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-svg-full.js" defer="">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}},document.addEventListener("DOMContentLoaded",(()=>{MathJax.typeset()}))</script><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js">Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})</script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script></body></html>